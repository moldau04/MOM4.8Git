/*  
MOM 5.0 Generic deployment script	[ Add New/Alter Table , Column ]  
--------------------------------------------------------------------------------------> 

=========>  Step 1 Run MOM 5.0 Generic deployment script for Table.
=========>  Step 2 Run MOM 5.0 Generic deployment script for Column.
=========>  Step 3 Run MOM 5.0 Generic deployment script for StoredProcedure.
=========>  Step 2 Run MOM 5.0 Generic deployment script for Primary and Index.


PRINT('/*---- $$$$$$ Note:- PLEASE DO NOT WRITE A SCRIPT FOR DROP ANY   /  COLUMN  IN THIS SCRIPT $$$$--*/')

PRINT('')

PRINT('/*=================> $$$ ADD NEW TABLE $$$  <================*/')

PRINT('')

PRINT('/*Start ====> */')

PRINT('..........')


*/



PRINT('/* =====||End*/')

PRINT('')

PRINT('/*=================> $$$ ADD NEW COLUMN $$$ <================*/')

PRINT('')

PRINT('/*Start ====>*/')

PRINT('..........')

 ----========================================================================================


 /*==================================$$$ ADD NEW COLUMN $$$ =============================*/ 


--===========================================================================================

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Chart'       AND COLUMN_NAME = 'DefaultNo') BEGIN ALTER TABLE Chart ADD DefaultNo varchar(15) NULL END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'Chart'    AND COLUMN_NAME = 'Department') BEGIN ALTER TABLE Chart ADD Department INT NULL END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'Chart'    AND COLUMN_NAME = 'EN') BEGIN ALTER TABLE Chart ADD EN INT NULL END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'Estimate'      AND COLUMN_NAME = 'EstimateUserId') BEGIN ALTER TABLE Estimate ADD EstimateUserId varchar(15) NULL END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'Estimate'   AND COLUMN_NAME = 'CompanyName') BEGIN  ALTER TABLE Estimate ADD  [CompanyName]   varchar(100) NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'Estimate'    AND COLUMN_NAME = 'ContPer') BEGIN  ALTER TABLE Estimate ADD  [ContPer]   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS       WHERE  TABLE_NAME = 'Estimate'   AND COLUMN_NAME = 'PType') BEGIN ALTER TABLE Estimate ADD  PType   smallint NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Estimate'       AND COLUMN_NAME = 'Amount') BEGIN  ALTER TABLE Estimate ADD  Amount   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Estimate'    AND COLUMN_NAME = 'BillRate') BEGIN ALTER TABLE Estimate ADD  BillRate   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate'AND COLUMN_NAME = 'OT') BEGIN ALTER TABLE Estimate ADD  OT   numeric(30,2) NULL; END
---
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'RateTravel') BEGIN ALTER TABLE Estimate ADD  RateTravel   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'DT') BEGIN ALTER TABLE Estimate ADD  DT   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'RateMileage') BEGIN ALTER TABLE Estimate ADD  RateMileage   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'RateNT') BEGIN ALTER TABLE Estimate ADD  RateNT   numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EstimateI' AND COLUMN_NAME = 'AmountPer') BEGIN ALTER TABLE EstimateI ADD  AmountPer   varchar(100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'ProfileImage') BEGIN ALTER TABLE tblUser ADD ProfileImage varchar(15) NULL ; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'BillingCodesPermission') BEGIN ALTER TABLE tblUser ADD BillingCodesPermission char(4) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Invoice' AND COLUMN_NAME = 'DDate') BEGIN  ALTER TABLE Invoice ADD DDate datetime   NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Invoice' AND COLUMN_NAME = 'GSTRate') BEGIN  ALTER TABLE Invoice ADD GSTRate  INT NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvoiceI' AND COLUMN_NAME = 'Warehouse') BEGIN  ALTER TABLE InvoiceI ADD Warehouse INT NULL ; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvoiceI' AND COLUMN_NAME = 'JobOrg') BEGIN  ALTER TABLE InvoiceI ADD JobOrg INT NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvoiceI' AND COLUMN_NAME = 'WHLocID') BEGIN  ALTER TABLE InvoiceI ADD WHLocID INT NULL;  END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'MinAmount') BEGIN  ALTER TABLE tblUser ADD MinAmount decimal(18,2) NULL END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'MaxAmount') BEGIN ALTER TABLE tblUser ADD MaxAmount numeric(18,2) NULL ; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'PORevision') BEGIN  ALTER TABLE PO ADD PORevision varchar(50) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'ManualInvoice') BEGIN  ALTER TABLE TicketD ADD ManualInvoice varchar(50) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'isdefault') BEGIN  ALTER TABLE Category ADD isdefault varchar(50) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'Chargeable') BEGIN  ALTER TABLE Category ADD Chargeable BIT NULL; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'QBInvoiceID') BEGIN ALTER TABLE TicketD ADD QBInvoiceID VARCHAR(100) NULL ; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Prospect' AND COLUMN_NAME = 'Referral') BEGIN  ALTER TABLE Prospect ADD Referral VARCHAR(100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'Lat') BEGIN  ALTER TABLE Control ADD Lat VARCHAR(50) NULL ; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'Lng') BEGIN  ALTER TABLE Control ADD Lng VARCHAR(50) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'JobCostLabor') BEGIN  ALTER TABLE Control ADD JobCostLabor smallint  NULL; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'msrep') BEGIN  ALTER TABLE Control ADD msrep smallint  NULL; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'IsshowHomeowner') BEGIN  ALTER TABLE Control ADD IsshowHomeowner bit  NULL ; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'IsLocAddressBlank') BEGIN  ALTER TABLE Control ADD IsLocAddressBlank bit  NULL ;  END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'SalesAnnual') BEGIN  ALTER TABLE Control ADD SalesAnnual numeric(30,2) NULL ;   END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'msemail') BEGIN ALTER TABLE Control ADD msemail numeric(30,2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevShutDownLog' AND COLUMN_NAME = 'planned') BEGIN ALTER TABLE ElevShutDownLog ADD [planned]		Bit				NULL; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'businessend') BEGIN  ALTER TABLE Control ADD businessend datetime    NULL ; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'QBFirstSync') BEGIN ALTER TABLE Control ADD QBFirstSync smallint NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'QBLastSync') BEGIN  ALTER TABLE Control ADD QBLastSync smallint NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipTemp'  AND COLUMN_NAME = 'Code') BEGIN  ALTER TABLE EquipTemp ADD Code  varchar(25) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Route' AND COLUMN_NAME = 'Color') BEGIN ALTER TABLE Route ADD Color varchar(25) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'AND COLUMN_NAME = 'Lat') BEGIN ALTER TABLE tblUser ADD Lat nvarchar(100) NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'Lng') BEGIN ALTER TABLE tblUser ADD Lng nvarchar(100) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'Country')  BEGIN ALTER TABLE tblUser ADD Country nvarchar(50) NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'Title')  BEGIN ALTER TABLE tblUser ADD Title nvarchar(100) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'CoverImage') BEGIN ALTER TABLE tblUser ADD CoverImage nvarchar(MAX) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tbluser' AND COLUMN_NAME = 'DefaultWorker') BEGIN  ALTER TABLE tbluser ADD DefaultWorker smallint  NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Prospect' AND COLUMN_NAME = 'BusinessType') BEGIN ALTER TABLE Prospect ADD BusinessType  varchar(50)NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'BusinessType')  BEGIN  ALTER TABLE Lead ADD [BusinessType]   VARCHAR(50)     NULL ; end
	
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'Product') BEGIN  ALTER TABLE Lead ADD [Product]        VARCHAR(50)     NULL ; end 	

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'EstimateID') BEGIN  ALTER TABLE Lead ADD [EstimateID] [int] NULL ; end 	

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'OpportunityStageID') BEGIN  ALTER TABLE Lead ADD [OpportunityStageID] [int] NULL ; end
	
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'CompanyName') BEGIN  ALTER TABLE Lead ADD [CompanyName] [varchar](75) NULL ; end
	
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'IsSendMailToSalesPer') BEGIN  ALTER TABLE Lead ADD [IsSendMailToSalesPer]  bit null ; end

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'OpportunityStageID') BEGIN ALTER TABLE Lead ADD OpportunityStageID int NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'GrossInc') BEGIN ALTER TABLE Control ADD GrossInc numeric(30,2) NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'Month ') BEGIN ALTER TABLE Control ADD Month smallint   NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'businesssEnd') BEGIN ALTER TABLE Control ADD businesssEnd datetime NULL END
	 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'tinternet') BEGIN ALTER TABLE Control ADD tinternet smallint NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'codes')  BEGIN  ALTER TABLE Control ADD codes smallint NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'MSIsTaskCodesRequired ')  BEGIN  ALTER TABLE Control ADD MSIsTaskCodesRequired bit NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'businessstart') BEGIN ALTER TABLE Control ADD businessstart  datetime NULL END
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Bank' AND COLUMN_NAME = 'Chart') BEGIN ALTER TABLE Bank ADD Chart INT  NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Bank' AND COLUMN_NAME = 'LastReconDate') BEGIN ALTER TABLE Bank ADD LastReconDate DATETIME  NULL END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Branch' AND COLUMN_NAME = 'Status') BEGIN  ALTER TABLE Branch ADD Status INT NULL; PRINT N'TABLE Branch ADD Status INT...'; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'Icon')  BEGIN ALTER TABLE Category ADD Icon IMAGE    NULL;PRINT N'TABLE Category ADD Icon IMAGE...';END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'Chargeable') BEGIN ALTER TABLE Category ADD Chargeable BIT    NULL END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'isdefault') BEGIN ALTER TABLE Category ADD isdefault SMALLINT    NULL END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'CD' AND COLUMN_NAME = 'ACH') BEGIN ALTER TABLE CD ADD ACH TINYINT    NULL; PRINT N'TABLE CD ADD ACH TINYINT...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'CD' AND COLUMN_NAME = 'IsRecon') BEGIN ALTER TABLE CD ADD [IsRecon] BIT NULL; END 
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'QBAccountID')  BEGIN ALTER TABLE Chart ADD [QBAccountID] VARCHAR (100) NULL; PRINT N'TABLE Chart ADD [QBAccountID] VARCHAR (100)...'; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'LastUpdateDate')  BEGIN  ALTER TABLE Chart ADD  [LastUpdateDate] DATETIME  NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'DefaultNo')  BEGIN ALTER TABLE Chart ADD [DefaultNo]   VARCHAR (15)  NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'TimeStamp') BEGIN ALTER TABLE Chart ADD  [TimeStamp] ROWVERSION    NOT NULL; END
     
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'Expiration') BEGIN ALTER TABLE Contract ADD [Expiration] SMALLINT  NULL; PRINT N'TABLE Contract ADD [Expiration] SMALLINT...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS  WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'ExpirationDate') BEGIN ALTER TABLE Contract ADD  [ExpirationDate] DATETIME   NULL;END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract'AND COLUMN_NAME = 'Frequencies') BEGIN ALTER TABLE Contract ADD [Frequencies]  SMALLINT  NULL;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract'AND COLUMN_NAME = 'Chart') BEGIN ALTER TABLE Contract ADD [Chart] INT   NULL; END 
    
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'SageID') BEGIN  ALTER TABLE Contract ADD   [SageID]  VARCHAR (100) NULL;  END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'LastUpdateDate')  BEGIN  ALTER TABLE Contract ADD  [LastUpdateDate] DATETIME NULL;END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract'AND COLUMN_NAME = 'TicketCategory') BEGIN ALTER TABLE Contract ADD [TicketCategory] VARCHAR (50)   NULL; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'Email') BEGIN ALTER TABLE Control ADD Email VARCHAR (50) NULL;PRINT N'TABLE Control ADD Email VARCHAR (50)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'WebAddress') BEGIN ALTER TABLE Control ADD WebAddress VARCHAR (50) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'DSN') BEGIN ALTER TABLE Control ADD DSN VARCHAR (50) NULL END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Username') 
BEGIN 
ALTER TABLE Control ADD Username VARCHAR (50) NULL
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Password') 
BEGIN 
ALTER TABLE Control ADD Password VARCHAR (50) NULL
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'DBName') 
BEGIN 
ALTER TABLE Control ADD DBName VARCHAR (50) NULL
END
 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Contact') 
BEGIN 
ALTER TABLE Control ADD Contact VARCHAR (50) NULL
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Remarks') 
BEGIN 
ALTER TABLE Control ADD Remarks VARCHAR (50) NULL
END
       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Map') 
BEGIN 
ALTER TABLE Control ADD Map SMALLINT    DEFAULT ((0)) NULL
END 
				   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Custweb') 
BEGIN 
ALTER TABLE Control ADD Custweb SMALLINT    DEFAULT ((0)) NULL
END    
        
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MultiLang') 
BEGIN 
ALTER TABLE Control ADD MultiLang SMALLINT    DEFAULT ((0)) NULL
END   
 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'QBIntegration') 
BEGIN 
ALTER TABLE Control ADD QBIntegration SMALLINT   DEFAULT ((0)) NULL
END   
 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'QBFirstSync') 
BEGIN 
ALTER TABLE Control ADD QBFirstSync SMALLINT NULL
END   
 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSEmail') 
BEGIN 
ALTER TABLE Control ADD MSEmail SMALLINT  NULL
END   
 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSSignTime') 
BEGIN 
ALTER TABLE Control ADD MSSignTime SMALLINT  NULL
END  
	 			   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSREP') 
BEGIN 
ALTER TABLE Control ADD MSREP SMALLINT  NULL
END   
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Month') 
BEGIN 
ALTER TABLE Control ADD Month SMALLINT  NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Payment') 
BEGIN 
ALTER TABLE Control ADD Payment SMALLINT  NULL
END   
    
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'QBPath') 
BEGIN 
ALTER TABLE Control ADD QBPath VARCHAR (500)  NULL
END    
				       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'SageLastSync') 
BEGIN 
ALTER TABLE Control ADD SageLastSync DATETIME  NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'GrossInc') 
BEGIN 
ALTER TABLE Control ADD GrossInc  NUMERIC (30, 2) NULL
END 
				  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'SalesAnnual') 
BEGIN 
ALTER TABLE Control ADD SalesAnnual NUMERIC (30, 2) NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'WIPHeader'
AND COLUMN_NAME = 'PeriodDate') 
BEGIN 
ALTER TABLE WIPHeader ADD [PeriodDate] datetime NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'WIPHeader'
AND COLUMN_NAME = 'RevisionDate') 
BEGIN 
ALTER TABLE WIPHeader ADD [RevisionDate] datetime NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'QBServiceItem') 
BEGIN 
ALTER TABLE Control ADD QBServiceItem  VARCHAR (100) NULL
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'QBServiceItemLabor') 
BEGIN 
ALTER TABLE Control ADD QBServiceItemLabor  VARCHAR (100) NULL
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'QBServiceItemExp') 
BEGIN 
ALTER TABLE Control ADD QBServiceItemExp  VARCHAR (100) NULL
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'CoCode') 
BEGIN 
ALTER TABLE Control ADD [CoCode] [varchar](100) NULL
END
  
       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSRTLabel') 
BEGIN 
ALTER TABLE Control ADD MSRTLabel  VARCHAR (3) NULL
END 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EquipTItem'
AND COLUMN_NAME = 'LeadEquip') 
BEGIN 
ALTER TABLE EquipTItem ADD [LeadEquip] INT NULL
END 
				  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSOTLabel') 
BEGIN 
ALTER TABLE Control ADD MSOTLabel  VARCHAR (3) NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSNTLabel') 
BEGIN 
ALTER TABLE Control ADD MSNTLabel  VARCHAR (3) NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSDTLabel') 
BEGIN 
ALTER TABLE Control ADD MSDTLabel  VARCHAR (3) NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSTTLabel') 
BEGIN 
ALTER TABLE Control ADD MSTTLabel VARCHAR (3) NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSTOTLabel') 
BEGIN 
ALTER TABLE Control ADD MSTOTLabel  VARCHAR (3) NULL
END       
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSTNTLabel') 
BEGIN 
ALTER TABLE Control ADD MSTNTLabel  VARCHAR (3) NULL
END 
				   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSTDTLabel') 
BEGIN 
ALTER TABLE Control ADD MSTDTLabel  VARCHAR (3) NULL
END 
				   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSTimeDataFieldVisibility') 
BEGIN 
ALTER TABLE Control ADD MSTimeDataFieldVisibility  VARCHAR (3) NULL
END  
				         
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSTimeDataFieldVisibility') 
BEGIN 
ALTER TABLE Control ADD MSTimeDataFieldVisibility  VARCHAR (3) NULL
END          
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'GPS') 
BEGIN 
ALTER TABLE Control ADD GPS  SMALLINT NULL
END  
				         
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'SageIntegration') 
BEGIN 
ALTER TABLE Control ADD SageIntegration SMALLINT NULL
END  
				   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'TsIntegration') 
BEGIN 
ALTER TABLE Control ADD TsIntegration SMALLINT NULL
END          
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSAttachReport') 
BEGIN 
ALTER TABLE Control ADD MSAttachReport TINYINT NULL
END          
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'TInternet') 
BEGIN 
ALTER TABLE Control ADD TInternet  SMALLINT NULL
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'GroupName') 
BEGIN 
ALTER TABLE Estimate ADD [GroupName] VARCHAR(255) NULL
END 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'GroupId') 
BEGIN 
ALTER TABLE Estimate ADD  [GroupId] INT NULL
END 
        
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'Codes') 
BEGIN 
ALTER TABLE Control ADD Codes  SMALLINT NULL
END          
              
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'SyncLast') 
BEGIN 
ALTER TABLE Control ADD SyncLast DATETIME  NULL
END          
              
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'IntDate') 
BEGIN 
ALTER TABLE Control ADD IntDate DATETIME  NULL
END          
              
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'SCDate') 
BEGIN 
ALTER TABLE Control ADD SCDate DATETIME  NULL
END          
                 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'StatementDate') 
BEGIN 
ALTER TABLE Control ADD StatementDate DATETIME  NULL
END          
                 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'BusinessEnd') 
BEGIN 
ALTER TABLE Control ADD BusinessEnd DATETIME  NULL
END          
                 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'BusinessStart') 
BEGIN 
ALTER TABLE Control ADD BusinessStart DATETIME  NULL
END          
                 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'IntAmount') 
BEGIN 
ALTER TABLE Control ADD IntAmount NUMERIC (30, 2)  NULL
END  
				         
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'SCAmount') 
BEGIN 
ALTER TABLE Control ADD SCAmount NUMERIC (30, 2)  NULL
END    
				       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'BANK') 
BEGIN 
ALTER TABLE  Control ADD BANK INT  NULL
END               
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'JobCostLabor') 
BEGIN 
ALTER TABLE Control ADD JobCostLabor SMALLINT  NULL
END               
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'MSIsTaskCodesRequired') 
BEGIN 
ALTER TABLE Control ADD MSIsTaskCodesRequired BIT  NULL
END               
  
    
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'IsLocAddressBlank') 
BEGIN 
ALTER TABLE Control ADD IsLocAddressBlank BIT CONSTRAINT [DF_Control_Homeowner] DEFAULT ((0))  NULL
END               
  
    
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Control'
AND COLUMN_NAME = 'ISshowHomeowner') 
BEGIN 
ALTER TABLE Control ADD ISshowHomeowner BIT CONSTRAINT [DF_Control_Homeowner] DEFAULT ((0))  NULL
END               
  
        
      
    

 
 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Dep' AND COLUMN_NAME = 'IsRecon') BEGIN ALTER TABLE Dep ADD [IsRecon] BIT NULL; PRINT N'TABLE Dep ADD [IsRecon] BIT NULL...'; END 
   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Diagnostic'
AND COLUMN_NAME = 'OrderNo') 
BEGIN 
ALTER TABLE Diagnostic ADD [OrderNo] INT NULL;
PRINT N'TABLE Diagnostic ADD [OrderNo] INT NULL...';

END 

 
 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Documents'
AND COLUMN_NAME = 'TempID') 
BEGIN 
ALTER TABLE Documents ADD [TempID] VARCHAR (150) NULL;
PRINT N' TABLE Documents ADD [TempID] VARCHAR (150) NULL...';

END 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Documents'
AND COLUMN_NAME = 'Date') 
BEGIN 
ALTER TABLE Documents ADD  [Date]  DATETIME  NULL;

END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Documents'
AND COLUMN_NAME = 'Subject') 
BEGIN 
ALTER TABLE Documents ADD  [Subject] VARCHAR (70) NULL;

END 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Documents'
AND COLUMN_NAME = 'Body') 
BEGIN 
ALTER TABLE Documents ADD [Body] VARCHAR (250) NULL;

END 

       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Documents'
AND COLUMN_NAME = 'Portal') 
BEGIN 
ALTER TABLE Documents ADD  [Portal]  SMALLINT  NULL;

END 
       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Documents'
AND COLUMN_NAME = 'MSVisible') 
BEGIN 
ALTER TABLE Documents ADD  [MSVisible] BIT NULL;

END 

       
        
       
 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Done'
AND COLUMN_NAME = 'CreatedBy') 
BEGIN 
ALTER TABLE Done ADD [CreatedBy] VARCHAR (50) NULL;
PRINT N'TABLE Done ADD [CreatedBy] VARCHAR (50) NULL...';

END 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Done'
AND COLUMN_NAME = 'CreateDate') 
BEGIN 
ALTER TABLE Done ADD  [CreateDate] DATETIME NULL;
END 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Done'
AND COLUMN_NAME = 'LastUpdatedBy') 
BEGIN 
ALTER TABLE Done ADD [LastUpdatedBy] VARCHAR (50) NULL;
END 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Done'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Done ADD [LastUpdateDate] DATETIME  NULL;
END 
      
       


 



IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'Category') 
BEGIN 
ALTER TABLE Elev ADD [Category]  VARCHAR (20)  NULL;
PRINT N'TABLE Elev ADD [Category]  VARCHAR (20)...';
END 
      
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Elev ADD [LastUpdateDate] DATETIME  NULL;
END 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'PrimarySyncID') 
BEGIN 
ALTER TABLE Elev ADD [PrimarySyncID]  INT   NULL;
END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'CustomField') 
BEGIN 
ALTER TABLE Elev ADD [CustomField]  VARCHAR (100) NULL;
END 
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'Classification') 
BEGIN 
ALTER TABLE Elev ADD [Classification]    VARCHAR (20)     NULL;
END      
   


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevatorSpec' AND COLUMN_NAME = 'Label') 
BEGIN 
ALTER TABLE ElevatorSpec ADD [Label] VARCHAR (50) NULL;
PRINT N'TABLE ElevatorSpec ADD [Label] VARCHAR (50)...';
END



 


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevTItem' AND COLUMN_NAME = 'LastUpdated') 
BEGIN 
ALTER TABLE ElevTItem ADD [LastUpdated]  DATETIME  NULL;
PRINT N'TABLE ElevTItem ADD [LastUpdated]  DATETIME...';
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevTItem' AND COLUMN_NAME = 'LastUpdateUser') 
BEGIN 
ALTER TABLE ElevTItem ADD [LastUpdateUser] VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevTItem' AND COLUMN_NAME = 'OrderNo') 
BEGIN 
ALTER TABLE ElevTItem ADD  [OrderNo]  INT   NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevTItem' AND COLUMN_NAME = 'PrimarySyncID') 
BEGIN 
ALTER TABLE ElevTItem ADD [PrimarySyncID] INT   NULL;
END 
    


 


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'DeviceID') 
BEGIN 
ALTER TABLE Emp ADD [DeviceID]  VARCHAR (100)   NULL;
PRINT N'TABLE Emp ADD [DeviceID]  VARCHAR (100)   NULL...';
END


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'TechnicianBio') 
BEGIN 
ALTER TABLE Emp ADD  [TechnicianBio]  IMAGE  NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'MileageRate') 
BEGIN 
ALTER TABLE Emp ADD [MileageRate]   NUMERIC (30, 2) NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'PDASerialNumber_1') 
BEGIN 
ALTER TABLE Emp ADD [PDASerialNumber_1] VARCHAR (100)   NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'Import1') 
BEGIN 
ALTER TABLE Emp ADD  [Import1] VARCHAR (100) NULL;
END


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'MSDeviceId') 
BEGIN 
ALTER TABLE Emp ADD  [MSDeviceId]  VARCHAR (100)   NULL;
END

      

 


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'CADExchange') 
BEGIN 
ALTER TABLE Estimate ADD [CADExchange]  NUMERIC (30, 2) NULL;
PRINT N'TABLE Estimate ADD [CADExchange]  NUMERIC (30, 2) NULL...';
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateNo') 
BEGIN 
ALTER TABLE Estimate ADD [EstimateNo]    INT  NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateDate') 
BEGIN 
ALTER TABLE Estimate ADD [EstimateDate]  DATETIME  NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateBillAddress') 
BEGIN 
ALTER TABLE Estimate ADD  [EstimateBillAddress] NVARCHAR (300)  NULL;
END

      
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateUserId ') 
BEGIN 
ALTER TABLE Estimate ADD [EstimateUserId]    INT   NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateAddress') 
BEGIN 
ALTER TABLE Estimate ADD [EstimateAddress]  NVARCHAR (255)  NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateEmail') 
BEGIN 
ALTER TABLE Estimate ADD  [EstimateEmail]   NVARCHAR (255)  NULL;
END
   

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'EstimateCell') 
BEGIN 
ALTER TABLE Estimate ADD [EstimateCell]    NVARCHAR (255) NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'Cont') 
BEGIN 
ALTER TABLE Estimate ADD  [Cont]   NUMERIC (30, 2)  NULL;
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'Opportunity') 
BEGIN 
ALTER TABLE Estimate ADD [Opportunity]   INT   NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'OHPer') 
BEGIN 
ALTER TABLE Estimate ADD  [OHPer]   NUMERIC (30, 2)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'MarkupPer') 
BEGIN 
ALTER TABLE Estimate ADD  [MarkupPer]   NUMERIC (30, 2)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'STaxName') 
BEGIN 
ALTER TABLE Estimate ADD [STaxName]      VARCHAR (100)  NULL;
END
      
         
                 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'CommissionPer') 
BEGIN 
ALTER TABLE Estimate ADD  [CommissionPer]   NUMERIC (30, 2)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'MarkupPer') 
BEGIN 
ALTER TABLE Estimate ADD  [MarkupPer]   NUMERIC (30, 2)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'MarkupVal') 
BEGIN 
ALTER TABLE Estimate ADD  [MarkupVal]     NUMERIC (30, 2)  NULL;
END     



IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'CommissionVal') 
BEGIN 
ALTER TABLE Estimate ADD  [CommissionVal]     NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'STaxVal') 
BEGIN 
ALTER TABLE Estimate ADD  [STaxVal]     NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'MatExp') 
BEGIN 
ALTER TABLE Estimate ADD  [MatExp]     NUMERIC (30, 2)  NULL;
END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'LabExp') 
BEGIN 
ALTER TABLE Estimate ADD  [LabExp]     NUMERIC (30, 2)  NULL;
END    
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'OtherExp') 
BEGIN 
ALTER TABLE Estimate ADD  [OtherExp]     NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'SubToalVal') 
BEGIN 
ALTER TABLE Estimate ADD  [SubToalVal]     NUMERIC (30, 2)  NULL;
END          


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'TotalCostVal') 
BEGIN 
ALTER TABLE Estimate ADD  [TotalCostVal]     NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Estimate'
AND COLUMN_NAME = 'PretaxTotalVal') 
BEGIN 
ALTER TABLE Estimate ADD  [PretaxTotalVal]     NUMERIC (30, 2)  NULL;
END   
      
   
      

 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'MMU') 
BEGIN 
ALTER TABLE EstimateI ADD  [MMU]  NUMERIC (30, 2)  NULL;
PRINT N'TABLE EstimateI ADD  [MMU]  NUMERIC (30, 2)  NULL...';
END   
      
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'MMUAmt') 
BEGIN 
ALTER TABLE EstimateI ADD  [MMUAmt]  NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'LMU') 
BEGIN 
ALTER TABLE EstimateI ADD  [LMU]  NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'LMUAmt') 
BEGIN 
ALTER TABLE EstimateI ADD  [LMUAmt]  NUMERIC (30, 2)  NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'LMod') 
BEGIN 
ALTER TABLE EstimateI ADD  [LMod]  NUMERIC (30, 2)  NULL;
END   
      

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'Vendor') 
BEGIN 
ALTER TABLE EstimateI ADD  [Vendor] VARCHAR (100)  NULL;
END   
      
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'Measure') 
BEGIN 
ALTER TABLE EstimateI ADD  [Measure]  SMALLINT   NULL;
END   
      

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'Type') 
BEGIN 
ALTER TABLE EstimateI ADD  [Type]  SMALLINT NULL;
END  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'LStax') 
BEGIN 
ALTER TABLE EstimateI ADD  [LStax] TINYINT    NULL;
END  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'MMod') 
BEGIN 
ALTER TABLE EstimateI ADD  [MMod]  NUMERIC (30, 2)  NULL;
END  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'EstimateI'
AND COLUMN_NAME = 'Currency') 
BEGIN 
ALTER TABLE EstimateI ADD  [Currency]  VARCHAR (10)  NULL;
END  
 
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'QBInvID') 
BEGIN 
ALTER TABLE Inv ADD  [QBInvID]  VARCHAR (100)  NULL;
PRINT N'Altering [dbo].[Inv]  ADD  [QBInvID]  VARCHAR (100)...';
END  

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Inv ADD  [LastUpdateDate]  DATETIME  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'QBAccountID') 
BEGIN 
ALTER TABLE Inv ADD  [QBAccountID]  VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Description2') 
BEGIN 
ALTER TABLE Inv ADD  [Description2]  VARCHAR (255)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Description3') 
BEGIN 
ALTER TABLE Inv ADD  [Description3]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Description4') 
BEGIN 
ALTER TABLE Inv ADD  [Description4]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Class') 
BEGIN 
ALTER TABLE Inv ADD  [Class]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Specification') 
BEGIN 
ALTER TABLE Inv ADD  [Specification]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Specification2') 
BEGIN 
ALTER TABLE Inv ADD  [Specification2]  VARCHAR (255)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Specification3') 
BEGIN 
ALTER TABLE Inv ADD  [Specification3]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Specification4') 
BEGIN 
ALTER TABLE Inv ADD  [Specification4]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Drawing') 
BEGIN 
ALTER TABLE Inv ADD  [Drawing]  VARCHAR (255)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Reference') 
BEGIN 
ALTER TABLE Inv ADD  [Reference]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Length') 
BEGIN 
ALTER TABLE Inv ADD  [Length]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Width') 
BEGIN 
ALTER TABLE Inv ADD  [Width]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Revision') 
BEGIN 
ALTER TABLE Inv ADD  [Revision]  VARCHAR (255)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Weight') 
BEGIN 
ALTER TABLE Inv ADD  [Weight]  VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'GLcogs') 
BEGIN 
ALTER TABLE Inv ADD  [GLcogs]  VARCHAR (255)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Available') 
BEGIN 
ALTER TABLE Inv ADD  [Available]  NUMERIC (30, 4)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'IssuedOpenJobs') 
BEGIN 
ALTER TABLE Inv ADD  [IssuedOpenJobs]  NUMERIC (30, 4)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'DateCreated') 
BEGIN 
ALTER TABLE Inv ADD  [DateCreated]  DATETIME   NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'LastRevisionDate') 
BEGIN 
ALTER TABLE Inv ADD  [LastRevisionDate]  DATETIME   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'InspectionRequired') 
BEGIN 
ALTER TABLE Inv ADD  [InspectionRequired]  BIT       DEFAULT ((0))   NULL;
END
     
          
       
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'CoCRequired') 
BEGIN 
ALTER TABLE Inv ADD  [CoCRequired]  BIT       DEFAULT ((0))   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'SerializationRequired') 
BEGIN 
ALTER TABLE Inv ADD  [SerializationRequired]  BIT       DEFAULT ((0))   NULL;
END             
             
     
             
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'OverIssueAllowance') 
BEGIN 
ALTER TABLE Inv ADD  [OverIssueAllowance]  BIT       DEFAULT ((0))   NULL;
END             
                 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'UnderIssueAllowance') 
BEGIN 
ALTER TABLE Inv ADD  [UnderIssueAllowance]  BIT       DEFAULT ((0))   NULL;
END             
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'DefaultReceivingLocation') 
BEGIN 
ALTER TABLE Inv ADD  [DefaultReceivingLocation]  BIT       DEFAULT ((0))   NULL;
END             
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'ShelfLife') 
BEGIN 
ALTER TABLE Inv ADD  [ShelfLife]  NUMERIC (30, 4)   NULL;
END             


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'InventoryTurns') 
BEGIN 
ALTER TABLE Inv ADD  [InventoryTurns]  NUMERIC (30, 4)   NULL;
END             
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'OHValue') 
BEGIN 
ALTER TABLE Inv ADD  [OHValue]  NUMERIC (30, 4)   NULL;
END             
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'MOQ') 
BEGIN 
ALTER TABLE Inv ADD  [MOQ]  NUMERIC (30, 4)   NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'OOValue') 
BEGIN 
ALTER TABLE Inv ADD  [OOValue]  NUMERIC (30, 4)   NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'MinInvQty') 
BEGIN 
ALTER TABLE Inv ADD  [MinInvQty]  NUMERIC (30, 4)   NULL;
END   

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'LastSalePrice') 
BEGIN 
ALTER TABLE Inv ADD  [LastSalePrice]  NUMERIC (30, 4)   NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'AnnualSalesQty') 
BEGIN 
ALTER TABLE Inv ADD  [AnnualSalesQty]  NUMERIC (30, 4)   NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'MaxInvQty') 
BEGIN 
ALTER TABLE Inv ADD  [MaxInvQty]  NUMERIC (30, 4)   NULL;
END   

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'GLPurchases') 
BEGIN 
ALTER TABLE Inv ADD  [GLPurchases]  VARCHAR (100)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'ABCClass') 
BEGIN 
ALTER TABLE Inv ADD  [ABCClass]  VARCHAR (100)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Commodity') 
BEGIN 
ALTER TABLE Inv ADD  [Commodity]  VARCHAR (100)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'MPN') 
BEGIN 
ALTER TABLE Inv ADD  [MPN]  VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'ApprovedManufacturer') 
BEGIN 
ALTER TABLE Inv ADD  [ApprovedManufacturer]  VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'ApprovedVendor') 
BEGIN 
ALTER TABLE Inv ADD  [ApprovedVendor]  VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'LastReceiptDate') 
BEGIN 
ALTER TABLE Inv ADD  [LastReceiptDate]  DATETIME     NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'EOLDate') 
BEGIN 
ALTER TABLE Inv ADD  [EOLDate]  DATETIME     NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'PODueDate') 
BEGIN 
ALTER TABLE Inv ADD  [PODueDate]  DATETIME     NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'EAU') 
BEGIN 
ALTER TABLE Inv ADD  [EAU]  DECIMAL (30, 4)     NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'WarrantyPeriod') 
BEGIN 
ALTER TABLE Inv ADD  [WarrantyPeriod]  INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'DateLastPurchase') 
BEGIN 
ALTER TABLE Inv ADD  [DateLastPurchase]  DATETIME     NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'DefaultInspectionLocation') 
BEGIN 
ALTER TABLE Inv ADD  [DefaultInspectionLocation] BIT   DEFAULT ((0)) NULL
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'AnnualSalesAmt') 
BEGIN 
ALTER TABLE Inv ADD  [AnnualSalesAmt] NUMERIC (30, 4)     NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'QtyAllocatedToSO') 
BEGIN 
ALTER TABLE Inv ADD  [QtyAllocatedToSO]  NUMERIC (30, 4)    NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'MaxDiscountPercentage') 
BEGIN 
ALTER TABLE Inv ADD  [MaxDiscountPercentage]  NUMERIC (30, 4)    NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'UnitCost') 
BEGIN 
ALTER TABLE Inv ADD  [UnitCost]  NUMERIC (30, 4)    NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'EOQ') 
BEGIN 
ALTER TABLE Inv ADD  [EOQ]  NUMERIC (30, 4)    NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Eco') 
BEGIN 
ALTER TABLE Inv ADD   [Eco]     VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'Height') 
BEGIN 
ALTER TABLE Inv ADD   [Height]     VARCHAR (255)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'GLSales') 
BEGIN 
ALTER TABLE Inv ADD   [GLSales] INT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Inv'
AND COLUMN_NAME = 'LeadTime') 
BEGIN 
ALTER TABLE Inv ADD   [LeadTime]     INT  NULL;
END
       
     
    
 


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner'  AND COLUMN_NAME = 'ProfileImage') 
BEGIN  ALTER TABLE Owner ADD  [ProfileImage] NVARCHAR(MAX) NULL ; 
END

	IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner'  AND COLUMN_NAME = 'CoverImage') 
BEGIN  ALTER TABLE Owner ADD  [CoverImage] NVARCHAR(MAX) NULL; END

	IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner'  AND COLUMN_NAME = 'Title') 
BEGIN  ALTER TABLE Owner ADD  [Title] NVARCHAR(100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Invoice'  AND COLUMN_NAME = 'AssignedTo') 
BEGIN  ALTER TABLE Invoice ADD AssignedTo int  NULL; END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Invoice'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Invoice ADD [LastUpdateDate] DATETIME  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Invoice'
AND COLUMN_NAME = 'DDate') 
BEGIN 
ALTER TABLE Invoice ADD [DDate] DATETIME  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Invoice'
AND COLUMN_NAME = 'GSTRate') 
BEGIN 
ALTER TABLE Invoice ADD [GSTRate]    NUMERIC (30, 2)  NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Invoice'
AND COLUMN_NAME = 'QBInvoiceID') 
BEGIN 
ALTER TABLE Invoice ADD [QBInvoiceID]  VARCHAR (100)  NULL;
END



 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'InvoiceI'
AND COLUMN_NAME = 'StaxAmt') 
BEGIN 
ALTER TABLE InvoiceI ADD [StaxAmt] NUMERIC (30, 4)  NULL;
PRINT N'Altering [dbo].[InvoiceI]  ADD [StaxAmt] NUMERIC (30, 4) ...';
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'InvoiceI'
AND COLUMN_NAME = 'JobOrg') 
BEGIN 
ALTER TABLE InvoiceI ADD [JobOrg]  INT   NULL;
END



 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'Custom21') 
BEGIN 
ALTER TABLE Job ADD [Custom21]  VARCHAR (75)   NULL;
PRINT N'Altering [dbo].[Job] ADD [Custom21]  VARCHAR (75)...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'Custom22') 
BEGIN 
ALTER TABLE Job ADD [Custom22]  VARCHAR (75)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'Custom23') 
BEGIN 
ALTER TABLE Job ADD [Custom23]  VARCHAR (75)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'Custom24') 
BEGIN 
ALTER TABLE Job ADD [Custom24]  VARCHAR (75)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'Custom25') 
BEGIN 
ALTER TABLE Job ADD [Custom25]  VARCHAR (75)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'SO') 
BEGIN 
ALTER TABLE Job ADD [SO]  VARCHAR (25)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'TaskCategory') 
BEGIN 
ALTER TABLE Job ADD [TaskCategory]  VARCHAR (75)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'LastProcessed') 
BEGIN 
ALTER TABLE Job ADD [LastProcessed]  VARCHAR (75)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'ProjCreationDate') 
BEGIN 
ALTER TABLE Job ADD [ProjCreationDate]  DATETIME   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'UpdatedDate') 
BEGIN 
ALTER TABLE Job ADD [UpdatedDate]  DATETIME   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'lastupdatedate') 
BEGIN 
ALTER TABLE Job ADD [lastupdatedate]  DATETIME   NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'RenewalNotes') 
BEGIN 
ALTER TABLE Job ADD [RenewalNotes]   VARCHAR (MAX)   NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'Rol') 
BEGIN 
ALTER TABLE Job ADD [Rol]  INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Job'
AND COLUMN_NAME = 'IsRenewalNotes') 
BEGIN 
ALTER TABLE Job ADD [IsRenewalNotes]  SMALLINT     NULL;
END

   
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'PWIP') 
BEGIN 
ALTER TABLE Job ADD [PWIP]  BIT   NULL;
END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'UnrecognizedRevenue') 
BEGIN 
ALTER TABLE Job ADD [UnrecognizedRevenue] INT  NULL;
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'UnrecognizedExpense') 
BEGIN 
ALTER TABLE Job ADD [UnrecognizedExpense] INT   NULL;
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'RetainageReceivable') 
BEGIN 
ALTER TABLE Job ADD [RetainageReceivable] INT  NULL;
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'ArchitectName') 
BEGIN 
ALTER TABLE Job ADD [ArchitectName]       NVARCHAR (50)   NULL;
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'ArchitectAdress') 
BEGIN 
ALTER TABLE Job ADD [ArchitectAdress]     NVARCHAR (200)  NULL;
END
  
       

 


IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'UnrecognizedRevenue') 
BEGIN 
ALTER TABLE JobT ADD [UnrecognizedRevenue] INT  NULL;
PRINT N'Altering [dbo].[JobT] ADD [UnrecognizedRevenue] INT  NULL...';
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'UnrecognizedExpense') 
BEGIN 
ALTER TABLE JobT ADD [UnrecognizedExpense] INT   NULL;
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'RetainageReceivable') 
BEGIN 
ALTER TABLE JobT ADD [RetainageReceivable] INT  NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobT'
AND COLUMN_NAME = 'AlertType') 
BEGIN 
ALTER TABLE JobT ADD [AlertType]  SMALLINT     NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobT'
AND COLUMN_NAME = 'TemplateRev') 
BEGIN 
ALTER TABLE JobT ADD [TemplateRev]  VARCHAR (150)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobT'
AND COLUMN_NAME = 'RevRemarks') 
BEGIN 
ALTER TABLE JobT ADD [RevRemarks]  VARCHAR (MAX)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobT'
AND COLUMN_NAME = 'AlertMgr') 
BEGIN 
ALTER TABLE JobT ADD [AlertMgr]  BIT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobT'
AND COLUMN_NAME = 'MilestoneMgr') 
BEGIN 
ALTER TABLE JobT ADD [MilestoneMgr]  BIT NULL;
END




 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobType'
AND COLUMN_NAME = 'IsDefault') 
BEGIN 
ALTER TABLE JobType ADD [IsDefault]   SMALLINT  NULL;
PRINT N'Altering [dbo].[JobType]  ADD [IsDefault]   SMALLINT  NULL...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobType'
AND COLUMN_NAME = 'QBJobTypeID') 
BEGIN 
ALTER TABLE JobType ADD [QBJobTypeID]    VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'JobType'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE JobType ADD  [LastUpdateDate] DATETIME NULL;
END




 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'CloseDate') 
BEGIN 
ALTER TABLE Lead ADD  [CloseDate] DATETIME NULL;
PRINT N'Altering [dbo].[Lead] ADD  [CloseDate] DATETIME NULL...';
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'CreateDate') 
BEGIN 
ALTER TABLE Lead ADD  [CreateDate] DATETIME NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Lead ADD  [LastUpdateDate] DATETIME NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'Product') 
BEGIN 
ALTER TABLE Lead ADD  [Product]   VARCHAR (50) NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'NextStep') 
BEGIN 
ALTER TABLE Lead ADD  [NextStep]   VARCHAR (50) NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'fuser') 
BEGIN 
ALTER TABLE Lead ADD  [fuser]   VARCHAR (50) NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'Desc') 
BEGIN 
ALTER TABLE Lead ADD  [Desc]   VARCHAR (MAX) NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'CreatedBy') 
BEGIN 
ALTER TABLE Lead ADD  [CreatedBy]   VARCHAR (50) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'Source') 
BEGIN 
ALTER TABLE Lead ADD  [Source]   VARCHAR (50) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'LastUpdatedBy') 
BEGIN 
ALTER TABLE Lead ADD  [LastUpdatedBy]   VARCHAR (50) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'AssignedToID') 
BEGIN 
ALTER TABLE Lead ADD  [AssignedToID]   INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'TicketID') 
BEGIN 
ALTER TABLE Lead ADD  [TicketID]   INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'Estimate') 
BEGIN 
ALTER TABLE Lead ADD  [Estimate]   INT NULL;
END
 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'EstimateID') 
BEGIN 
ALTER TABLE Lead ADD  [EstimateID]   INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'OpportunityStageID') 
BEGIN 
ALTER TABLE Lead ADD  [OpportunityStageID]   INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Lead'
AND COLUMN_NAME = 'Closed') 
BEGIN 
ALTER TABLE Lead ADD    [Closed]     SMALLINT NULL;
END
       
       
       
        
 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'QBLocID') 
BEGIN 
ALTER TABLE Loc ADD [QBLocID]    VARCHAR (100) NULL;
PRINT N'Altering [dbo].[Loc] ADD [QBLocID]    VARCHAR (100)...';
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'SageID') 
BEGIN 
ALTER TABLE Loc ADD [SageID]    VARCHAR (100) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'IMport1') 
BEGIN 
ALTER TABLE Loc ADD [IMport1]    VARCHAR (100) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'IMport2') 
BEGIN 
ALTER TABLE Loc ADD [IMport2]    VARCHAR (100) NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'CreatedBy') 
BEGIN 
ALTER TABLE Loc ADD [CreatedBy]    VARCHAR (25) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'Import2') 
BEGIN 
ALTER TABLE Loc ADD [Import2]    VARCHAR (100) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'RoleID') 
BEGIN 
ALTER TABLE Loc ADD [RoleID]    INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'HomeOwnerID') 
BEGIN 
ALTER TABLE Loc ADD [HomeOwnerID]    INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'PrimarySyncID') 
BEGIN 
ALTER TABLE Loc ADD [PrimarySyncID]    INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'siteid') 
BEGIN 
ALTER TABLE Loc ADD [siteid]    INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'GContractorID') 
BEGIN 
ALTER TABLE Loc ADD [GContractorID]    INT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'Terr2') 
BEGIN 
ALTER TABLE Loc ADD [Terr2]    INT NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'BillRate') 
BEGIN 
ALTER TABLE Loc ADD [BillRate]  NUMERIC (30, 2) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'RateOT') 
BEGIN 
ALTER TABLE Loc ADD [RateOT]  NUMERIC (30, 2) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'RateTravel') 
BEGIN 
ALTER TABLE Loc ADD [RateTravel]  NUMERIC (30, 2) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'RateMileage') 
BEGIN 
ALTER TABLE Loc ADD [RateMileage]  NUMERIC (30, 2) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'RateDT') 
BEGIN 
ALTER TABLE Loc ADD [RateDT]  NUMERIC (30, 2) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'DefaultTerms') 
BEGIN 
ALTER TABLE Loc ADD [DefaultTerms]  INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'AddressBackUp') 
BEGIN 
ALTER TABLE Loc ADD [AddressBackUp]  TEXT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'TimeStamp') 
BEGIN 
ALTER TABLE Loc ADD [TimeStamp]     ROWVERSION NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Loc'
AND COLUMN_NAME = 'RateNT') 
BEGIN 
ALTER TABLE Loc ADD [RateNT]  NUMERIC (30, 2) NULL;
END  

   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'LocType'
AND COLUMN_NAME = 'QBlocTypeID') 
BEGIN 
ALTER TABLE LocType ADD [QBlocTypeID]    VARCHAR (100) NULL;
PRINT N'Altering [dbo].[LocType] ADD [QBlocTypeID]    VARCHAR (100)...';
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'LocType'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE LocType ADD   [LastUpdateDate] DATETIME NULL;
END

 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'OType'
AND COLUMN_NAME = 'QBCustomerTypeID') 
BEGIN 
ALTER TABLE OType ADD [QBCustomerTypeID]    VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'OType'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE OType ADD [LastUpdateDate]   DATETIME  NULL;
PRINT N'Altering [dbo].[OType] ADD [LastUpdateDate]   DATETIME...';
END


 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'QBCustomerID') 
BEGIN 
ALTER TABLE Owner ADD [QBCustomerID]  VARCHAR (100) NULL;
PRINT N'Altering [dbo].[Owner] ADD [QBCustomerID]  VARCHAR (100)...';
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'msmuser') 
BEGIN 
ALTER TABLE Owner ADD [msmuser]  VARCHAR (100) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'msmpass') 
BEGIN 
ALTER TABLE Owner ADD [msmpass]  VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'SageID') 
BEGIN 
ALTER TABLE Owner ADD [SageID]  VARCHAR (100) NULL;
END     
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'OwnerID') 
BEGIN 
ALTER TABLE Owner ADD [OwnerID]  VARCHAR (100) NULL;
END     
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'ShutdownMessage') 
BEGIN 
ALTER TABLE Owner ADD [ShutdownMessage]  VARCHAR (100) NULL;
END      
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'RateOT') 
BEGIN 
ALTER TABLE Owner ADD [RateOT] NUMERIC (30, 2) NULL;
END     
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'RateNT') 
BEGIN 
ALTER TABLE Owner ADD [RateNT] NUMERIC (30, 2) NULL;
END             
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'RateDT') 
BEGIN 
ALTER TABLE Owner ADD [RateDT] NUMERIC (30, 2) NULL;
END 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'CPEquipment') 
BEGIN 
ALTER TABLE Owner ADD [CPEquipment] SMALLINT NULL;
END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'GroupbyWO') 
BEGIN 
ALTER TABLE Owner ADD [GroupbyWO] SMALLINT NULL;
END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'openticket') 
BEGIN 
ALTER TABLE Owner ADD [openticket] SMALLINT NULL;
END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'BillRate') 
BEGIN 
ALTER TABLE Owner ADD [BillRate] SMALLINT NULL;
END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'RateTravel') 
BEGIN 
ALTER TABLE Owner ADD [RateTravel] NUMERIC (30, 2) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'RateMileage') 
BEGIN 
ALTER TABLE Owner ADD [RateMileage] NUMERIC (30, 2) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'TimeStamp') 
BEGIN 
ALTER TABLE Owner ADD [TimeStamp] ROWVERSION NOT NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'Import1') 
BEGIN 
ALTER TABLE Owner ADD [Import1]  VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'CreatedBy') 
BEGIN 
ALTER TABLE Owner ADD [CreatedBy]  VARCHAR (100) NULL;
END
   
 
     
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'ShutdownAlert') 
BEGIN 
ALTER TABLE Owner ADD [ShutdownAlert]  VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'PrimarySyncID') 
BEGIN 
ALTER TABLE Owner ADD [PrimarySyncID] INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Owner'
AND COLUMN_NAME = 'clientid') 
BEGIN 
ALTER TABLE Owner ADD [clientid] INT NULL;
END
      
 


 


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Phone' AND COLUMN_NAME = 'AlertViaEmail') 
BEGIN 
ALTER TABLE Phone ADD [AlertViaEmail] VARCHAR (5) NULL;
PRINT N'Altering [dbo].[Phone] ADD [AlertViaEmail] VARCHAR (5)...';
END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Phone' AND COLUMN_NAME = 'EmailRecTestProp') 
BEGIN 
ALTER TABLE Phone ADD [EmailRecTestProp]   BIT      NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Phone'
AND COLUMN_NAME = 'AlertViaText') 
BEGIN 
ALTER TABLE Phone ADD [AlertViaText] VARCHAR (5) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Phone'
AND COLUMN_NAME = 'TextAddress') 
BEGIN 
ALTER TABLE Phone ADD [TextAddress] VARCHAR (1) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Phone'
AND COLUMN_NAME = 'EmailRecQuote') 
BEGIN 
ALTER TABLE Phone ADD  [EmailRecQuote] BIT   DEFAULT ((0)) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Phone'
AND COLUMN_NAME = 'EmailRecTicket') 
BEGIN 
ALTER TABLE Phone ADD [EmailRecTicket] BIT   DEFAULT ((0)) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Phone'
AND COLUMN_NAME = 'EmailRecPO') 
BEGIN 
ALTER TABLE Phone ADD  [EmailRecPO] BIT   DEFAULT ((0)) NULL;
END

    
  

 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PO'
AND COLUMN_NAME = 'ServicePoID') 
BEGIN 
ALTER TABLE PO ADD [ServicePoID]  INT NULL;
PRINT N'Altering [dbo].[PO] ADD [ServicePoID]  INT...';
END

 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PO'
AND COLUMN_NAME = 'CourrierAcct') 
BEGIN 
ALTER TABLE PO ADD [CourrierAcct] VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PO'
AND COLUMN_NAME = 'POReasonCode') 
BEGIN 
ALTER TABLE PO ADD [POReasonCode] VARCHAR (50) NULL;
END
    

 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'BalanceQuan') 
BEGIN 
ALTER TABLE POItem ADD [BalanceQuan]  NUMERIC (30, 2) NULL;
PRINT N'Altering [dbo].[POItem] ADD [BalanceQuan]  NUMERIC (30, 2)...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'Selected') 
BEGIN 
ALTER TABLE POItem ADD [Selected]  NUMERIC (30, 2) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'Balance') 
BEGIN 
ALTER TABLE POItem ADD [Balance]  NUMERIC (30, 2) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'WarehouseID') 
BEGIN 
ALTER TABLE POItem ADD [WarehouseID]  VARCHAR (5) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'SelectedQuan') 
BEGIN 
ALTER TABLE POItem ADD [SelectedQuan]  NUMERIC (30, 2) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'Due') 
BEGIN 
ALTER TABLE POItem ADD [Due]     DATETIME NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'POItem'
AND COLUMN_NAME = 'LocationID') 
BEGIN 
ALTER TABLE POItem ADD [LocationID] INT NULL;
END

     

   
           
 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Prospect'
AND COLUMN_NAME = 'CustomerName') 
BEGIN 
ALTER TABLE Prospect ADD [CustomerName]   VARCHAR (50) NULL;
PRINT N'Altering [dbo].[Prospect] ADD [CustomerName]   VARCHAR (50)...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Prospect'
AND COLUMN_NAME = 'Address') 
BEGIN 
ALTER TABLE Prospect ADD [Address]   VARCHAR (250) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Prospect'
AND COLUMN_NAME = 'City') 
BEGIN 
ALTER TABLE Prospect ADD [City]   VARCHAR (50) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Prospect'
AND COLUMN_NAME = 'Country') 
BEGIN 
ALTER TABLE Prospect ADD [Country]   VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1     FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'Prospect'       AND COLUMN_NAME = 'ReferralType') 
BEGIN 
ALTER TABLE Prospect ADD [ReferralType]   VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1       FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'Prospect'     AND COLUMN_NAME = 'LastUpdatedBy') 
BEGIN 
ALTER TABLE Prospect ADD [LastUpdatedBy]   VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1      FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'Prospect'     AND COLUMN_NAME = 'State') 
BEGIN 
ALTER TABLE Prospect ADD [State]   VARCHAR (5) NULL;
END

IF NOT EXISTS(SELECT 1       FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'Prospect'    AND COLUMN_NAME = 'Zip') 
BEGIN 
ALTER TABLE Prospect ADD [Zip]   VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS        WHERE  TABLE_NAME = 'Prospect'   AND COLUMN_NAME = 'Phone') 
BEGIN 
ALTER TABLE Prospect ADD [Phone]   VARCHAR (25) NULL;
END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'Prospect'      AND COLUMN_NAME = 'BillCountry') 
BEGIN 
ALTER TABLE Prospect ADD [BillCountry]   VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'Prospect'  AND COLUMN_NAME = 'CreateDate') 
BEGIN 
ALTER TABLE Prospect ADD [CreateDate]  DATETIME NULL;
END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'Prospect' AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Prospect ADD [LastUpdateDate] DATETIME NULL;
END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS       WHERE  TABLE_NAME = 'Prospect'       AND COLUMN_NAME = 'Referral') 
BEGIN 
ALTER TABLE Prospect ADD [Referral]   VARCHAR (50) NULL;
END

     
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'Prospect'    AND COLUMN_NAME = 'STax') 
BEGIN 
ALTER TABLE Prospect ADD [STax]   VARCHAR (50) NULL;
END
  
         
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'Prospect'      AND COLUMN_NAME = 'CreatedBy') 
BEGIN 
ALTER TABLE Prospect ADD CreatedBy  varchar(50)   NULL;
END 

 
 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'QBWageID') 
BEGIN 
ALTER TABLE PRWage ADD [QBWageID] VARCHAR (100) NULL;
PRINT N'Altering [dbo].[PRWage] ADD [QBWageID] VARCHAR (100)...';
END
   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE PRWage ADD [LastUpdateDate] DATETIME NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'QBAccountID') 
BEGIN 
ALTER TABLE PRWage ADD [QBAccountID] VARCHAR (100) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'RegGL') 
BEGIN 
ALTER TABLE PRWage ADD [RegGL] INT NULL;
END	  
	  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'OTGL') 
BEGIN 
ALTER TABLE PRWage ADD [OTGL] INT NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'NTGL') 
BEGIN 
ALTER TABLE PRWage ADD [NTGL] INT NULL;
END	  
	  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'DTGL') 
BEGIN 
ALTER TABLE PRWage ADD [DTGL] INT NULL;
END	  
	  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWage'
AND COLUMN_NAME = 'TTGL') 
BEGIN 
ALTER TABLE PRWage ADD [TTGL] INT NULL;
END	  
	    
      
    

 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'PRWageItem'
AND COLUMN_NAME = 'Sick') 
BEGIN 
ALTER TABLE PRWageItem ADD [Sick]  SMALLINT NULL;
PRINT N'Altering [dbo].[PRWageItem] ADD [Sick]  SMALLINT...';
END


 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'lat') 
BEGIN 
ALTER TABLE Rol ADD [lat]  VARCHAR (100)  NULL;
PRINT N'Altering [dbo].[Rol] ADD [lat]  VARCHAR (100)...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'lng') 
BEGIN 
ALTER TABLE Rol ADD [lng]  VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'fmseempid') 
BEGIN 
ALTER TABLE Rol ADD [fmseempid]  VARCHAR (100)  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'SyncPhone') 
BEGIN 
ALTER TABLE Rol ADD [SyncPhone]   INT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'SyncOwner') 
BEGIN 
ALTER TABLE Rol ADD [SyncOwner]   INT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'PrimarySyncID') 
BEGIN 
ALTER TABLE Rol ADD [PrimarySyncID]   INT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'fmseid') 
BEGIN 
ALTER TABLE Rol ADD [fmseid]   INT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'fmseaccountno') 
BEGIN 
ALTER TABLE Rol ADD [fmseaccountno]   INT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'coords') 
BEGIN 
ALTER TABLE Rol ADD [coords]   SMALLINT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE Rol ADD [LastUpdateDate]   DATETIME NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Rol'
AND COLUMN_NAME = 'AddressBackUp') 
BEGIN 
ALTER TABLE Rol ADD [AddressBackUp]   TEXT NULL;
END

     
       

 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'Route'
AND COLUMN_NAME = 'Color') 
BEGIN 
ALTER TABLE Route ADD [Color]  VARCHAR (100)  NULL;
PRINT N'Altering [dbo].[Route] ADD [Color]  VARCHAR (100)...';
END


 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'STax'
AND COLUMN_NAME = 'QBStaxID') 
BEGIN 
ALTER TABLE STax ADD [QBStaxID]  VARCHAR (100)  NULL;
PRINT N'Altering [dbo].[STax]  ADD [QBStaxID]  VARCHAR (100)...';
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'STax'
AND COLUMN_NAME = 'IsTaxable') 
BEGIN 
ALTER TABLE STax ADD [IsTaxable] BIT  NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'STax'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE STax ADD [LastUpdateDate] DATETIME  NULL;
END



 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'LastUpdateDate') 
BEGIN 
ALTER TABLE tblUser ADD   [LastUpdateDate] DATETIME NULL;
PRINT N'Altering [dbo].[tblUser] ADD  [LastUpdateDate] DATETIME ...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'UserType') 
BEGIN 
ALTER TABLE tblUser ADD [UserType]      VARCHAR (20) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'SchedulemodulePermission') 
BEGIN 
ALTER TABLE tblUser ADD [SchedulemodulePermission] CHAR(1) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MTimesheet') 
BEGIN 
ALTER TABLE tblUser ADD [MTimesheet] VARCHAR(6) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'ETimesheet') 
BEGIN 
ALTER TABLE tblUser ADD [ETimesheet] VARCHAR(6) NULL;
END


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'Lang') 
BEGIN 
ALTER TABLE tblUser ADD [Lang]      VARCHAR (25) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSMUser') 
BEGIN 
ALTER TABLE tblUser ADD [MSMUser]      VARCHAR (20) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS    WHERE  TABLE_NAME = 'tblUser'              AND COLUMN_NAME = 'MerchantInfoID') 
BEGIN 
ALTER TABLE tblUser ADD [MerchantInfoID]      VARCHAR (20) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS       WHERE  TABLE_NAME = 'tblUser'    AND COLUMN_NAME = 'MSMPass') 
BEGIN 
ALTER TABLE tblUser ADD [MSMPass]      VARCHAR (50) NULL;
END
IF NOT EXISTS(SELECT 1       FROM   INFORMATION_SCHEMA.COLUMNS  WHERE  TABLE_NAME = 'tblUser'    AND COLUMN_NAME = 'MassReview') 
BEGIN 
ALTER TABLE tblUser ADD [MassReview]   smallint  NULL;
END

  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'QBEmployeeID') 
BEGIN 
ALTER TABLE tblUser ADD [QBEmployeeID]      VARCHAR (50) NULL;
END

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'CustomerPayment') 
BEGIN 
ALTER TABLE tblUser ADD [CustomerPayment]      VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'Warehouse') 
BEGIN 
ALTER TABLE tblUser ADD [Warehouse]      VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'InvSetup') 
BEGIN 
ALTER TABLE tblUser ADD [InvSetup]      VARCHAR (100) NULL;
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'fmseempid') 
BEGIN 
ALTER TABLE tblUser ADD [fmseempid]      VARCHAR (100) NULL;
END       
     

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'DefaultWorker') 
BEGIN 
ALTER TABLE tblUser ADD [DefaultWorker]     SMALLINT NULL;
END  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSMEditWarehouse') 
BEGIN 
ALTER TABLE tblUser ADD [MSMEditWarehouse]     SMALLINT NULL;
END    

        
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'EmailAccount') 
BEGIN 
ALTER TABLE tblUser ADD [EmailAccount]     SMALLINT NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSMDeclineTicket') 
BEGIN 
ALTER TABLE tblUser ADD [MSMDeclineTicket]     SMALLINT NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSAddContact') 
BEGIN 
ALTER TABLE tblUser ADD [MSAddContact]     SMALLINT NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSEditContact') 
BEGIN 
ALTER TABLE tblUser ADD [MSEditContact]     SMALLINT NULL;
END   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSEditDispatch') 
BEGIN 
ALTER TABLE tblUser ADD [MSEditDispatch]     SMALLINT NULL;
END     

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'POApproveAmt') 
BEGIN 
ALTER TABLE tblUser ADD [POApproveAmt]     SMALLINT NULL;
END 

 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'MSViewContact') 
BEGIN 
ALTER TABLE tblUser ADD [MSViewContact]  DECIMAL (18, 2) NULL;
END       
      
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblUser'
AND COLUMN_NAME = 'fmsimportdate') 
BEGIN 
ALTER TABLE tblUser ADD [fmsimportdate]   DATETIME  NULL;
END       
      
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'    AND COLUMN_NAME = 'ProjectListPermission') 
BEGIN 
ALTER TABLE tblUser ADD [ProjectListPermission]   NCHAR (1)  NULL;
END       
      

      
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'FinancePermission') 
BEGIN 
ALTER TABLE tblUser ADD [FinancePermission]   NCHAR (1)  NULL;
END    
      
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'MilestonesPermission') 
BEGIN 
ALTER TABLE tblUser ADD [MilestonesPermission]   NCHAR (4)  NULL;
END    
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'tblUser'    AND COLUMN_NAME = 'DocumentPermission') 
BEGIN 
ALTER TABLE tblUser ADD [DocumentPermission]   NCHAR (4)  NULL;
END 
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS      WHERE  TABLE_NAME = 'tblUser'    AND COLUMN_NAME = 'ContactPermission') 
BEGIN 
ALTER TABLE tblUser ADD [ContactPermission]   NCHAR (4)  NULL;
END 
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS     WHERE  TABLE_NAME = 'tblUser'     AND COLUMN_NAME = 'ProjecttempPermission') 
BEGIN 
ALTER TABLE tblUser ADD [ProjecttempPermission]   NCHAR (4)  NULL;
END 
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'BOMPermission') 
BEGIN 
ALTER TABLE tblUser ADD [BOMPermission]   NCHAR (4)  NULL;
END 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'MSAuthorisedDeviceOnly') 
BEGIN 
ALTER TABLE tblUser ADD MSAuthorisedDeviceOnly   INT DEFAULT ((0))  NULL;
END 
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'WIPPermission') 
BEGIN 
ALTER TABLE tblUser ADD WIPPermission   NCHAR (6)  NULL;
END 
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS  WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'NotificationOnAddOpportunity') 
BEGIN 
ALTER TABLE tblUser ADD [NotificationOnAddOpportunity]   BIT  NULL;
END 
IF NOT EXISTS(SELECT 1    FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'    AND COLUMN_NAME = 'SalesAssigned') 
BEGIN 
ALTER TABLE tblUser ADD [SalesAssigned]  BIT  NULL;
END 
     
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'BillingmodulePermission') 
BEGIN 
ALTER TABLE tblUser ADD BillingmodulePermission char(1) ;
END 
           
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'PurchasingmodulePermission') 
BEGIN 
ALTER TABLE tblUser ADD PurchasingmodulePermission char(1) ;
END 
      
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblRole'   AND COLUMN_NAME = 'WIPPermission') 
BEGIN 
ALTER TABLE tblRole ADD WIPPermission   NCHAR (6)  NULL;
END   

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblRole'   AND COLUMN_NAME = 'CreditFlag') 
BEGIN 
ALTER TABLE tblRole ADD CreditFlag   NCHAR (4)  NULL;
END   

 

IF NOT EXISTS(SELECT 1   
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblWork'
AND COLUMN_NAME = 'hourlyrate') 
BEGIN 
ALTER TABLE tblWork ADD [hourlyrate] NUMERIC (30, 2)  NULL;
PRINT N'TABLE tblWork ADD [hourlyrate] NUMERIC (30, 2)...';
END
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'tblWork'
AND COLUMN_NAME = 'fmseid') 
BEGIN 
ALTER TABLE tblWork ADD [fmseid]  VARCHAR (50)  NULL;
END


 


IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'ManualInvoice') 
BEGIN 
ALTER TABLE TicketD ADD [ManualInvoice] VARCHAR (50) NULL;
PRINT N'TABLE TicketD ADD [ManualInvoice] VARCHAR (50)...';

END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'QBInvoiceID') 
BEGIN 
ALTER TABLE TicketD ADD [QBInvoiceID] VARCHAR (100) NULL;

END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'QBTimeTxnID') 
BEGIN 
ALTER TABLE TicketD ADD [QBTimeTxnID] VARCHAR (100) NULL;

END 

IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'QBServiceItem') 
BEGIN 
ALTER TABLE TicketD ADD [QBServiceItem] VARCHAR (50) NULL;

END 
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'QBPayrollItem') 
BEGIN 
ALTER TABLE TicketD ADD [QBPayrollItem] VARCHAR (100) NULL;

END 
  
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'CustomTick1') 
BEGIN 
ALTER TABLE TicketD ADD [CustomTick1] VARCHAR (50) NULL;

END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'CustomTick2') 
BEGIN 
ALTER TABLE TicketD ADD [CustomTick2] VARCHAR (50) NULL;

END 
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'CustomTick3') 
BEGIN 
ALTER TABLE TicketD ADD [CustomTick3] VARCHAR (50) NULL;

END 
   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'CustomTick4') 
BEGIN 
ALTER TABLE TicketD ADD [CustomTick4] VARCHAR (50) NULL;

END 
   
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'Import1') 
BEGIN 
ALTER TABLE TicketD ADD [Import1] VARCHAR (50) NULL;

END 
            
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'Import2') 
BEGIN 
ALTER TABLE TicketD ADD [Import2] VARCHAR (50) NULL;

END 
            
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'Import3') 
BEGIN 
ALTER TABLE TicketD ADD [Import3] VARCHAR (50) NULL;

END 
            
IF NOT EXISTS(SELECT 1
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_NAME = 'TicketD'
AND COLUMN_NAME = 'Import4') 
BEGIN 
ALTER TABLE TicketD ADD [Import4] VARCHAR (50) NULL;

END 
            
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'Import5')  BEGIN ALTER TABLE TicketD ADD [Import5] VARCHAR (50) NULL;END 
                  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'LastUpdateDate') BEGIN ALTER TABLE TicketD ADD [LastUpdateDate] DATETIME NULL; END 

IF NOT EXISTS(SELECT 1FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'TransferTime') BEGIN ALTER TABLE TicketD ADD [TransferTime] SMALLINT NULL; END 
                  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'TimesheetID')BEGIN ALTER TABLE TicketD ADD [TimesheetID] INT NULL; END  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'PrimarySyncID') BEGIN ALTER TABLE TicketD ADD [PrimarySyncID] INT NULL; END 

IF NOT EXISTS(SELECT 1FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'fmsimportdate') BEGIN ALTER TABLE TicketD ADD [fmsimportdate] DATETIME NULL; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'Recurring') BEGIN ALTER TABLE TicketD ADD [Recurring] DATETIME NULL; END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'PrevEquipLoc') BEGIN  ALTER TABLE TicketD ADD [PrevEquipLoc] INT NULL; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'Comments') BEGIN ALTER TABLE TicketD ADD [Comments] VARCHAR (1000) NULL; END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'FMSEtid') BEGIN ALTER TABLE TicketD ADD [FMSEtid] INT NULL; END   

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'HourlyRate') BEGIN ALTER TABLE TicketD ADD [HourlyRate] NUMERIC (30, 2) NULL;END  

IF NOT EXISTS(SELECT 1FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'CustomTick5')BEGIN ALTER TABLE TicketD ADD [CustomTick5] NUMERIC (30, 2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'AND COLUMN_NAME = 'break_time') BEGIN ALTER TABLE TicketD ADD [break_time] NUMERIC (30, 2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'JobCode')  BEGIN  ALTER TABLE TicketD ADD [JobCode]  VARCHAR (50) NULL; END  

 
IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD'  AND COLUMN_NAME = 'JobCode' )  BEGIN  ALTER TABLE TicketD alter column JobCode VARCHAR (50) NULL END
 

        
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'JobItemDesc')  BEGIN  ALTER TABLE TicketD ADD [JobItemDesc]  VARCHAR (255) NULL; END  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'PartsUsed') BEGIN  ALTER TABLE TicketD ADD [PartsUsed]  VARCHAR (100) NULL;END      
    
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'Comments')  BEGIN  ALTER TABLE TicketDPDA ADD [Comments]   VARCHAR (1000) NULL; PRINT N'TABLE TicketDPDA ADD [Comments]   VARCHAR (1000)...'; END
        
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'QBInvoiceID')  BEGIN  ALTER TABLE TicketDPDA ADD [QBInvoiceID]   VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'PartsUsed') BEGIN  ALTER TABLE TicketDPDA ADD [PartsUsed]   VARCHAR (100) NULL; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'Recurring') BEGIN ALTER TABLE TicketO ADD [Recurring] DATETIME  NULL;PRINT N'TABLE TicketO ADD [Recurring] DATETIME...';END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'EmailTime')  BEGIN  ALTER TABLE TicketO ADD [EmailTime] DATETIME  NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'QBServiceItem')  BEGIN  ALTER TABLE TicketO ADD [QBServiceItem] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'QBPayrollItem')  BEGIN  ALTER TABLE TicketO ADD [QBPayrollItem] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick1')  BEGIN  ALTER TABLE TicketO ADD [CustomTick1] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick2')  BEGIN ALTER TABLE TicketO ADD [CustomTick2] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick3')  BEGIN  ALTER TABLE TicketO ADD [CustomTick3] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick4')  BEGIN  ALTER TABLE TicketO ADD [CustomTick4] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick5')  BEGIN  ALTER TABLE TicketO ADD [CustomTick5] VARCHAR (100) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'JobCode')  BEGIN ALTER TABLE TicketO ADD [JobCode] VARCHAR (100) NULL;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'JobItemDesc')  BEGIN  ALTER TABLE TicketO ADD [JobItemDesc] VARCHAR (255) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'EmailNotified') BEGIN ALTER TABLE TicketO ADD [EmailNotified] SMALLINT NULL;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo'    AND COLUMN_NAME = 'CreatedBy') BEGIN ALTER TABLE ToDo ADD [CreatedBy]  VARCHAR (50)  NULL;PRINT N'TABLE ToDo ADD [CreatedBy]  VARCHAR (50)...';END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo'      AND COLUMN_NAME = 'LastUpdatedBy') BEGIN ALTER TABLE ToDo ADD [LastUpdatedBy]  VARCHAR (50)  NULL;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo'   AND COLUMN_NAME = 'CreateDate') BEGIN ALTER TABLE ToDo ADD [CreateDate]     DATETIME  NULL;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo'    AND COLUMN_NAME = 'LastUpdateDate') BEGIN ALTER TABLE ToDo ADD [LastUpdateDate]     DATETIME  NULL;END  
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Vendor'  AND COLUMN_NAME = 'QBVendorID')  BEGIN  ALTER TABLE Vendor ADD [QBVendorID] VARCHAR (100)  NULL; PRINT N'TABLE Vendor ADD [QBVendorID] VARCHAR (100) ...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Vendor'      AND COLUMN_NAME = 'intBox') BEGIN  ALTER TABLE Vendor ADD [intBox] TINYINT NULL; END
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Warehouse'     AND COLUMN_NAME = 'Multi')  BEGIN ALTER TABLE Warehouse ADD [Multi] BIT  NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Warehouse'   AND COLUMN_NAME = 'EN') BEGIN ALTER TABLE Warehouse ADD    [EN]    INT NULL;END        
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Branch'   AND COLUMN_NAME = 'DInvAcct') BEGIN ALTER TABLE [dbo].[Branch]   ADD [DInvAcct]  INT   NULL ;PRINT N'TABLE [dbo].[Branch]   ADD [DInvAcct]  INT...';END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Branch'   AND COLUMN_NAME = 'Longitude') BEGIN  ALTER TABLE [dbo].[Branch]   ADD  [Longitude] VARCHAR (100) NULL ;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Branch'   AND COLUMN_NAME = 'Latitude') BEGIN  ALTER TABLE [dbo].[Branch]   ADD [Latitude]  VARCHAR (100) NULL ;END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Branch'   AND COLUMN_NAME = 'Country') BEGIN  ALTER TABLE [dbo].[Branch]  ADD [Country]   VARCHAR (50)  NULL;END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BRCompany'   AND COLUMN_NAME = 'Status') BEGIN ALTER TABLE [dbo].[BRCompany]  ADD [Status] INT NULL;END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevT'   AND COLUMN_NAME = 'PrimarySyncID') BEGIN  ALTER TABLE [dbo].[ElevT]    ADD [PrimarySyncID] INT NULL;END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'IAdj'   AND COLUMN_NAME = 'WarehouseID') BEGIN ALTER TABLE [dbo].[IAdj]    ADD [WarehouseID] VARCHAR (5) NULL END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'IAdj'   AND COLUMN_NAME = 'LocationID') BEGIN ALTER TABLE [dbo].[IAdj]   ADD   [LocationID]  INT         NULL  ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'IAdj'   AND COLUMN_NAME = 'Type')   BEGIN ALTER TABLE [dbo].[IAdj] ADD  [Type]  INT  CONSTRAINT [DF_IAdj_Type] DEFAULT ((0)) NULL; END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTest'   AND COLUMN_NAME = 'Charge') BEGIN ALTER TABLE [dbo].[LoadTest]   ADD [Charge]     SMALLINT NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTest'   AND COLUMN_NAME = 'ThirdParty')  BEGIN  ALTER TABLE [dbo].[LoadTest]  ADD  [ThirdParty] SMALLINT NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'JobId')  BEGIN ALTER TABLE [dbo].[LoadTestItem]  ADD  [JobId] INT NULL; END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'Hours')  BEGIN ALTER TABLE [dbo].[LoadTestItem]   ADD  [Hours]  NUMERIC (32, 2) NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'AdditionalAmount') BEGIN ALTER TABLE [dbo].[LoadTestItem]  ADD  [AdditionalAmount] NUMERIC (32, 2) NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'ThirdPartyPhone') BEGIN ALTER TABLE [dbo].[LoadTestItem]   ADD    [ThirdPartyPhone]  VARCHAR (50)    NULL ;END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'ThirdPartyName')  BEGIN ALTER TABLE [dbo].[LoadTestItem]   ADD   [ThirdPartyName]   VARCHAR (50)    NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'OverrideAmount') BEGIN ALTER TABLE [dbo].[LoadTestItem]   ADD   [OverrideAmount]   NUMERIC (32, 2) NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'   AND COLUMN_NAME = 'Amount') BEGIN ALTER TABLE [dbo].[LoadTestItem]  ADD [Amount] NUMERIC (32, 2) NULL ; END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LType'   AND COLUMN_NAME = 'InvID') BEGIN ALTER TABLE [dbo].[LType]   ADD [InvID] INT NULL; END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'OpenAP'   AND COLUMN_NAME = 'IsSelected') BEGIN ALTER TABLE [dbo].[OpenAP]    ADD [IsSelected] BIT NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'OpenAR'   AND COLUMN_NAME = 'InvoiceID') BEGIN ALTER TABLE [dbo].[OpenAR]    ADD [InvoiceID] INT NULL; END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ'   AND COLUMN_NAME = 'ReceivePO') BEGIN ALTER TABLE [dbo].[PJ]    ADD [ReceivePO] INT NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivePO'   AND COLUMN_NAME = 'Batch') BEGIN ALTER TABLE [dbo].[ReceivePO]   ADD [Batch] INT NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem'   AND COLUMN_NAME = 'IsReceiveIssued') BEGIN ALTER TABLE [dbo].[RPOItem]  ADD [IsReceiveIssued] INT NULL;END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblEmailAccounts'   AND COLUMN_NAME = 'BccEmail') BEGIN ALTER TABLE [dbo].[tblEmailAccounts]  ADD [BccEmail] VARCHAR (100) NULL; END
  
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TestHistory'   AND COLUMN_NAME = 'TicketID')  BEGIN ALTER TABLE [dbo].[TestHistory]   ADD [TicketID]    INT           NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TestHistory'   AND COLUMN_NAME = 'TicketStatus')  BEGIN ALTER TABLE [dbo].[TestHistory]   ADD    [TicketStatus] NVARCHAR (50) NULL ; END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TestHistory'   AND COLUMN_NAME = 'NextDueDate')  BEGIN ALTER TABLE [dbo].[TestHistory]   ADD      [NextDueDate]  SMALLDATETIME NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TestHistory'   AND COLUMN_NAME = 'LastDueDate')  BEGIN ALTER TABLE [dbo].[TestHistory]   ADD    [LastDueDate]  SMALLDATETIME NULL; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketIPDA'   AND COLUMN_NAME = 'TypeID') BEGIN ALTER TABLE [dbo].[TicketIPDA]   ADD [TypeID]      INT          NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketIPDA'   AND COLUMN_NAME = 'WarehouseID') BEGIN ALTER TABLE [dbo].[TicketIPDA]   ADD   [WarehouseID] VARCHAR (50) NULL ; END
 
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketIPDA'   AND COLUMN_NAME = 'LocationID')  BEGIN ALTER TABLE [dbo].[TicketIPDA]  ADD   [LocationID]  INT          NULL ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketIPDA'   AND COLUMN_NAME = 'PhaseName')  BEGIN ALTER TABLE [dbo].[TicketIPDA]   ADD  [PhaseName]   VARCHAR (50) NULL; END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketI'   AND COLUMN_NAME = 'TypeID') BEGIN ALTER TABLE [dbo].[TicketI]   ADD [TypeID]    INT    NULL ; END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketI'   AND COLUMN_NAME = 'WarehouseID')  BEGIN ALTER TABLE [dbo].[TicketI]   ADD   [WarehouseID] VARCHAR (50) NULL ; END
 
IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketI'   AND COLUMN_NAME = 'LocationID') BEGIN ALTER TABLE [dbo].[TicketI]  ADD   [LocationID]  INT     NULL ;END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketI'   AND COLUMN_NAME = 'PhaseName') BEGIN ALTER TABLE [dbo].[TicketI]   ADD  [PhaseName]   VARCHAR (50) NULL; END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'log2'   AND COLUMN_NAME = 'CreatedStamp') BEGIN ALTER TABLE [dbo].log2   ADD  CreatedStamp  datetime   NULL; END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Trans'   AND COLUMN_NAME = 'TimeStamp') BEGIN ALTER TABLE [dbo].[Trans]  ADD [TimeStamp] ROWVERSION NOT NULL; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvParts'  AND COLUMN_NAME = 'ID') BEGIN  ALTER TABLE InvParts ADD [ID] [int] IDENTITY(1,1) NOT NULL ; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvParts'  AND COLUMN_NAME = 'VendorID') BEGIN  ALTER TABLE InvParts ADD  VendorID int NULL ; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvParts'  AND COLUMN_NAME = 'MPN') BEGIN  ALTER TABLE InvParts ADD  [MPN] [varchar](75) NULL ; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvParts'  AND COLUMN_NAME = 'Mfg') BEGIN  ALTER TABLE InvParts ADD  [Mfg] [varchar](75) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'InvParts'  AND COLUMN_NAME = 'MfgPrice') BEGIN  ALTER TABLE InvParts ADD  [MfgPrice] [numeric](30, 2) NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control'  AND COLUMN_NAME = 'consultAPI') BEGIN  ALTER TABLE Control ADD consultAPI smallint NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control'  AND COLUMN_NAME = 'ShutdownAlert') BEGIN  ALTER TABLE Control ADD ShutdownAlert smallint NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Stage'  AND COLUMN_NAME = 'Type') BEGIN  ALTER TABLE Stage ADD [Type]         NVARCHAR (50)  NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Stage'  AND COLUMN_NAME = 'Probability') BEGIN  ALTER TABLE Stage ADD [Probability]  NVARCHAR (50)  NULL; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Stage'  AND COLUMN_NAME = 'Chart Colors') BEGIN  ALTER TABLE Stage ADD [Chart Colors] NVARCHAR (50)  NULL; END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA'  AND COLUMN_NAME = 'CPhone') BEGIN  ALTER TABLE TicketDPDA ADD [CPhone]    VARCHAR (50)     NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem'  AND COLUMN_NAME = 'TypeID') BEGIN  ALTER TABLE POItem ADD [TypeID] INT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem'  AND COLUMN_NAME = 'OrderNo') BEGIN  ALTER TABLE JobTItem ADD [OrderNo] INT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EstimateI'  AND COLUMN_NAME = 'OrderNo') BEGIN  ALTER TABLE EstimateI ADD [OrderNo] INT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblEmailAccounts'  AND COLUMN_NAME = 'TakeASentEmailCopy') BEGIN  ALTER TABLE tblEmailAccounts ADD[TakeASentEmailCopy] BIT NULL END 
 
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'RPO') BEGIN  ALTER TABLE tblUser ADD[RPO] VARCHAR(6) NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'  AND COLUMN_NAME = 'ThirdParty') BEGIN  ALTER TABLE LoadTestItem ADD  [ThirdParty] SMALLINT NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'  AND COLUMN_NAME = 'Chargeable') BEGIN  ALTER TABLE LoadTestItem ADD  [Chargeable] SMALLINT NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'  AND COLUMN_NAME = 'TestDueBy')  BEGIN  ALTER TABLE LoadTestItem ADD  [TestDueBy] [tinyint] NULL END

-- ===================================================
-- Author:	<Harsh>
-- Date: <23-DEC-2018>
-- Description:	<Add New Status COLUMNS  in Route table> 
-- ===================================================
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'route'  AND COLUMN_NAME = 'Status') BEGIN  ALTER TABLE route 	ADD Status BIT NULL	CONSTRAINT Route_Status_default DEFAULT 1 WITH VALUES END

-- ===============================================================================
-- Author:	<Harsh>
-- Date: <24-DEC-2018>
-- Description:	<Add New  AccountPayablemodulePermission COLUMN in tblUser table> 
-- ===============================================================================
 
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'AccountPayablemodulePermission')  BEGIN  ALTER TABLE tblUser ADD [AccountPayablemodulePermission] CHAR (1) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TestSetupForms'  AND COLUMN_NAME = 'IsActive')  BEGIN  ALTER TABLE TestSetupForms ADD [IsActive] BIT NULL END

-- ===============================================================================
-- Author:	<SURESH>
-- Date: <09-Jan-2018>
-- Description:	<Add New  PaymentHistoryPermission COLUMN in tblUser table> 
-- ===============================================================================
 
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'PaymentHistoryPermission')  BEGIN  ALTER TABLE tblUser ADD [PaymentHistoryPermission] CHAR (4) NULL END

-- ===============================================================================
-- Author:	<SURESH>
-- Date: <13-Jan-2018>
-- Description:	<Add New  CustomermodulePermission COLUMN in tblUser table> 
-- ===============================================================================
 
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'CustomermodulePermission')  BEGIN  ALTER TABLE tblUser ADD [CustomermodulePermission] CHAR (1) NULL END

-- ===============================================================================
-- Author:	<Thomas>
-- Date: < >
-- Description:	<> 
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevShutDownLog'  AND COLUMN_NAME = 'longdesc') BEGIN  ALTER TABLE ElevShutDownLog ADD [longdesc] VARCHAR(max) NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev'  AND COLUMN_NAME = 'ShutdownReason') BEGIN  ALTER TABLE Elev ADD [ShutdownReason] VARCHAR(MAX) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev'  AND COLUMN_NAME = 'shut_down') BEGIN  ALTER TABLE Elev ADD shut_down BIT NULL DEFAULT 0 END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc'  AND COLUMN_NAME = 'Consult') BEGIN  ALTER TABLE Loc ADD Consult int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'CODt') BEGIN  ALTER TABLE tblUser ADD CODt DATETIME NULL END

IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'WIPHeader'  AND COLUMN_NAME = 'Terms' and data_type ='tinyint')  BEGIN  ALTER TABLE WIPHeader alter column Terms int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'CollectionNotes'  AND COLUMN_NAME = 'Notes') BEGIN  ALTER TABLE CollectionNotes ALTER   COLUMN [Notes] VARCHAR(MAX) NULL END

-- Author:	<SURESH>
-- Date: <24-Jan-2018>
-- Description:	<Add New  FinancialmodulePermission COLUMN in tblUser table> 
-- ===============================================================================
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'FinancialmodulePermission') BEGIN  ALTER TABLE tblUser ADD [FinancialmodulePermission] CHAR (1) NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE 	TABLE_NAME = 'Loc'  AND COLUMN_NAME = 'NoCustomerStatement') BEGIN   	ALTER TABLE Loc ADD NoCustomerStatement BIT NULL 	CONSTRAINT DF_Loc_NoCustomerStatement DEFAULT 0 WITH VALUES END

-- ===============================================================================
--Created By: Thurstan
--Modified On: 28 Jan 2019	
--Description: Add LeadEquip into table Prospect, EquipTItem, ElevTItem
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Prospect'  AND COLUMN_NAME = 'LeadEquip') BEGIN	ALTER TABLE Prospect ADD LeadEquip SMALLINT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipTItem'  AND COLUMN_NAME = 'LeadEquip') BEGIN 	ALTER TABLE EquipTItem ADD LeadEquip SMALLINT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevTItem'  AND COLUMN_NAME = 'LeadEquip') BEGIN	ALTER TABLE ElevTItem ADD LeadEquip SMALLINT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipTItem'  AND COLUMN_NAME = 'Notes') BEGIN	ALTER TABLE EquipTItem ADD Notes TEXT NULL END

-- Author:	<SURESH>
-- Date: <02-Feb-2019>
-- Description:	<Add New  RCmodulePermission COLUMN in tblUser table> 
-- ===============================================================================
 
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'ProcessRCPermission') BEGIN  ALTER TABLE tblUser ADD [ProcessRCPermission] VARCHAR(6) NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'RCmodulePermission') BEGIN  ALTER TABLE tblUser ADD [RCmodulePermission] CHAR NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'RCRenewEscalatePermission') BEGIN  ALTER TABLE tblUser ADD [RCRenewEscalatePermission] VARCHAR(4) NULL END

-- ===============================================================================
--Created By: Thomas
--Modified On: 13 Feb 2019	
--Description: Added planned column to manage the shutdown reason history
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevShutDownLog'  AND COLUMN_NAME = 'planned') BEGIN  ALTER TABLE ElevShutDownLog ADD [planned] BIT NULL END

-- ===============================================================================
--Created By: NK
--Modified On: 17 Feb 2019	
--Description:  Added missing coulmn for TEIG and Mitsubishi database 
-- ===============================================================================


IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control'  AND COLUMN_NAME = 'MSM') BEGIN  ALTER TABLE Control ADD [MSM]     VARCHAR (15)  NULL PRINT N'TABLE Control ADD [MSM]     VARCHAR (15)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Phone'  AND COLUMN_NAME = 'ShutdownAlert') BEGIN  ALTER TABLE Phone ADD [ShutdownAlert]   BIT   NULL PRINT N'TABLE Control ADD [ShutdownAlert]   BIT...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Phone'  AND COLUMN_NAME = 'EmailRecInvoice') BEGIN  ALTER TABLE Phone ADD [EmailRecInvoice] BIT  NULL PRINT N'TABLE Control ADD [EmailRecInvoice] BIT...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'job'  AND COLUMN_NAME = 'BOther') BEGIN  ALTER TABLE job ADD [BOther]   NUMERIC (30, 2) NULL PRINT N'TABLE Control ADD [BOther]   NUMERIC (30, 2)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control'  AND COLUMN_NAME = 'EndBalance') BEGIN  ALTER TABLE Control ADD EndBalance   NUMERIC (30, 2) NULL PRINT N'TABLE Control ADD EndBalance   NUMERIC (30, 2)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc'  AND COLUMN_NAME = 'EmailInvoice') BEGIN  ALTER TABLE loc ADD EmailInvoice   bit NULL PRINT N'TABLE Control ADD [MSM]     VARCHAR (15)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc'  AND COLUMN_NAME = 'PrintInvoice') BEGIN  ALTER TABLE loc ADD PrintInvoice   bit NULL PRINT N'TABLE loc ADD PrintInvoice   bit ...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'job'  AND COLUMN_NAME = 'OtherExp') BEGIN  ALTER TABLE job ADD OtherExp   NUMERIC (30, 2) NULL PRINT N'TABLE job ADD OtherExp   NUMERIC (30, 2)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc'  AND COLUMN_NAME = 'Prospect') BEGIN  ALTER TABLE loc ADD Prospect  int NULL PRINT N'TABLE loc ADD Prospect  int...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart'  AND COLUMN_NAME = 'AcctRoot') BEGIN  ALTER TABLE Chart ADD [AcctRoot]       VARCHAR (15)  NULL  PRINT N'TABLE Chart ADD [AcctRoot]  VARCHAR (15)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart'  AND COLUMN_NAME = 'Branch') BEGIN  ALTER TABLE Chart ADD [Branch]    TINYINT NULL  PRINT N'TABLE Chart ADD [Branch]    TINYINT...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart'  AND COLUMN_NAME = 'CostCenter') BEGIN  ALTER TABLE Chart ADD  [CostCenter]     SMALLINT  NULL  PRINT N'TABLE Chart ADD  [CostCenter]     SMALLINT ...'; END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItem'  AND COLUMN_NAME = 'Remarks') BEGIN  ALTER TABLE LoadTestItem ADD Remarks     ntext  NULL  PRINT N'TABLE LoadTestItem ADD Remarks     ntext...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ListConfig'  AND COLUMN_NAME = 'ItemName') BEGIN  ALTER TABLE ListConfig ADD ItemName    nvarchar(50) NULL  PRINT N'TABLE ListConfig ADD ItemName    nvarchar(50)...'; END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ListConfig'  AND COLUMN_NAME = 'ItemValue') BEGIN  ALTER TABLE ListConfig ADD  ItemValue     int  NULL  PRINT N'TABLE ListConfig ADD  ItemValue     int...'; END

-- ===============================================================================
--Created By: Thomas
--Modified On: 20 Feb 2019	
--Description:  ES-1088: Added columns Discounted and DiscountedNotes 
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate'  AND COLUMN_NAME = 'Discounted') BEGIN  ALTER TABLE Estimate ADD [Discounted] BIT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate'  AND COLUMN_NAME = 'DiscountedNotes') BEGIN  ALTER TABLE Estimate ADD [DiscountedNotes] NVARCHAR(MAX) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'DepositDetails'  AND COLUMN_NAME = 'TransID') BEGIN  ALTER TABLE DepositDetails ADD [TransID] INT NULL END

-- ===============================================================================
--Created By: NK
--Modified On: 28 Feb 2019	
--Description:  Added missing coulmn for LandMark database 
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM'  AND COLUMN_NAME = 'EstimateIId') BEGIN  ALTER TABLE BOM ADD EstimateIId INT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM'  AND COLUMN_NAME = 'MatItem')     BEGIN  ALTER TABLE BOM ADD MatItem INT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM'  AND COLUMN_NAME = 'LabItem')     BEGIN  ALTER TABLE BOM ADD LabItem INT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM'  AND COLUMN_NAME = 'LabRate')     BEGIN  ALTER TABLE BOM ADD LabRate NUMERIC (30, 2) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM'  AND COLUMN_NAME = 'SDate')       BEGIN  ALTER TABLE BOM ADD SDate DATETIME NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM'  AND COLUMN_NAME = 'Vendor')       BEGIN  ALTER TABLE BOM ADD [Vendor]   VARCHAR (MAX) NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Milestone'  AND COLUMN_NAME = 'EstimateIId') BEGIN  ALTER TABLE Milestone ADD EstimateIId INT NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticket_Task_Codes'  AND COLUMN_NAME = 'Category')  BEGIN  ALTER TABLE Ticket_Task_Codes ADD [Category] VARCHAR(100) NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticket_Task_Codes'  AND COLUMN_NAME = 'Type')  BEGIN  ALTER TABLE Ticket_Task_Codes ADD [Type] SMALLINT NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticket_Task_Codes'  AND COLUMN_NAME = 'job')  BEGIN  ALTER TABLE Ticket_Task_Codes ADD  [job] INT NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticket_Task_Codes'  AND COLUMN_NAME = 'username')  BEGIN  ALTER TABLE Ticket_Task_Codes ADD  [username] VARCHAR(50) NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticket_Task_Codes'  AND COLUMN_NAME = 'dateupdated')  BEGIN  ALTER TABLE Ticket_Task_Codes ADD  [dateupdated] DATETIME NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticket_Task_Codes'  AND COLUMN_NAME = 'default_code')  BEGIN  ALTER TABLE Ticket_Task_Codes ADD  [default_code] SMALLINT NULL END
    
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblPaymentHistory'  AND COLUMN_NAME = 'Routing')  BEGIN  ALTER TABLE tblPaymentHistory ADD  [Routing]     VARCHAR (10)  NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblPaymentHistory'  AND COLUMN_NAME = 'BankAccNo') BEGIN  ALTER TABLE tblPaymentHistory ADD  BankAccNo     VARCHAR (25)  NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblPaymentHistory'  AND COLUMN_NAME = 'NameAccHolder')  BEGIN  ALTER TABLE tblPaymentHistory ADD  NameAccHolder     VARCHAR (50)  NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblPaymentHistory'  AND COLUMN_NAME = 'FileName')  BEGIN  ALTER TABLE tblPaymentHistory ADD  FileName     VARCHAR (500)  NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblPaymentHistory'  AND COLUMN_NAME = 'PayType')  BEGIN  ALTER TABLE tblPaymentHistory ADD  PayType     CHAR (3)   NULL END
  
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblAlertContacts'  AND COLUMN_NAME = 'Email')  BEGIN  ALTER TABLE tblAlertContacts ADD  [Email]     BIT   NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblAlertContacts'  AND COLUMN_NAME = 'Text')  BEGIN  ALTER TABLE tblAlertContacts ADD  Text     BIT   NULL END

 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control'  AND COLUMN_NAME = 'ContactType')  BEGIN  ALTER TABLE Control ADD  [ContactType] int CONSTRAINT [DF_Control_ContactType] DEFAULT ((0)) NULL END
	   
 IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner'  AND COLUMN_NAME = 'CNotes')  BEGIN  ALTER TABLE Owner ADD  [CNotes]    VARCHAR (8000)    NULL END
  
  
 

-- ===============================================================================
--Created By: Thomas
--Modified On: 01 Mar 2019	
--Description:  ES-1085: Removed LeadEquip column in prospect (suggested by Thurstan)
-- ===============================================================================

IF EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Prospect'  AND COLUMN_NAME = 'LeadEquip') BEGIN  ALTER TABLE Prospect DROP COLUMN [LeadEquip] END

-- ===============================================================================
--Created By: Suresh
--Modified On: 02 Mar 2019	
--Description:  ES-970: added column in tblUser
-- ===============================================================================
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'RCSafteyTest') BEGIN ALTER TABLE tblUser ADD RCSafteyTest VARCHAR(6) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'SchedulemodulePermission') BEGIN ALTER TABLE tblUser ADD SchedulemodulePermission CHAR(1) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'MTimesheet') BEGIN ALTER TABLE tblUser ADD MTimesheet VARCHAR(6) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'ETimesheet') BEGIN ALTER TABLE tblUser ADD ETimesheet VARCHAR(6) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'MapR') BEGIN ALTER TABLE tblUser ADD MapR VARCHAR(6) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'RouteBuilder')BEGIN ALTER TABLE tblUser ADD RouteBuilder VARCHAR(6) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'MassTimesheetCheck') BEGIN ALTER TABLE tblUser ADD MassTimesheetCheck CHAR(1) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'Route') BEGIN ALTER TABLE tblUser ADD Route VARCHAR(6) ;END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'CreditHold') BEGIN ALTER TABLE tblUser ADD CreditHold VARCHAR(4) ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'CreditFlag') BEGIN ALTER TABLE tblUser ADD CreditFlag VARCHAR(4) ; END

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'Control'  AND COLUMN_NAME = 'CoCode') BEGIN ALTER TABLE Control ADD CoCode VARCHAR(100) ; END
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate'  AND COLUMN_NAME = 'GroupId')  BEGIN  ALTER TABLE Estimate ADD [GroupId] INT NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem'  AND COLUMN_NAME = 'GroupId')  BEGIN  ALTER TABLE JobTItem ADD [GroupId] INT NULL END
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------

-- ===============================================================================
--Created By: Thomas
--Modified On: 11 Mar 2019	
--Description:  ES-1085: Add column RolId to table tblEstimateGroup
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblEstimateGroup' AND COLUMN_NAME = 'RolId') BEGIN  ALTER TABLE tblEstimateGroup ADD RolId INT NULL END

-- ===============================================================================
--Created By: Van
--Modified On: 19 Mar 2019	
--Description:  ES-1085: Add column PeriodDate and RevisionDate to table WIPHeader
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'WIPHeader' AND COLUMN_NAME = 'PeriodDate') BEGIN  ALTER TABLE WIPHeader ADD PeriodDate DATETIME NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'WIPHeader' AND COLUMN_NAME = 'RevisionDate') BEGIN  ALTER TABLE WIPHeader ADD RevisionDate DATETIME NULL END

-- ===============================================================================
--Created By: Thomas
--Modified On: 21 Mar 2019	
--Description:  ES-1312: TEI - Project Template
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblCustomFields' AND COLUMN_NAME = 'IsAlert') BEGIN  ALTER TABLE tblCustomFields ADD IsAlert BIT NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblCustomFields' AND COLUMN_NAME = 'TeamMember') BEGIN  ALTER TABLE tblCustomFields ADD TeamMember VARCHAR(MAX) NULL END

-- ===============================================================================
--Created By: Thomas
--Modified On: 25 Mar 2019	
--Description:  ES-1312: TEI - Project Template
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblCustomFields' AND COLUMN_NAME = 'TeamMemberDisplay') BEGIN  ALTER TABLE tblCustomFields ADD TeamMemberDisplay VARCHAR(MAX) NULL END

-- ===============================================================================
--Created By: Thomas
--Modified On: 28 Mar 2019	
--Description:  ES-1312: TEI - Add/Edit Project screen with Custom Attributes
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblCustomJob' AND COLUMN_NAME = 'IsAlert') BEGIN  ALTER TABLE tblCustomJob ADD IsAlert BIT NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblCustomJob' AND COLUMN_NAME = 'TeamMember') BEGIN  ALTER TABLE tblCustomJob ADD TeamMember VARCHAR(MAX) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblCustomJob' AND COLUMN_NAME = 'TeamMemberDisplay') BEGIN  ALTER TABLE tblCustomJob ADD TeamMemberDisplay VARCHAR(MAX) NULL END







-- ===============================================================================
--Created By: NK
--Modified On: 30 Mar 2019	
--Description: Fixed TEIG Data Migration error,
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'Route') BEGIN  ALTER TABLE Elev ADD Route int NULL END
 
IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'idRolCustomContact' AND data_type ='int') BEGIN  ALTER TABLE TicketDPDA alter column idRolCustomContact int NULL END

IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'Type') BEGIN  ALTER TABLE Category alter column Type VARCHAR (50) NULL END

IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'OType' AND COLUMN_NAME = 'Type') BEGIN  ALTER TABLE OType alter column Type VARCHAR (50) NULL END

IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'CType' AND COLUMN_NAME = 'Type') BEGIN  ALTER TABLE CType alter column Type VARCHAR (50) NULL END

-- ===============================================================================
--Created By: Thomas
--Modified On: 16 Apr 2019	
--Description:  ES-1446: TEI - updating columns MarkupPer, OHPer, CommissionPer, ContPer of Estimate table
-- ===============================================================================

IF EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'MarkupPer') BEGIN  ALTER TABLE Estimate ALTER COLUMN MarkupPer numeric(30, 4) NULL END

IF EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'OHPer') BEGIN  ALTER TABLE Estimate ALTER COLUMN OHPer numeric(30, 4) NULL END

IF EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'CommissionPer') BEGIN  ALTER TABLE Estimate ALTER COLUMN CommissionPer numeric(30, 4) NULL END

IF EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Estimate' AND COLUMN_NAME = 'ContPer') BEGIN  ALTER TABLE Estimate ALTER COLUMN ContPer numeric(30, 4) NULL END

--Created By: Suresh
--Modified On: 30 April 2019	
--Description:  ES-1523: added column in tblUser
-- ===============================================================================
IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'SalesSetup') BEGIN ALTER TABLE tblUser ADD SalesSetup VARCHAR(6) ;END 

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'tblUser'  AND COLUMN_NAME = 'SalesManager') BEGIN ALTER TABLE tblUser ADD SalesManager CHAR(1) ;END 

--Created By: NK
--Modified On: 27 MAY 2019	
--Description:  ES-1523: added column Charge in ticketo

IF NOT EXISTS(SELECT 1  FROM   INFORMATION_SCHEMA.COLUMNS   WHERE  TABLE_NAME = 'ticketo'  AND COLUMN_NAME = 'Charge') BEGIN ALTER TABLE ticketo ADD [Charge] SMALLINT NOT NULL DEFAULT 0 ; END 
 
 -- ===============================================================================
--Created By: Thayer
--Modified On: 05 May 2019	
--Description:  ES-178 TEI - Division P&L - Comparative FS-Template" report
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM  INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'ComparativeReport' AND COLUMN_NAME = 'Departments') BEGIN ALTER TABLE ComparativeReport ADD Departments nvarchar(200) NULL END

-- Add IsDefault column
IF NOT EXISTS(SELECT 1 FROM  INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Dashboard' AND COLUMN_NAME = 'IsDefault') BEGIN  ALTER TABLE Dashboard ADD IsDefault bit NULL END

-- Add Condition column
IF NOT EXISTS(SELECT 1 FROM  INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'tblReports' AND COLUMN_NAME = 'Condition') BEGIN ALTER TABLE tblReports ADD Condition nvarchar(500) NULL END

-- Set default of SortOrder column in SubCat table
IF (SELECT COLUMN_DEFAULT
	FROM INFORMATION_SCHEMA.COLUMNS
	WHERE TABLE_NAME = 'SubCat' AND COLUMN_NAME = 'SortOrder') IS NULL
	BEGIN 
		ALTER TABLE SubCat ADD DEFAULT 0 FOR SortOrder
	END 
 
---Fixed Script Error 
DROP PROCEDURE IF EXISTS spcreateinvoice_fromimport
 

IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'DF_Log2_CreatedStamp') AND type in (N'U'))
BEGIN
ALTER TABLE [dbo].[Log2] DROP  CONSTRAINT [DF_Log2_CreatedStamp]  
END

 
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'DF_Log2_CreatedStamp') AND type in (N'U'))
BEGIN
BEGIN TRY	 
ALTER TABLE [dbo].[Log2] DROP  CONSTRAINT [DF_Log2_CreatedStamp]
ALTER TABLE [dbo].[Log2] ADD  CONSTRAINT [DF_Log2_CreatedStamp]  DEFAULT (getdate()) FOR [CreatedStamp]
END TRY
BEGIN CATCH
ALTER TABLE [dbo].[Log2] ADD  CONSTRAINT [DF_Log2_CreatedStamp]  DEFAULT (getdate()) FOR [CreatedStamp]
END CATCH 
END

 

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'log2'   AND COLUMN_NAME = 'fDate') BEGIN ALTER TABLE [dbo].log2   ADD  [fDate]  AS (dateadd(day,(0),datediff(day,(0),[CreatedStamp]))) ; END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'log2'   AND COLUMN_NAME = 'fTime') BEGIN ALTER TABLE [dbo].log2   ADD  [fTime]  AS (dateadd(day, -datediff(day,(0),[CreatedStamp]),[CreatedStamp])) ; END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'PONotification') BEGIN ALTER TABLE tblUser ADD PONotification char(1) NULL END

IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Paid'  AND COLUMN_NAME = 'fDesc' and data_type ='VARCHAR')  BEGIN  ALTER TABLE Paid ALTER COLUMN fDesc VARCHAR (8000)  NULL; END

IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner'  AND COLUMN_NAME = 'Type' and data_type ='VARCHAR')  BEGIN  ALTER TABLE [Owner] ALTER COLUMN Type VARCHAR (50)  NULL; END


----------- ES-1846 TEI - Inventory - Item Master - Add - Saving Error   --------------->

IF OBJECT_ID('dbo.[DF_INV]', 'D') IS NOT NULL 

ALTER TABLE INV ADD CONSTRAINT DF_INV DEFAULT GETDATE() FOR DateCreated

--------- Add Coulmn for Permission  ---------


IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'JobClose') BEGIN ALTER TABLE tblUser ADD JobClose varchar(6) NULL END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'InventoryModulePermission') BEGIN ALTER TABLE tblUser ADD InventoryModulePermission char(1) NULL END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'ProjectModulePermission') BEGIN ALTER TABLE tblUser ADD ProjectModulePermission char(1) NULL END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'JobCompletedPermission') BEGIN ALTER TABLE tblUser ADD JobCompletedPermission char(1) NULL END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser'   AND COLUMN_NAME = 'JobReopenPermission') BEGIN ALTER TABLE tblUser ADD JobReopenPermission char(1) NULL END

IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control'   AND COLUMN_NAME = 'MSCategoryPermission') BEGIN ALTER TABLE Control ADD MSCategoryPermission smallint NULL END


IF NOT EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JOB'   AND COLUMN_NAME = 'ReceivePO') BEGIN ALTER TABLE JOB ADD ReceivePO NUMERIC (30, 2) NULL END

---Ref :- ES-6922

 IF    EXISTS(SELECT 1   FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JOB'   AND COLUMN_NAME = 'ReceivePO' and DATA_TYPE='smallint') 
 BEGIN  
 ALTER TABLE JOB ALTER COLUMN ReceivePO NUMERIC (30, 2) NULL 
 END  

-- ===============================================================================
--Created By: Van
--Modified On: 19 Mar 2019	
--Description:  ES-1085: Add column PeriodDate and RevisionDate to table WIPHeader
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'RequestedBy') BEGIN  ALTER TABLE PO ADD RequestedBy VARCHAR(50) NULL END
-- ===============================================================================
--Created By: Azhar
--Modified On: 29 Aug 2019	
--Description:  ES-2303: Add column IfPaid to table PJ
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'IfPaid') BEGIN  ALTER TABLE PJ ADD IfPaid int NULL END

-- ===============================================================================
-- Created By: Thayer
-- Modified On: 06 Sep 2019	
-- Description: ES-2157 Comparative Balance Sheet report like the Income Statement
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ComparativeReport' AND COLUMN_NAME = 'States') BEGIN  ALTER TABLE ComparativeReport ADD States NVARCHAR(50) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'IsProjectManager') BEGIN  ALTER TABLE tblUser ADD IsProjectManager int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'IsAssignedProject') BEGIN  ALTER TABLE tblUser ADD IsAssignedProject int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'ProjectManagerUserID') BEGIN  ALTER TABLE Job ADD ProjectManagerUserID int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'AssignedProjectUserID') BEGIN  ALTER TABLE Job ADD AssignedProjectUserID int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'BusinessType') BEGIN  ALTER TABLE Loc ADD BusinessType int NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'CreditFlag') BEGIN  ALTER TABLE Loc ADD CreditFlag TINYINT NULL DEFAULT(0) END

IF EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'WIPHeader' AND COLUMN_NAME = 'SalesTax') BEGIN  ALTER TABLE WIPHeader ALTER COLUMN SalesTax numeric(30, 4) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Chart' AND COLUMN_NAME = 'Custom1') BEGIN ALTER TABLE Chart ADD Custom1 NVARCHAR(100) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Chart' AND COLUMN_NAME = 'Custom2') BEGIN ALTER TABLE Chart ADD Custom2 NVARCHAR(100) NULL END

 



-- ===============================================================================
-- Created By: NK
-- Modified On: 18 OCT 2019	
-- Description: Implementing Target Hours feature 
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'jobtitem' AND COLUMN_NAME = 'TargetHours') BEGIN ALTER TABLE jobtitem ADD TargetHours numeric(30, 2) NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Control' AND COLUMN_NAME = 'TargetHPermission') BEGIN ALTER TABLE control ADD TargetHPermission smallint NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Job' AND COLUMN_NAME = 'TargetHPermission') BEGIN ALTER TABLE job ADD TargetHPermission smallint NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'JobT' AND COLUMN_NAME = 'TargetHPermission') BEGIN ALTER TABLE JobT ADD TargetHPermission smallint NULL END

 

-- ===============================================================================
--Created By: Thomas
--Modified On: 01 Nov 2019	
--Description:  Add Department column for Opportunity
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Lead' AND COLUMN_NAME = 'Department') BEGIN ALTER TABLE Lead ADD Department INT NULL END

-- ===============================================================================
--Created By: NK
--Modified On: 01 Nov 2019	
--Description:  Add TimeCheckOut column for Time Check Out in TicketD table 
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'TimeCheckOut') BEGIN ALTER TABLE TicketD ADD TimeCheckOut DATETIME NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'TimeCheckOutFlag') BEGIN ALTER TABLE TicketD ADD TimeCheckOutFlag INTEGER NULL END

-- ===============================================================================
--Created By: Thomas
--Modified On: 19 Nov 2019	
--Description:  Add Status column for LType
--Note: Status = 0 or null --> Active, 1 --> Inactive
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'LType' AND COLUMN_NAME = 'Status') 
BEGIN 
	ALTER TABLE LType ADD [Status] SMALLINT NULL 
	--Note that: 0 or Null --> Active, 1 --> Inactive
	--UPDATE LType SET [Status] = 0 WHERE [Status] is null
END

 



  
 
 
-- ===============================================================================
--Created By: Azhar
--Modified On: 05 Nov 2019	
--Description:  ES-2390: Add column CD_Template to table tblUser
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'CD_Template') BEGIN  ALTER TABLE tblUser ADD CD_Template VARCHAR(50) NULL END

  


-- ===============================================================================
--Created By: Azhar
--Modified On: 24 Nov 2019	
--Description:  ES-2390: Add column CD_Template to table tblUser
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'IsSalesTaxAPBill') BEGIN  ALTER TABLE [Control] ADD IsSalesTaxAPBill Bit NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'IsUseTaxAPBill') BEGIN  ALTER TABLE [Control] ADD IsUseTaxAPBill Bit NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Vendor' AND COLUMN_NAME = 'STax') BEGIN  ALTER TABLE Vendor ADD STax Varchar(50) Null END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Vendor' AND COLUMN_NAME = 'UTax') BEGIN  ALTER TABLE Vendor ADD UTax Varchar(50) Null END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJItem' AND COLUMN_NAME = 'TaxType') BEGIN  ALTER TABLE PJItem ADD TaxType smallint NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'STax') BEGIN  ALTER TABLE PJRecurrI ADD STax bit NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'STaxName') BEGIN  ALTER TABLE PJRecurrI ADD STaxName varchar(50) NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'STaxRate') BEGIN  ALTER TABLE PJRecurrI ADD STaxRate numeric(30, 4) NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'STaxAmt') BEGIN  ALTER TABLE PJRecurrI ADD STaxAmt numeric(30, 4) NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'STaxGL') BEGIN  ALTER TABLE PJRecurrI ADD STaxGL int NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'GSTRate') BEGIN  ALTER TABLE PJRecurrI ADD GSTRate numeric(30, 4) NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'GSTTaxAmt') BEGIN  ALTER TABLE PJRecurrI ADD GSTTaxAmt numeric(30, 4) NULL END
  

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurrI' AND COLUMN_NAME = 'GSTTaxGL') BEGIN  ALTER TABLE PJRecurrI ADD GSTTaxGL int NULL END
  



-- ===============================================================================
--Created By: Thomas
--Modified On: 23 Dec 2019	
--Description:  ES-3150: Sales/Estimate&Project templates - add fields from Estimate screen
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'OHPer') BEGIN  ALTER TABLE JobT ADD OHPer NUMERIC(30, 4) NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'COMMSPer') BEGIN  ALTER TABLE JobT ADD COMMSPer NUMERIC(30, 4) NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'MARKUPPer') BEGIN  ALTER TABLE JobT ADD MARKUPPer NUMERIC(30, 4) NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobT' AND COLUMN_NAME = 'STaxName') BEGIN  ALTER TABLE JobT ADD STaxName VARCHAR(25) NULL END
  
-- ===============================================================================
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Category' AND COLUMN_NAME = 'Status') BEGIN ALTER TABLE Category ADD Status BIT    NULL DEFAULT(1) END 
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 30 Dec 2019	
--Description:  Applying password policy on user password
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'ApplyPasswordRules') BEGIN  ALTER TABLE [Control] ADD ApplyPasswordRules BIT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'ApplyPwRulesToFieldUser') BEGIN  ALTER TABLE [Control] ADD ApplyPwRulesToFieldUser BIT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'ApplyPwRulesToOfficeUser') BEGIN  ALTER TABLE [Control] ADD ApplyPwRulesToOfficeUser BIT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'ApplyPwRulesToCustomerUser') BEGIN  ALTER TABLE [Control] ADD ApplyPwRulesToCustomerUser BIT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'ApplyPwReset') BEGIN  ALTER TABLE [Control] ADD ApplyPwReset BIT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'PwResetDays') BEGIN  ALTER TABLE [Control] ADD [PwResetDays] INT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'EmailAdministrator') BEGIN  ALTER TABLE [Control] ADD [EmailAdministrator] VARCHAR (50) NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'PwResetting') BEGIN  ALTER TABLE [Control] ADD [PwResetting] SMALLINT NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'LastLoginDate') BEGIN  ALTER TABLE [tblUser] ADD [LastLoginDate] DATETIME NULL END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'LoginFailedAttempts') BEGIN  ALTER TABLE [tblUser] ADD [LoginFailedAttempts] INT null END
  
-- ===============================================================================
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'Assigned') BEGIN ALTER TABLE TicketD ADD Assigned INT NOT NULL DEFAULT 4 END 

 





-- ===============================================================================
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 14 Jan 2020	
--Description:  Applying password policy on user password
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'PwResetUserID') BEGIN  ALTER TABLE [Control] ADD [PwResetUserID] INT NULL END
  
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'EmailAdministrator') BEGIN  ALTER TABLE [Control] DROP COLUMN EmailAdministrator END
 
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'TicketVoidPermission') BEGIN ALTER TABLE tblUser ADD  [TicketVoidPermission] INT   DEFAULT 0 END 
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 20 Jan 2020	
--Description:  Storing 2 last password
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'Password1') BEGIN ALTER TABLE tblUser ADD  [Password1]  VARCHAR (50) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'Password2') BEGIN ALTER TABLE tblUser ADD  [Password2]  VARCHAR (50) NULL END 
 
-- ===============================================================================
--Created By: Azhar
--Modified On: 22 Jan 2020	
--Description:  ES-3274
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'STax') BEGIN ALTER TABLE PJ ADD  STax Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'STaxName') BEGIN ALTER TABLE PJ ADD  STaxName Varchar(50) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'STaxGL') BEGIN ALTER TABLE PJ ADD  STaxGL int NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'STaxRate') BEGIN ALTER TABLE PJ ADD  STaxRate Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'UTax') BEGIN ALTER TABLE PJ ADD  UTax Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'UTaxName') BEGIN ALTER TABLE PJ ADD  UTaxName Varchar(50) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'UTaxGL') BEGIN ALTER TABLE PJ ADD  UTaxGL int NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'UTaxRate') BEGIN ALTER TABLE PJ ADD  UTaxRate Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJ' AND COLUMN_NAME = 'STax') BEGIN ALTER TABLE PJ ADD  STax Decimal(10,4) NULL END 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'STax') BEGIN ALTER TABLE PJRecurr ADD  STax Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'STaxName') BEGIN ALTER TABLE PJRecurr ADD  STaxName Varchar(50) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'STaxGL') BEGIN ALTER TABLE PJRecurr ADD  STaxGL int NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'STaxRate') BEGIN ALTER TABLE PJRecurr ADD  STaxRate Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'UTax') BEGIN ALTER TABLE PJRecurr ADD  UTax Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'UTaxName') BEGIN ALTER TABLE PJRecurr ADD  UTaxName Varchar(50) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'UTaxGL') BEGIN ALTER TABLE PJRecurr ADD  UTaxGL int NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'UTaxRate') BEGIN ALTER TABLE PJRecurr ADD  UTaxRate Decimal(10,4) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PJRecurr' AND COLUMN_NAME = 'STax') BEGIN ALTER TABLE PJRecurr ADD  STax Decimal(10,4) NULL END   
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'Branch') BEGIN ALTER TABLE Chart ADD   [Branch]    TINYINT  NULL END 
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'CostCenter') BEGIN ALTER TABLE Chart ADD  [CostCenter]     SMALLINT        NULL END 
  
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'AcctRoot') BEGIN ALTER TABLE Chart ADD   [AcctRoot]       VARCHAR (15) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'QBAccountID') BEGIN ALTER TABLE Chart ADD   [QBAccountID]    VARCHAR (100) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'LastUpdateDate') BEGIN ALTER TABLE Chart ADD   [LastUpdateDate] DATETIME  NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Chart' AND COLUMN_NAME = 'DefaultNo') BEGIN ALTER TABLE Chart ADD   [DefaultNo]      VARCHAR (15)  NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'TimeCheckOut') BEGIN ALTER TABLE TicketDPDA ADD   TimeCheckOut DATETIME NULL END 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'TimeCheckOutFlag') BEGIN ALTER TABLE TicketDPDA ADD   TimeCheckOutFlag       INTEGER NULL  END 
 
 

-- ===============================================================================
--Created By: Thomas
--Modified On: 22 Jan 2020	
--Description:  Expire forgot password after update
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'ForgotPwRequest') BEGIN ALTER TABLE tblUser ADD  [ForgotPwRequest]  Bit NULL END 
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 11 Feb 2020	
--Description:  Update for Reset password by reset days
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'LastUpdatePasswordDate') BEGIN  ALTER TABLE [tblUser] ADD [LastUpdatePasswordDate] DATETIME NULL END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 13 Feb 2020	
--Description:  Add Phone and Email to Todo, Done tables
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo' AND COLUMN_NAME = 'Phone') BEGIN  ALTER TABLE [ToDo] ADD [Phone] VARCHAR (50) NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo' AND COLUMN_NAME = 'Email') BEGIN  ALTER TABLE [ToDo] ADD [Email]  VARCHAR (100) NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Done' AND COLUMN_NAME = 'Phone') BEGIN  ALTER TABLE [Done] ADD [Phone] VARCHAR (50) NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Done' AND COLUMN_NAME = 'Email') BEGIN  ALTER TABLE [Done] ADD [Email]  VARCHAR (100) NULL END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 18 Feb 2020	
--Description:  Applied Harden Password for Customer type user
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner' AND COLUMN_NAME = 'LastUpdatePasswordDate') BEGIN  ALTER TABLE [Owner] ADD [LastUpdatePasswordDate] DATETIME NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner' AND COLUMN_NAME = 'LoginFailedAttempts') BEGIN  ALTER TABLE [Owner] ADD [LoginFailedAttempts] INT null END
  
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner' AND COLUMN_NAME = 'ForgotPwRequest') BEGIN ALTER TABLE [Owner] ADD  [ForgotPwRequest]  Bit NULL END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner' AND COLUMN_NAME = 'Password1') BEGIN ALTER TABLE [Owner] ADD  [Password1]  VARCHAR (50) NULL END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner' AND COLUMN_NAME = 'Password2') BEGIN ALTER TABLE [Owner] ADD  [Password2]  VARCHAR (50) NULL END 
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 04 Mar 2020	
--Description:  Add Mat Tx. and LabTx. checkbox to project template 
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM' AND COLUMN_NAME = 'STax') BEGIN ALTER TABLE BOM ADD  [STax] TINYINT NULL END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'BOM' AND COLUMN_NAME = 'LStax') BEGIN ALTER TABLE BOM ADD  [LStax] TINYINT NULL END 
 



IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Type') BEGIN ALTER TABLE ProjectWIPDetail ADD Type [nvarchar](50) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'fDesc') BEGIN ALTER TABLE ProjectWIPDetail ADD fDesc [nvarchar](75) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Tag') BEGIN ALTER TABLE ProjectWIPDetail ADD Tag [nvarchar](100) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Status') BEGIN ALTER TABLE ProjectWIPDetail ADD Status [nvarchar](50) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'TotalBudgetedExpense') BEGIN ALTER TABLE ProjectWIPDetail ADD TotalBudgetedExpense [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'TotalEstimatedCost') BEGIN ALTER TABLE ProjectWIPDetail ADD TotalEstimatedCost [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'EstimatedProfit') BEGIN ALTER TABLE ProjectWIPDetail ADD EstimatedProfit [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'ContractCosts') BEGIN ALTER TABLE ProjectWIPDetail ADD ContractCosts [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'CostToComplete') BEGIN ALTER TABLE ProjectWIPDetail ADD CostToComplete [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'PercentageComplete') BEGIN ALTER TABLE ProjectWIPDetail ADD PercentageComplete [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'RevenuesEarned') BEGIN ALTER TABLE ProjectWIPDetail ADD RevenuesEarned [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'GrossProfit') BEGIN ALTER TABLE ProjectWIPDetail ADD GrossProfit [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'BilledToDate') BEGIN ALTER TABLE ProjectWIPDetail ADD BilledToDate [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'ToBeBilled') BEGIN ALTER TABLE ProjectWIPDetail ADD ToBeBilled [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'OpenARAmount') BEGIN ALTER TABLE ProjectWIPDetail ADD OpenARAmount [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'RetainageBilling') BEGIN ALTER TABLE ProjectWIPDetail ADD RetainageBilling [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Billings') BEGIN ALTER TABLE ProjectWIPDetail ADD Billings [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Earnings') BEGIN ALTER TABLE ProjectWIPDetail ADD Earnings [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPer') BEGIN ALTER TABLE ProjectWIPDetail ADD NPer [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPerLastMonth') BEGIN ALTER TABLE ProjectWIPDetail ADD NPerLastMonth [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPerLastYear') BEGIN ALTER TABLE ProjectWIPDetail ADD NPerLastYear [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPerLastMonthYear') BEGIN ALTER TABLE ProjectWIPDetail ADD NPerLastMonthYear [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'BillingContract') BEGIN ALTER TABLE ProjectWIPDetail ADD BillingContract [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'JobBorrow') BEGIN ALTER TABLE ProjectWIPDetail ADD JobBorrow [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'fDate') BEGIN ALTER TABLE ProjectWIPDetail ADD fDate [datetime] NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'CloseDate') BEGIN ALTER TABLE ProjectWIPDetail ADD CloseDate [datetime] NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'TotalBilling') BEGIN ALTER TABLE ProjectWIPDetail ADD TotalBilling [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Variance') BEGIN ALTER TABLE ProjectWIPDetail ADD Variance [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Original') BEGIN ALTER TABLE ProjectWIPDetail ADD Original [numeric](30, 2) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'IsUpdateRetainage') BEGIN ALTER TABLE ProjectWIPDetail ADD IsUpdateRetainage [bit] DEFAULT(0) NULL END
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'Department') BEGIN ALTER TABLE ProjectWIPDetail ADD Department INT NULL END

IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'PercentageComplete' AND NUMERIC_SCALE = 2) BEGIN ALTER TABLE ProjectWIPDetail ALTER COLUMN PercentageComplete [numeric](12, 6) NULL END
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPer' AND NUMERIC_SCALE = 2) BEGIN ALTER TABLE ProjectWIPDetail ALTER COLUMN NPer [numeric](12, 6) NULL END
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPerLastMonth' AND NUMERIC_SCALE = 2) BEGIN ALTER TABLE ProjectWIPDetail ALTER COLUMN NPerLastMonth [numeric](12, 6) NULL END
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPerLastYear' AND NUMERIC_SCALE = 2) BEGIN ALTER TABLE ProjectWIPDetail ALTER COLUMN NPerLastYear [numeric](12, 6) NULL END
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProjectWIPDetail' AND COLUMN_NAME = 'NPerLastMonthYear' AND NUMERIC_SCALE = 2) BEGIN ALTER TABLE ProjectWIPDetail ALTER COLUMN NPerLastMonthYear [numeric](12, 6) NULL END

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'SalesOrderNo') BEGIN ALTER TABLE PO ADD SalesOrderNo VARCHAR (50) NULL END





IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Owner'  AND COLUMN_NAME = 'ShutdownAlert' and data_type ='varchar')  BEGIN  ALTER TABLE Owner alter column ShutdownAlert smallint NULL END
 

-- ===============================================================================
--Created By: Thomas
--Modified On: 27 Aug 2020	
--Description:  ES-5253 Neoteric- Error on Saving task
-- ===============================================================================
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ToDo' AND COLUMN_NAME = 'keyword') 
BEGIN 
    ALTER TABLE ToDo ALTER COLUMN keyword VARCHAR (50)
END 
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Done' AND COLUMN_NAME = 'keyword') 
BEGIN 
    ALTER TABLE Done ALTER COLUMN keyword VARCHAR (50);
END 
 
-- ===============================================================================
--Created By: Van
--Modified On: 27 Aug 2020	
--Description: ES-5093:Project - Link Estimate, Changing on the TOP Corner on Project 

-- ===============================================================================
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'EstimateID') 
BEGIN 
	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'FirstLinkedEst') 
	BEGIN 
		EXEC sp_RENAME 'Job.EstimateID', 'FirstLinkedEst', 'COLUMN' 
	END
END 
ELSE
BEGIN
	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'FirstLinkedEst') 
	BEGIN 
		BEGIN  ALTER TABLE Job ADD [FirstLinkedEst] INT NULL END
	END 
END
 
-- ===============================================================================
--Created By: Van
--Modified On: 27 Aug 2020	
--Description:ES-5317:TEI- Allow to edit and delete the collection notes

-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'CollectionNotes'  AND  COLUMN_NAME = 'UpdatedDate')   BEGIN  ALTER TABLE CollectionNotes   ADD UpdatedDate DATETIME   NULL  END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'CollectionNotes'  AND  COLUMN_NAME = 'UpdatedBy')   BEGIN  ALTER TABLE CollectionNotes   ADD UpdatedBy VARCHAR(500)   NULL  END
 
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 01 Sep 2020	
--Description: 
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Planner' AND COLUMN_NAME = 'Type') 
BEGIN 
    ALTER TABLE Planner ADD [Type] VARCHAR(50) NULL;
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Planner' AND COLUMN_NAME = 'CreatedDt') 
BEGIN 
    ALTER TABLE Planner ADD CreatedDt Datetime NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Planner' AND COLUMN_NAME = 'UpdatedDt') 
BEGIN 
    ALTER TABLE Planner ADD UpdatedDt Datetime NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Planner' AND COLUMN_NAME = 'CreatedBy') 
BEGIN 
    ALTER TABLE Planner ADD CreatedBy Varchar(50) NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Planner' AND COLUMN_NAME = 'UpdatedBy') 
BEGIN 
    ALTER TABLE Planner ADD UpdatedBy Varchar(50) NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'RootVendorID') 
BEGIN 
    ALTER TABLE GanttTasks ADD [RootVendorID] [int] NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'RootVendorName') 
BEGIN 
    ALTER TABLE GanttTasks ADD [RootVendorName] [varchar](75) NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'ProjectName') 
BEGIN 
    ALTER TABLE GanttTasks ADD [ProjectName] [varchar](75) NULL
END 
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 04 Sep 2020	
--Description: ES-5343 User Role - Add/Edit Project Need to add the Supervisor dropdown under the Project Manager field
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'SupervisorUserID') 
BEGIN 
    ALTER TABLE Job ADD [SupervisorUserID]  INT NULL
END 
 
-- ===============================================================================
--Created By: Van
--Modified On: 07 Sep 2020	
--Description: ES-533: Test - Proposal tags to add to make available for proposals as tags S10
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipmentTestPricing' AND COLUMN_NAME = 'Remarks') 
BEGIN 
    ALTER TABLE EquipmentTestPricing ADD Remarks   [varchar](500) NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipmentTestPricing' AND COLUMN_NAME = 'DefaultHour') 
BEGIN 
    ALTER TABLE EquipmentTestPricing ADD DefaultHour  [numeric](30, 2) NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'LastRenew') 
BEGIN 
    ALTER TABLE Contract ADD [LastRenew] datetime NULL;
END 

 


-- ===============================================================================
--Created By: Van
--Modified On: 11 Sep 2020	
--Description: ES-5389: Safety Test - Setup/Test Pricing need to set the prices by year
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipmentTestPricing' AND COLUMN_NAME = 'PriceYear') 
BEGIN 
    ALTER TABLE EquipmentTestPricing ADD PriceYear  INT  NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EquipmentTestPricing' AND COLUMN_NAME = 'ThirdPartyRequired') 
BEGIN 
    ALTER TABLE EquipmentTestPricing ADD ThirdPartyRequired  bit NULL
END 
 
-- ===============================================================================
--Created By: Van
--Modified On: 11 Sep 2020	
--Description: ES-5406: Each proposal needs to be linked to a particular year
-- ===============================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalFormDetail' AND COLUMN_NAME = 'YearProposal') 
BEGIN 
    ALTER TABLE ProposalFormDetail ADD YearProposal  INT NULL 
END 
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalFormDetail' AND COLUMN_NAME = 'YearProposal') 
BEGIN 
    ALTER TABLE ProposalFormDetail ADD YearProposal  INT NULL 
END 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalFormDetail' AND COLUMN_NAME = 'YearProposal') 
BEGIN 
    ALTER TABLE ProposalFormDetail ADD YearProposal  INT NULL 
END 
 




-- ===============================================================================
--Created By: Thomas
--Modified On: 29 Sep 2020	
--Description: Gantt update
--================================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'CusActualHour') 
BEGIN 
    ALTER TABLE GanttTasks ADD [CusActualHour] [decimal](5, 2) NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'PlannerTaskID') 
BEGIN 
    ALTER TABLE GanttTasks ADD [PlannerTaskID] int NULL
END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'ItemRefID') 
BEGIN 
    ALTER TABLE GanttTasks ADD [ItemRefID] int NULL
END 
 
-- ===============================================================================
--Created By: Van
--Modified On: 30 Sep 2020	
--Description: ES-5543 Setup/TestType: add  checkbox "Test Ticket Covered"
--================================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TestTypeCover' AND COLUMN_NAME = 'TicketCovered') 
BEGIN 
    ALTER TABLE TestTypeCover ADD [TicketCovered] Bit NULL
END 

-- ===============================================================================
--Created By: Van
--Modified On: 02 Oct 2020	
--Description: TEI Test Proposal template changes and missing items
--================================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalForm' AND COLUMN_NAME = 'Chargable') 
BEGIN 
    ALTER TABLE ProposalForm ADD [Chargable] Bit NULL
END 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalFormDetail' AND COLUMN_NAME = 'Chargable') 
BEGIN 
    ALTER TABLE ProposalFormDetail ADD [Chargable] Bit NULL
END 





-- ===============================================================================
--Created By: Juily
--Modified On: 17 Sep 2020	
--Description: 
--================================================================================

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivedPayment' AND COLUMN_NAME = 'Status') 
BEGIN 
    ALTER TABLE ReceivedPayment ADD Status  SMALLINT NULL 
END 
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivedPayment' AND COLUMN_NAME = 'Owner') 
BEGIN 
    ALTER TABLE ReceivedPayment ADD Owner INT NULL 
END 
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Elev' AND COLUMN_NAME = 'AID') 
BEGIN 
    ALTER TABLE Elev ADD AID  UNIQUEIDENTIFIER NULL 
END 
 


IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'CompMedi') 
BEGIN 
    ALTER TABLE PRReg ADD [CompMedi] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'WMediOverTH') 
BEGIN 
    ALTER TABLE PRReg ADD  [WMediOverTH] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'Sick') 
BEGIN 
    ALTER TABLE PRReg ADD  [Sick] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'YSick') 
BEGIN 
    ALTER TABLE PRReg ADD  [YSick] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'WSick') 
BEGIN 
    ALTER TABLE PRReg ADD  [WSick] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HSick') 
BEGIN 
    ALTER TABLE PRReg ADD  [HSick] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HYSick') 
BEGIN 
    ALTER TABLE PRReg ADD  [HYSick] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HSickAccrued') 
BEGIN 
    ALTER TABLE PRReg ADD  [HSickAccrued] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HYSickAccrued') 
BEGIN 
    ALTER TABLE PRReg ADD  [HYSickAccrued] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HVacAccrued') 
BEGIN 
    ALTER TABLE PRReg ADD  [HVacAccrued] [numeric](30, 2)  NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HYVacAccrued') 
BEGIN 
    ALTER TABLE PRReg ADD  [HYVacAccrued] [numeric](30, 2)  NULL
END

 
-- ===============================================================================
--Created By: Van
--Modified On: 06 Oct 2020	
--Description: Testing - TEI classification change
--================================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ElevatorSpec' AND COLUMN_NAME = 'Status') 
BEGIN 
    ALTER TABLE ElevatorSpec ADD Status Bit NULL
END 

-- ===============================================================================
--Created By: Azhar
--Modified On: 06 Oct 2020	
--Description: Testing - Process Payroll change
--================================================================================
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'CompMedi' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN CompMedi [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'WMediOverTH' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN WMediOverTH [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'Sick' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN Sick [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'YSick' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN YSick [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'WSick' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN WSick [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HSick' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN HSick [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HYSick' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN HYSick [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HSickAccrued' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN HSickAccrued [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HYSickAccrued' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN HYSickAccrued [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HVacAccrued' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN HVacAccrued [numeric](30, 2) NULL  
END
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'PRReg' AND COLUMN_NAME = 'HYVacAccrued' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE PRReg ALTER COLUMN HYVacAccrued [numeric](30, 2) NULL  
END



 
-- ===============================================================================
--Created By: Thomas
--Modified On: 08 Oct 2020	
--Description:  
-- ===============================================================================
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'CusDuration') BEGIN ALTER TABLE GanttTasks ALTER COLUMN CusDuration float null END 
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'CusActualHour') BEGIN ALTER TABLE GanttTasks ALTER COLUMN CusActualHour float null END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem' AND COLUMN_NAME = 'GanttTaskID') BEGIN ALTER TABLE JobTItem ADD GanttTaskID INT NULL END 
 
-- ===============================================================================
--Created By: Van
--Modified On: 06 Oct 2020	
--Description: (ES-5574) AR Aging Summary by Location report - When we are paying the invoice through credit amount so it is not showing correct data on report
--================================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PaymentDetails' AND COLUMN_NAME = 'RefTranID') 
BEGIN 
    ALTER TABLE PaymentDetails ADD RefTranID INT NULL
END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 08 Oct 2020	
--Description:  
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GanttTasks' AND COLUMN_NAME = 'Dependency') BEGIN ALTER TABLE GanttTasks ADD Dependency varchar(1000) null END 
 
-- ===============================================================================
--Created By: Van
--Modified On: 23 Oct 2020	
--Description: Add TestTypeID column
--================================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalForm' AND COLUMN_NAME = 'TestTypeID') 
BEGIN 
    ALTER TABLE ProposalForm ADD TestTypeID INT NULL
END
-- ===============================================================================
--Created By: Thomas
--Modified On: 02 Nov 2020	
--Description: ES-5822 Midwest Live- Can not add opportunities
--================================================================================
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'fDesc') BEGIN  ALTER TABLE Lead ALTER COLUMN fDesc VARCHAR(255) NULL ; END 	
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'Address') BEGIN  ALTER TABLE Lead ALTER COLUMN Address VARCHAR(250) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Lead' AND COLUMN_NAME = 'Source') BEGIN  ALTER TABLE Lead ALTER COLUMN Source VARCHAR(70) NULL ; END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 02 Nov 2020	
--Description: ES-5823 Midwest-Live_Unable to convert Estimate to Project.
--================================================================================
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc' AND COLUMN_NAME = 'Maint') 
BEGIN 
    IF NOT EXISTS(select 1 from sys.default_constraints where name = 'DF_Loc_Maint')
	BEGIN
		ALTER TABLE loc ADD CONSTRAINT DF_Loc_Maint DEFAULT 0 FOR [Maint];
	END
END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc' AND COLUMN_NAME = 'GeoLock') 
BEGIN 
    IF NOT EXISTS(select 1 from sys.default_constraints where name = 'DF_Loc_GeoLock')
	BEGIN
		ALTER TABLE loc ADD CONSTRAINT DF_Loc_GeoLock DEFAULT 0 FOR [GeoLock];
	END
END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc' AND COLUMN_NAME = 'InUse') 
BEGIN 
    IF NOT EXISTS(select 1 from sys.default_constraints where name = 'DF_Loc_InUse')
	BEGIN
		ALTER TABLE loc ADD CONSTRAINT DF_Loc_InUse DEFAULT 0 FOR [InUse];
	END
END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'loc' AND COLUMN_NAME = 'Credit') 
BEGIN 
    IF NOT EXISTS(select 1 from sys.default_constraints where name = 'DF_Loc_Credit')
	BEGIN
		ALTER TABLE loc ADD CONSTRAINT DF_Loc_Credit DEFAULT 0 FOR [Credit];
	END
END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'EscLast') 
BEGIN 
    ALTER TABLE [Contract] ALTER COLUMN EscLast DateTime NULL ;
END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Tag') BEGIN  ALTER TABLE Loc ALTER COLUMN Tag VARCHAR(100) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'ID') BEGIN  ALTER TABLE Loc ALTER COLUMN ID VARCHAR(50) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Route') BEGIN  ALTER TABLE Loc ALTER COLUMN Route int NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Zone') BEGIN  ALTER TABLE Loc ALTER COLUMN Zone int NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Terr') BEGIN  ALTER TABLE Loc ALTER COLUMN Terr int NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'STax') BEGIN  ALTER TABLE Loc ALTER COLUMN [STax] Varchar(25) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Custom12') BEGIN  ALTER TABLE Loc ALTER COLUMN Custom12 Varchar(250) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Custom13') BEGIN  ALTER TABLE Loc ALTER COLUMN Custom13 Varchar(250) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Custom14') BEGIN  ALTER TABLE Loc ALTER COLUMN Custom14 Varchar(250) NULL ; END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Loc' AND COLUMN_NAME = 'Custom15') BEGIN  ALTER TABLE Loc ALTER COLUMN Custom15 Varchar(250) NULL ; END




 -- ===============================================================================
--Created By: Azhar
--Modified On: 21 Nov 2020	
--Description: TEI JE allow to post to revenue types
--================================================================================
 IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GLARecurI' AND COLUMN_NAME = 'TypeID') 
BEGIN 
    ALTER TABLE GLARecurI ADD TypeID int NULL
END
 




 
-- ===============================================================================
--Created By: Thomas
--Modified On: 20 Nov 2020	
--Description:  
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem' AND COLUMN_NAME = 'EstConvertId') BEGIN ALTER TABLE JobTItem ADD EstConvertId int null END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem' AND COLUMN_NAME = 'EstConvertLine') BEGIN ALTER TABLE JobTItem ADD EstConvertLine smallint null END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem_Log' AND COLUMN_NAME = 'GanttTaskID') BEGIN ALTER TABLE JobTItem_Log ADD GanttTaskID INT NULL END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem_Log' AND COLUMN_NAME = 'EstConvertId') BEGIN ALTER TABLE JobTItem_Log ADD EstConvertId int null END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobTItem_Log' AND COLUMN_NAME = 'EstConvertLine') BEGIN ALTER TABLE JobTItem_Log ADD EstConvertLine smallint null END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'fWork') 
BEGIN 
    ALTER TABLE LoadTestItemHistory ADD fWork INT NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'Who') 
BEGIN 
    ALTER TABLE LoadTestItemHistory ADD Who VARCHAR(100) NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'IsDefaultTest') 
BEGIN 
    ALTER TABLE LoadTestItemHistory ADD IsDefaultTest INT 
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblTestCustomFieldsValue' AND COLUMN_NAME = 'TestYear') 
BEGIN 
    ALTER TABLE tblTestCustomFieldsValue ADD TestYear INT NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'isTestDefault') 
BEGIN 
    ALTER TABLE LoadTestItemHistory ADD isTestDefault INT NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemSchedule' AND COLUMN_NAME = 'TicketID') 
BEGIN 
    ALTER TABLE LoadTestItemSchedule ADD TicketID INT NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemSchedule' AND COLUMN_NAME = 'TicketStatus') 
BEGIN 
    ALTER TABLE LoadTestItemSchedule ADD TicketStatus INT NULL
END
--================================================================================
 -- ===============================================================================
--Created By: Azhar
--Modified On: 04 Dec 2020	
--Description: ES-5307 TEI - JE flag reversed entries and link back to original
--================================================================================
 IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'GLA' AND COLUMN_NAME = 'OriginalJE') 
BEGIN 
    ALTER TABLE GLA ADD OriginalJE int NULL
END
 
 -- ===============================================================================
--Created By: Azhar
--Modified On: 08 Dec 2020	
--Description: ES-6076 Bank Reconcile_Need to Save Reconciled Transaction
--================================================================================
IF (NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.TABLES     WHERE TABLE_TYPE='BASE TABLE'     AND TABLE_NAME='BankRecon'))
    BEGIN
	CREATE TABLE [dbo].[BankRecon](
	[ID] [int] IDENTITY (1,1) NOT NULL PRIMARY KEY,
	[Bank] [int] NULL,
	[Begningbalance] NUMERIC(30,2),
	[Endbalance] numeric(30,2),  
	[ReconDate] datetime,  
	[ServiceChrg] numeric(30,2) NULL,  
	[ServiceAcct] int NULl,  
	[ServiceDate] datetime  null,  
	[InterestChrg] numeric(30,2) NULL,  
	[InterestAcct] int null,  
	[InterestDate] datetime null,  
	[StatementDate] datetime
) 
 END 
 
 IF (NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.TABLES     WHERE TABLE_TYPE='BASE TABLE'     AND TABLE_NAME='BankReconI'))
    BEGIN
	CREATE TABLE [dbo].[BankReconI](
	[ID] [int] IDENTITY (1,1) NOT NULL,
	[ReconID] [int] NULL,
	[TRID] [int] NULL,
	[fDate] [datetime] NULL,
	[Type] [varchar](10) NULL,
	[Ref] [varchar](30) NULL,
	[Amount] [numeric](30, 2) NULL,
	[Batch] [int] NULL,
	[TypeNum] [int] NULL,
	[Selected] [bit] NULL
) 
 END 
  
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LType' AND COLUMN_NAME = 'Route')      BEGIN ALTER TABLE LType ALTER COLUMN Route       VARCHAR (1000) null END 
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LType' AND COLUMN_NAME = 'Department') BEGIN ALTER TABLE LType ALTER COLUMN Department nvarchar (1000) null END 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ProposalForm' AND COLUMN_NAME = 'SendMailStatus') 
BEGIN 
     ALTER TABLE ProposalForm ADD SendMailStatus INT NULL
END
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'IsActive') 
BEGIN 
    ALTER TABLE LoadTestItemHistory ADD IsActive INT 
END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 16 Dec 2020	
--Description:  
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Milestone' AND COLUMN_NAME = 'ChangeOrder') BEGIN ALTER TABLE Milestone ADD ChangeOrder TINYINT NULL END
 
-- ===============================================================================
--Created By: Azhar
--Modified On: 24 Dec 2020	
--Description:  
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'ForceClose') BEGIN ALTER TABLE PoItem ADD ForceClose int NOT NULL DEFAULT(0) END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 23 Dec 2020	
--Description:  
-- ===============================================================================
IF EXISTS(SELECT 1 FROM sys.indexes WHERE NAME = 'IX_POItem_TicketPO' AND object_id = OBJECT_ID('POItem')) BEGIN DROP INDEX [IX_POItem_TicketPO] ON [dbo].[POItem] END

IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'Quan') BEGIN ALTER TABLE RPOItem ALTER COLUMN Quan numeric(30,4) null END 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'Quan') BEGIN ALTER TABLE POItem ALTER COLUMN Quan numeric(30,4) null END 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'SelectedQuan') BEGIN ALTER TABLE POItem ALTER COLUMN SelectedQuan numeric(30,4) null END 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'BalanceQuan') BEGIN ALTER TABLE POItem ALTER COLUMN BalanceQuan numeric(30,4) null END 

IF NOT EXISTS(SELECT 1 FROM sys.indexes WHERE NAME = 'IX_POItem_TicketPO' AND object_id = OBJECT_ID('POItem'))
    CREATE NONCLUSTERED INDEX [IX_POItem_TicketPO] ON [dbo].[POItem]
    (
	    [Quan] ASC
    )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF,  DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 29 Dec 2020	
--Description:  
-- ===============================================================================
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'Stage') BEGIN ALTER TABLE Job ADD Stage INT NULL END
 -- ===============================================================================
--Created By: NK
--Modified On: 31 Dec 2020	
--Description:  
-- ===============================================================================
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'MapDataNew' AND COLUMN_NAME = 'timeStampType') BEGIN ALTER TABLE MapDataNew ADD timeStampType INT NULL END
 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'MapDataNew' AND COLUMN_NAME = 'category') BEGIN ALTER TABLE MapDataNew ADD category nvarchar(100) NULL END
 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'MapDataNew' AND COLUMN_NAME = 'ticketid') BEGIN ALTER TABLE MapDataNew ADD ticketid int NULL END
 
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'MapDataNew' AND COLUMN_NAME = 'locname') BEGIN ALTER TABLE MapDataNew ADD locname nvarchar(100) NULL END
 

 

-- ===============================================================================
--Created By: Thomas
--Modified On: 29 Dec 2020	
--Description:  
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'JobType' AND COLUMN_NAME = 'StageID') BEGIN ALTER TABLE JobType ADD [StageID] INT NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblTestCustomFields' AND COLUMN_NAME = 'UseFormula') BEGIN ALTER TABLE tblTestCustomFields ADD UseFormula Bit NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblTestCustomFields' AND COLUMN_NAME = 'Formula') BEGIN ALTER TABLE tblTestCustomFields ADD Formula VARCHAR(500) NULL END
 
-- ===============================================================================
--Created By: Van
--Modified On: 22 Jan 2021	
--Description:  
-- ===============================================================================

IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'Worker') BEGIN ALTER TABLE LoadTestItemHistory ALTER COLUMN [Worker] VARCHAR (Max) END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'Who') BEGIN ALTER TABLE LoadTestItemHistory ALTER COLUMN [Who] VARCHAR (Max) END
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'LoadTestItemHistory' AND COLUMN_NAME = 'Schedule') BEGIN ALTER TABLE LoadTestItemHistory ALTER COLUMN [Schedule] VARCHAR (Max) END

 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS  WHERE  TABLE_NAME = 'Contract' AND COLUMN_NAME = 'OriginalContract') BEGIN ALTER TABLE Contract ADD  OriginalContract DATETIME   NULL;END


 
-- ===============================================================================
--Created By: Thomas
--Modified On: 29 Jan 2021	
--Description:  ES-6458 Port City - Notes & Attachments (Leads and Project Modules)
-- ===============================================================================
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Documents' AND COLUMN_NAME = 'Body') BEGIN ALTER TABLE Documents ALTER COLUMN Body VARCHAR(500)  NULL END 
 
IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Rol' AND COLUMN_NAME = 'Name') BEGIN ALTER TABLE Rol ALTER COLUMN [Name] VARCHAR (500) END
 
-- ===============================================================================
--Created By: Azhar
--Modified On: 05 Feb 2021
--Description:  
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Emp' AND COLUMN_NAME = 'Geocode') BEGIN ALTER TABLE Emp ADD Geocode varchar(50) NULL DEFAULT(0) END
 
-- ===============================================================================
-- ===============================================================================
--Created By: Azhar
--Modified On: 12 Feb 2021
--Description:  ES-6581 Brock - Inventory Module Issues
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Commodity' AND COLUMN_NAME = 'IsDeleted') BEGIN     ALTER TABLE Commodity ADD IsDeleted Bit NOT NULL  DEFAULT (0) END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Commodity' AND COLUMN_NAME = 'CredtedOn') BEGIN 
    ALTER TABLE Commodity ADD CredtedOn Datetime NOT NULL  DEFAULT (GETDATE()) END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Commodity' AND COLUMN_NAME = 'UpdatedOn') BEGIN 
    ALTER TABLE Commodity ADD UpdatedOn Datetime NOT NULL  DEFAULT (GETDATE()) END
 
IF NOT EXISTS(SELECT 1 FROM UnitOfMeasure WHERE  UnitOfMeasureDesc = 'Liters') BEGIN 
    INSERT INTO UnitOfMeasure (UnitOfMeasureCode,UnitOfMeasureDesc) VALUES ('LT','Liters') END
 
IF NOT EXISTS(SELECT 1 FROM UnitOfMeasure WHERE  UnitOfMeasureDesc = 'Mililiters') BEGIN 
    INSERT INTO UnitOfMeasure (UnitOfMeasureCode,UnitOfMeasureDesc) VALUES ('ML','Mililiters') END
 
IF NOT EXISTS(SELECT 1 FROM UnitOfMeasure WHERE  UnitOfMeasureDesc = 'Gallon') BEGIN 
    INSERT INTO UnitOfMeasure (UnitOfMeasureCode,UnitOfMeasureDesc) VALUES ('GL','Gallon') END
  
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'fBy' and CHARACTER_MAXIMUM_LENGTH =10) 
BEGIN 
	ALTER TABLE TicketDPDA ALTER COLUMN fBy VARCHAR(50) NULL
END
 
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketF' AND COLUMN_NAME = 'AID' and IS_NULLABLE ='NO') 
BEGIN 
IF NOT EXISTS (SELECT id.*  FROM sys.indexes id JOIN sys.index_columns ic ON id.object_id = ic.object_id 
				AND id.index_id = ic.index_id JOIN sys.columns col ON col.column_id = ic.column_id AND col.object_id = id.object_id
				INNER JOIN sys.objects so ON so.object_id = id.object_id WHERE id.object_id in (object_id('TicketF')) AND  col.name = 'AID')
	BEGIN
		ALTER TABLE TicketF ALTER COLUMN AID Uniqueidentifier NULL
	END
END
 
IF EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'Charge' and IS_NULLABLE ='NO') 
BEGIN 
	ALTER TABLE TicketO ALTER COLUMN Charge smallint NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'QBInvoiceID') 
BEGIN 
	ALTER TABLE TicketDPDA ADD QBInvoiceID VARCHAR(100) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'Recurring') 
BEGIN 
	ALTER TABLE TicketO ADD Recurring Datetime NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'JobItemDesc') 
BEGIN 
	ALTER TABLE TicketO ADD JobItemDesc VARCHAR(255) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick3') 
BEGIN 
	ALTER TABLE TicketO ADD CustomTick3 tinyint NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick4') 
BEGIN 
	ALTER TABLE TicketO ADD CustomTick4 tinyint NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'EmailNotified') 
BEGIN 
	ALTER TABLE TicketO ADD EmailNotified smallint NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'EmailTime') 
BEGIN 
	ALTER TABLE TicketO ADD EmailTime Datetime NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'QBServiceItem') 
BEGIN 
	ALTER TABLE TicketO ADD QBServiceItem VARCHAR(100) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'QBPayrollItem') 
BEGIN 
	ALTER TABLE TicketO ADD QBPayrollItem VARCHAR(100) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick1') 
BEGIN 
	ALTER TABLE TicketO ADD CustomTick1 VARCHAR(50) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick2') 
BEGIN 
	ALTER TABLE TicketO ADD CustomTick2 VARCHAR(50) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'CustomTick5') 
BEGIN 
	ALTER TABLE TicketO ADD CustomTick5 VARCHAR(100) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'additional_worker') 
BEGIN 
	ALTER TABLE TicketO ADD additional_worker bit NULL
END
 
IF  EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticketd' AND COLUMN_NAME = 'PartsUsed' and   CHARACTER_MAXIMUM_LENGTH <>-1) 
BEGIN 
	ALTER TABLE Ticketd alter column PartsUsed varchar (MAX) NULL	
END
 
IF  EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Ticketdpda' AND COLUMN_NAME = 'PartsUsed' and   CHARACTER_MAXIMUM_LENGTH <>-1) 
BEGIN 
	IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_TicketDPDA_PartsUsed]') AND type = 'D')
	BEGIN
		ALTER TABLE [dbo].[Ticketdpda] DROP CONSTRAINT [DF_TicketDPDA_PartsUsed]
		ALTER TABLE Ticketdpda alter column PartsUsed varchar (MAX) NULL	
	END
END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'idRolCustomContact') BEGIN  ALTER TABLE TicketD ADD idRolCustomContact int NULL
END
 
IF EXISTS(SELECT data_type  FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'idRolCustomContact' AND data_type ='int') BEGIN  ALTER TABLE TicketD alter column idRolCustomContact int NULL END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'downtime') BEGIN  ALTER TABLE TicketDPDA ADD downtime NUMERIC(30,2) NULL
END
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'downtime') BEGIN  ALTER TABLE TicketD ADD downtime NUMERIC(30,2) NULL
END
 

IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'STax' AND COLUMN_NAME = 'Vendor') BEGIN  ALTER TABLE STax ADD Vendor Int NULL
END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 15 Mar 2021
--Description:  ES-6707 Sales - Estimate Approve status permission
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'EstApproveProposal') 
BEGIN     ALTER TABLE tblUser Add [EstApproveProposal] BIT NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblRole' AND COLUMN_NAME = 'EstApproveProposal') 
BEGIN     ALTER TABLE tblRole Add [EstApproveProposal] BIT NULL END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 19 Mar 2021
--Description:  ES-6863 Sales - Estimate Setup/Sales Setup/Default - add Approve Estimates checkbox
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'SalesApproveEstimate') 
BEGIN     ALTER TABLE Control Add [SalesApproveEstimate] BIT NULL DEFAULT 0 END
 
-- ===============================================================================
--Created By: Thomas
--Modified On: 24 Mar 2021
--Description:  ES-6831 Sales - Estimate grid Send Email tooltip show Emailed to, Date and Time email, Emailed by
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'EstimateForm' AND COLUMN_NAME = 'SendBy') 
BEGIN     ALTER TABLE EstimateForm Add [SendBy] VARCHAR(50) NULL END
 

 -- ===============================================================================
--Created By: Clark
--Modified On: 8 April 2021
--Description:  ES-6967 TEI - Project/Billing/Progress Billing add Invoice Remark field
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'WIPHeader' AND COLUMN_NAME = 'Remarks') 
BEGIN     ALTER TABLE WIPHeader ADD [Remarks] NVARCHAR(250) NULL END
 

-- ===============================================================================
--Created By: Clark
--Modified On: 12 April 2021
--Description:  ES-6967 TEI - Project/Billing/Progress Billing add Invoice Remark field
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'JBillingDate') 
BEGIN     ALTER TABLE Job ADD [JBillingDate] DATETIME NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'JPeriodDate') 
BEGIN     ALTER TABLE Job ADD [JPeriodDate] DATETIME NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'JRevisionDate') 
BEGIN     ALTER TABLE Job ADD [JRevisionDate] DATETIME NULL END
 
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Job' AND COLUMN_NAME = 'IRemarks') 
BEGIN     ALTER TABLE Job ADD [IRemarks] TEXT NULL END
 



	---------------------######################  PO / RPO MAJOR CHANGES #############-------------------

  IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'CreatedBy') 
	BEGIN ALTER TABLE PO ADD [CreatedBy] int NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'CreatedDate') 
BEGIN 
	ALTER TABLE PO ADD [CreatedDate] Datetime NULL 
	ALTER TABLE PO ADD CONSTRAINT DF_PO_CreatedDate DEFAULT GETDATE() FOR CreatedDate;
END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'ModifiedBy') 
	BEGIN ALTER TABLE PO ADD [ModifiedBy] int NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'ModifiedDate') 
	BEGIN ALTER TABLE PO ADD [ModifiedDate] Datetime NULL END

IF EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO' AND COLUMN_NAME = 'InUseBy') 
BEGIN ALTER TABLE PO ALTER COLUMN [InUseBy] VARCHAR(50) NULL  END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'ModifiedBy') 
	BEGIN ALTER TABLE POItem ADD [ModifiedBy] int NULL END

	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'ModifiedDate') 
	BEGIN ALTER TABLE POItem ADD ModifiedDate datetime NULL END

	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'ModifiedBy') 
	BEGIN ALTER TABLE RPOItem ADD [ModifiedBy] int NULL END

	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'ModifiedDate') 
	BEGIN ALTER TABLE RPOItem ADD ModifiedDate datetime NULL END

	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivePO' AND COLUMN_NAME = 'ModifiedBy') 
	BEGIN ALTER TABLE ReceivePO ADD [ModifiedBy] int NULL END

	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivePO' AND COLUMN_NAME = 'ModifiedDate') 
	BEGIN ALTER TABLE ReceivePO ADD ModifiedDate datetime NULL END
	 
 IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivePO' AND COLUMN_NAME = 'VendorID') 
	BEGIN ALTER TABLE ReceivePO ADD VendorID int NULL END

  IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'ReceivePO' AND COLUMN_NAME = 'CreatedBy') 
	BEGIN ALTER TABLE ReceivePO ADD CreatedBy int NULL END

	IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'POID') 
	BEGIN ALTER TABLE RPOItem ADD POID int NULL END

		IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'POItemId') 
	BEGIN ALTER TABLE RPOItem ADD POItemId int NULL END

   IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'ItemId') 
	BEGIN ALTER TABLE RPOItem ADD ItemId int NULL END

	 IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'CreatedBy') 
	BEGIN ALTER TABLE POItem ADD CreatedBy int NULL END


   IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'fdesc') 
	BEGIN ALTER TABLE RPOItem ADD fdesc [varchar](8000) NULL END

 
    IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'CreatedBy') 
	BEGIN ALTER TABLE RPOItem ADD CreatedBy int NULL END

    IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'CreatedDate') 
	BEGIN ALTER TABLE RPOItem ADD CreatedDate datetime NULL END

	
    IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'POItem' AND COLUMN_NAME = 'POItemId') 
	BEGIN ALTER TABLE POItem ADD POItemId int NULL END


	  IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'RPOItem' AND COLUMN_NAME = 'RPOItemId') 
	BEGIN ALTER TABLE RPOItem ADD RPOItemId int NULL END


    IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'IsNeedToRun_PO_RPO_DATA_Migration') 
	BEGIN ALTER TABLE Control ADD IsNeedToRun_PO_RPO_DATA_Migration bit NULL END


	   IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'Control' AND COLUMN_NAME = 'ISNEEDTORUN_APBILLITEM_DATA_MIGRATION') 
	BEGIN ALTER TABLE Control ADD ISNEEDTORUN_APBILLITEM_DATA_MIGRATION bit NULL END

	


	-- ===============================================================================
--Created By: NK
--Modified On: 28 April 2021
--Description: Gable Data migration TS to MOM
-- ===============================================================================

IF EXISTS(SELECT data_type FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Custom' AND COLUMN_NAME = 'Label' and data_type ='varchar(50)')
BEGIN ALTER TABLE Custom ALTER COLUMN Label varchar(500) NULL END

IF EXISTS(SELECT data_type FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'Comments' and data_type ='varchar(1000)')
BEGIN ALTER TABLE TicketD ALTER COLUMN Comments varchar(MAX) NULL END

IF EXISTS(SELECT data_type FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'Recommendations' and data_type ='varchar(225)')
BEGIN ALTER TABLE TicketDPDA ALTER COLUMN Recommendations varchar(MAX) NULL END

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'pdaticketid') 
BEGIN     ALTER TABLE TicketD ADD pdaticketid int NULL END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketD' AND COLUMN_NAME = 'AID') 
BEGIN     ALTER TABLE TicketD ADD  AID UNIQUEIDENTIFIER CONSTRAINT [DF_TicketD_AID] DEFAULT (newid()) NOT NULL END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'break_time') 
BEGIN     ALTER TABLE TicketDPDA ADD  break_time NUMERIC (30, 2)  DEFAULT ('0') NULL  END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'create_token') 
BEGIN     ALTER TABLE TicketO ADD  create_token VARCHAR (255)  CONSTRAINT [DF__TicketO__create___589C25F3] DEFAULT ('') NULL  END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketO' AND COLUMN_NAME = 'is_work_order') 
BEGIN     ALTER TABLE TicketO ADD  is_work_order INT   DEFAULT ('0') NULL  END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PDATicketSignature' AND COLUMN_NAME = 'AID') 
BEGIN     ALTER TABLE PDATicketSignature ADD  AID UNIQUEIDENTIFIER CONSTRAINT [DF_PDATicketSignature_AID] DEFAULT (newid()) NOT NULL END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketI' AND COLUMN_NAME = 'AID') 
BEGIN     ALTER TABLE TicketI ADD  AID UNIQUEIDENTIFIER CONSTRAINT [DF_TicketI_AID] DEFAULT (newid()) NOT NULL END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketIPDA' AND COLUMN_NAME = 'AID') 
BEGIN     ALTER TABLE TicketIPDA ADD  AID UNIQUEIDENTIFIER CONSTRAINT [DF_TicketIPDA_AID] DEFAULT (newid()) NOT NULL END
 

IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'TicketDPDA' AND COLUMN_NAME = 'AID') 
BEGIN     ALTER TABLE TicketDPDA ADD  AID UNIQUEIDENTIFIER CONSTRAINT [DF_TicketDPDA_AID] DEFAULT (newid()) NOT NULL END
 





-- ===============================================================================
--Created By: Azhar
--Modified On: 18 Aug 2020	
--Description: Add New Column on PO 
-- ===============================================================================
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'PO'  AND  COLUMN_NAME = 'POReceiveBy')   

BEGIN  ALTER TABLE PO  ADD POReceiveBy int  NULL  END

 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblRole' AND COLUMN_NAME = 'ViolationPermission')   
BEGIN  ALTER TABLE tblRole ADD [ViolationPermission] VARCHAR(4) NULL END
 
 
IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'tblUser' AND COLUMN_NAME = 'ViolationPermission')   
BEGIN  ALTER TABLE tblUser ADD [ViolationPermission] VARCHAR(4) NULL END
 
--================================================================================



IF NOT EXISTS(SELECT 1 FROM   INFORMATION_SCHEMA.COLUMNS WHERE  TABLE_NAME = 'APBillItem'  AND  COLUMN_NAME = 'Price')   
BEGIN ALTER TABLE APBillItem  ADD Price numeric(31,2)  NULL  END
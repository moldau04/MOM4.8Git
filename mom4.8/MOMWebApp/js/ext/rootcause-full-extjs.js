/**
 * Root Cause 2020-03-10 16:05
 *
 * Copyright (c) 2020 Bryntum AB
 *
 * ANY USE OUTSIDE OF therootcause.io IS EXPLICITLY FORBIDDEN
 *
 * For further information please visit https://therootcause.io
 */
var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RC;!function(e){!function(e){!function(e){function t(e){return'"'+e.replace(/"/,'\\"')+'"'}function n(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(e=e.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(v))throw Error("Invalid request option. invalid attribute name: "+e);return e}function r(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},r={},i=e.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(a){var s=(a=n(a)).toLowerCase();if(t[s])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");r[a]=!0,t[s]=!0}}return Object.keys(r)}function i(e){var t={};return e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=!0})}),Object.keys(t)}var o;"undefined"!=typeof WebKitMutationObserver?o=WebKitMutationObserver:"undefined"!=typeof MutationObserver&&(o=MutationObserver);var a=function(){function e(){this.nodes=[],this.values=[]}return e.prototype.isIndex=function(e){return+e==e>>>0},e.prototype.nodeId=function(t){var n=t[e.ID_PROP];return n||(n=t[e.ID_PROP]=e.nextId_++),n},e.prototype.set=function(e,t){var n=this.nodeId(e);this.nodes[n]=e,this.values[n]=t},e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]},e.prototype.has=function(e){return this.nodeId(e)in this.nodes},e.prototype.delete=function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0},e.prototype.keys=function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},e.ID_PROP="__mutation_summary_node_map_id__",e.nextId_=1,e}();e.NodeMap=a;var s;!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(s||(s={}));var l=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===s&&(s=null),this.node=e,this.childList=t,this.attributes=n,this.characterData=r,this.oldParentNode=i,this.added=o,this.attributeOldValues=a,this.characterDataOldValue=s,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return e.prototype.getAttributeOldValue=function(e){if(this.attributeOldValues)return this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]},e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e},e.prototype.attributeMutated=function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},this.isCaseInsensitive&&(e=e.toLowerCase()),e in this.attributeOldValues||(this.attributeOldValues[e]=t)},e.prototype.characterDataMutated=function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)},e.prototype.removedFromParent=function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e},e.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},e}(),u=function(){return function(){this.added=new a,this.removed=new a,this.maybeMoved=new a,this.oldPrevious=new a,this.moved=void 0}}(),c=function(e){function t(t,n){var r=e.call(this)||this;r.rootNode=t,r.reachableCache=void 0,r.wasReachableCache=void 0,r.anyParentsChanged=!1,r.anyAttributesChanged=!1,r.anyCharacterDataChanged=!1;for(var i=0;i<n.length;i++){var o=n[i];switch(o.type){case"childList":r.anyParentsChanged=!0;for(a=0;a<o.removedNodes.length;a++){s=o.removedNodes[a];r.getChange(s).removedFromParent(o.target)}for(var a=0;a<o.addedNodes.length;a++){var s=o.addedNodes[a];r.getChange(s).insertedIntoParent()}break;case"attributes":r.anyAttributesChanged=!0,(l=r.getChange(o.target)).attributeMutated(o.attributeName,o.oldValue);break;case"characterData":r.anyCharacterDataChanged=!0;var l=r.getChange(o.target);l.characterDataMutated(o.oldValue)}}return r}return __extends(t,e),t.prototype.getChange=function(e){var t=this.get(e);return t||(t=new l(e),this.set(e,t)),t},t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode},t.prototype.getIsReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new a;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t},t.prototype.getWasReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new a;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t},t.prototype.reachabilityChange=function(e){return this.getIsReachable(e)?this.getWasReachable(e)?s.STAYED_IN:s.ENTERED:this.getWasReachable(e)?s.EXITED:s.STAYED_OUT},t}(a),d=function(){function e(e,t,n,r,i){this.rootNode=e,this.mutations=t,this.selectors=n,this.calcReordered=r,this.calcOldPreviousSibling=i,this.treeChanges=new c(e,t),this.entered=[],this.exited=[],this.stayedIn=new a,this.visited=new a,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return e.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},e.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var n=this.treeChanges.get(e),r=t;if((n&&n.childList||void 0==r)&&(r=this.treeChanges.reachabilityChange(e)),r!==s.STAYED_OUT){if(this.matchabilityChange(e),r===s.ENTERED)this.entered.push(e);else if(r===s.EXITED)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(r===s.STAYED_IN){var i=s.STAYED_IN;n&&n.childList&&(n.oldParentNode!==e.parentNode?(i=s.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(i=s.REORDERED)),this.stayedIn.set(e,i)}if(r!==s.STAYED_IN)for(var o=e.firstChild;o;o=o.nextSibling)this.visitNode(o,r)}}},e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(t=n.oldParentNode);var r=this.childListChangeMap.get(t);r||(r=new u,this.childListChangeMap.set(t,r)),r.oldPrevious.has(e)||r.oldPrevious.set(e,e.previousSibling)}},e.prototype.getChanged=function(e,t,n){this.selectors=t,this.characterDataOnly=n;for(i=0;i<this.entered.length;i++){a=this.entered[i];(l=this.matchabilityChange(a))!==s.ENTERED&&l!==s.STAYED_IN||e.added.push(a)}for(var r=this.stayedIn.keys(),i=0;i<r.length;i++){a=r[i];if((l=this.matchabilityChange(a))===s.ENTERED)e.added.push(a);else if(l===s.EXITED)e.removed.push(a);else if(l===s.STAYED_IN&&(e.reparented||e.reordered)){var o=this.stayedIn.get(a);e.reparented&&o===s.REPARENTED?e.reparented.push(a):e.reordered&&o===s.REORDERED&&e.reordered.push(a)}}for(i=0;i<this.exited.length;i++){var a=this.exited[i],l=this.matchabilityChange(a);l!==s.EXITED&&l!==s.STAYED_IN||e.removed.push(a)}},e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var n=this.treeChanges.reachabilityChange(e);if(n===s.STAYED_OUT||n===s.ENTERED)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(t=n.oldParentNode);var r=this.childListChangeMap.get(t);if(!r)throw Error("getOldPreviousSibling requested on invalid node.");return r.oldPrevious.get(e)},e.prototype.getOldAttribute=function(e,t){var n=this.treeChanges.get(e);if(!n||!n.attributes)throw Error("getOldAttribute requested on invalid node.");var r=n.getAttributeOldValue(t);if(void 0===r)throw Error("getOldAttribute requested for unchanged attribute name.");return r},e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,n;if(e){t={},n={};for(o=0;o<e.length;o++)t[h=e[o]]=!0,n[h.toLowerCase()]=h}for(var r={},i=this.treeChanges.keys(),o=0;o<i.length;o++){var a=i[o],l=this.treeChanges.get(a);if(l.attributes&&(s.STAYED_IN===this.treeChanges.reachabilityChange(a)&&s.STAYED_IN===this.matchabilityChange(a)))for(var u=a,c=l.getAttributeNamesMutated(),d=0;d<c.length;d++){var h=c[d];(!t||t[h]||l.isCaseInsensitive&&n[h])&&(l.getAttributeOldValue(h)!==u.getAttribute(h)&&(n&&l.isCaseInsensitive&&(h=n[h]),r[h]=r[h]||[],r[h].push(u)))}}return r},e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],n=0;n<e.length;n++){var r=e[n];if(s.STAYED_IN===this.treeChanges.reachabilityChange(r)){var i=this.treeChanges.get(r);i.characterData&&r.textContent!=i.characterDataOldValue&&t.push(r)}}return t},e.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new a);var n=this.matchCache[e.uid],r=n.get(t);return void 0===r&&(r=e.matchabilityChange(t,this.treeChanges.get(t)),n.set(t,r)),r},e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return s.STAYED_IN;default:return s.STAYED_OUT}if(!this.selectors)return s.STAYED_IN;if(e.nodeType!==Node.ELEMENT_NODE)return s.STAYED_OUT;for(var n=e,r=this.selectors.map(function(e){return t.computeMatchabilityChange(e,n)}),i=s.STAYED_OUT,o=0;i!==s.STAYED_IN&&o<r.length;){switch(r[o]){case s.STAYED_IN:i=s.STAYED_IN;break;case s.ENTERED:i=i===s.EXITED?s.STAYED_IN:s.ENTERED;break;case s.EXITED:i=i===s.ENTERED?s.STAYED_IN:s.EXITED}o++}return i},e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new u,this.childListChangeMap.set(e,t)),t},e.prototype.processChildlistChanges=function(){if(!this.childListChangeMap){this.childListChangeMap=new a;for(var e=0;e<this.mutations.length;e++){var t=this.mutations[e];if("childList"==t.type&&(this.treeChanges.reachabilityChange(t.target)===s.STAYED_IN||this.calcOldPreviousSibling)){for(var n=this.getChildlistChange(t.target),r=t.previousSibling,i=function(e,t){!e||n.oldPrevious.has(e)||n.added.has(e)||n.maybeMoved.has(e)||t&&(n.added.has(t)||n.maybeMoved.has(t))||n.oldPrevious.set(e,t)},o=0;o<t.removedNodes.length;o++)i(l=t.removedNodes[o],r),n.added.has(l)?n.added.delete(l):(n.removed.set(l,!0),n.maybeMoved.delete(l)),r=l;i(t.nextSibling,r);for(o=0;o<t.addedNodes.length;o++){var l=t.addedNodes[o];n.removed.has(l)?(n.removed.delete(l),n.maybeMoved.set(l,!0)):n.added.set(l,!0)}}}}},e.prototype.wasReordered=function(e){function t(e){if(!e)return!1;if(!s.maybeMoved.has(e))return!1;var t=s.moved.get(e);return void 0!==t?t:(l.has(e)?t=!0:(l.set(e,!0),t=r(e)!==n(e)),l.has(e)?(l.delete(e),s.moved.set(e,t)):t=s.moved.get(e),t)}function n(e){var r=u.get(e);if(void 0!==r)return r;for(r=s.oldPrevious.get(e);r&&(s.removed.has(r)||t(r));)r=n(r);return void 0===r&&(r=e.previousSibling),u.set(e,r),r}function r(e){if(c.has(e))return c.get(e);for(var n=e.previousSibling;n&&(s.added.has(n)||t(n));)n=n.previousSibling;return c.set(e,n),n}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var i=e.parentNode,o=this.treeChanges.get(e);o&&o.oldParentNode&&(i=o.oldParentNode);var s=this.childListChangeMap.get(i);if(!s)return!1;if(s.moved)return s.moved.get(e);s.moved=new a;var l=new a,u=new a,c=new a;return s.maybeMoved.keys().forEach(t),s.moved.get(e)},e}(),h=function(){function e(e,t){var n=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element||t.characterData?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var r=t.attribute?[t.attribute]:t.attributeList,i=e.attributeChangedNodes(r);t.attribute?this.valueChanged=i[t.attribute]||[]:(this.attributeChanged=i,t.attributeList&&t.attributeList.forEach(function(e){n.attributeChanged.hasOwnProperty(e)||(n.attributeChanged[e]=[])}))}if(t.all||t.characterData){var o=e.getCharacterDataChanged();t.characterData?this.valueChanged=o:this.characterDataChanged=o}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}return e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)},e}();e.Summary=h;var p=/[a-zA-Z_]+/,f=/[a-zA-Z0-9_\-]+/,m=function(){function e(){}return e.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),n=0;n<t.length;n++)if(this.attrValue===t[n])return!0;return!1},e.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+t(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+t(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},e}(),g=function(){function e(){this.uid=e.nextUid++,this.qualifiers=[]}return Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)},e.prototype.wasMatching=function(e,t,n){if(!t||!t.attributes)return n;var r=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==r&&r!==e.tagName)return!1;for(var i=[],o=!1,a=0;a<this.qualifiers.length;a++){var s=this.qualifiers[a],l=t.getAttributeOldValue(s.attrName);i.push(l),o=o||void 0!==l}if(!o)return n;for(a=0;a<this.qualifiers.length;a++){s=this.qualifiers[a];if(void 0===(l=i[a])&&(l=e.getAttribute(s.attrName)),!s.matches(l))return!1}return!0},e.prototype.matchabilityChange=function(e,t){var n=this.isMatching(e);return n?this.wasMatching(e,t,n)?s.STAYED_IN:s.ENTERED:this.wasMatching(e,t,n)?s.EXITED:s.STAYED_OUT},e.parseSelectors=function(t){function n(){i&&(o&&(i.qualifiers.push(o),o=void 0),s.push(i)),i=new e}function r(){o&&i.qualifiers.push(o),o=new m}for(var i,o,a,s=[],l=/\s/,u="Invalid or unsupported selector syntax.",c=1,d=0;d<t.length;){var h=t[d++];switch(c){case 1:if(h.match(p)){n(),i.tagName=h,c=2;break}if("*"==h){n(),i.tagName="*",c=3;break}if("."==h){n(),r(),i.tagName="*",o.attrName="class",o.contains=!0,c=4;break}if("#"==h){n(),r(),i.tagName="*",o.attrName="id",c=4;break}if("["==h){n(),r(),i.tagName="*",o.attrName="",c=6;break}if(h.match(l))break;throw Error(u);case 2:if(h.match(f)){i.tagName+=h;break}if("."==h){r(),o.attrName="class",o.contains=!0,c=4;break}if("#"==h){r(),o.attrName="id",c=4;break}if("["==h){r(),o.attrName="",c=6;break}if(h.match(l)){c=14;break}if(","==h){c=1;break}throw Error(u);case 3:if("."==h){r(),o.attrName="class",o.contains=!0,c=4;break}if("#"==h){r(),o.attrName="id",c=4;break}if("["==h){r(),o.attrName="",c=6;break}if(h.match(l)){c=14;break}if(","==h){c=1;break}throw Error(u);case 4:if(h.match(p)){o.attrValue=h,c=5;break}throw Error(u);case 5:if(h.match(f)){o.attrValue+=h;break}if("."==h){r(),o.attrName="class",o.contains=!0,c=4;break}if("#"==h){r(),o.attrName="id",c=4;break}if("["==h){r(),c=6;break}if(h.match(l)){c=14;break}if(","==h){c=1;break}throw Error(u);case 6:if(h.match(p)){o.attrName=h,c=7;break}if(h.match(l))break;throw Error(u);case 7:if(h.match(f)){o.attrName+=h;break}if(h.match(l)){c=8;break}if("~"==h){o.contains=!0,c=9;break}if("="==h){o.attrValue="",c=11;break}if("]"==h){c=3;break}throw Error(u);case 8:if("~"==h){o.contains=!0,c=9;break}if("="==h){o.attrValue="",c=11;break}if("]"==h){c=3;break}if(h.match(l))break;throw Error(u);case 9:if("="==h){o.attrValue="",c=11;break}throw Error(u);case 10:if("]"==h){c=3;break}if(h.match(l))break;throw Error(u);case 11:if(h.match(l))break;if('"'==h||"'"==h){a=h,c=13;break}o.attrValue+=h,c=12;break;case 12:if(h.match(l)){c=10;break}if("]"==h){c=3;break}if("'"==h||'"'==h)throw Error(u);o.attrValue+=h;break;case 13:if(h==a){c=10;break}o.attrValue+=h;break;case 14:if(h.match(l))break;if(","==h){c=1;break}throw Error(u)}}switch(c){case 1:case 2:case 3:case 5:case 14:n();break;default:throw Error(u)}if(!s.length)throw Error(u);return s},e.nextUid=1,e.matchesSelector=function(){var e=document.createElement("div");return"function"==typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector"}(),e}(),v=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,y=function(){function e(t){var n=this;this.connected=!1,this.options=e.validateOptions(t),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(t){return e.createQueryValidator(n.root,t)})),this.observer=new o(function(e){n.observerCallback(e)}),this.reconnect()}return e.createObserverOptions=function(e){function t(e){r.attributes&&!n||(r.attributes=!0,r.attributeOldValue=!0,e?(n=n||{},e.forEach(function(e){n[e]=!0,n[e.toLowerCase()]=!0})):n=void 0)}var n,r={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return r.characterData=!0,void(r.characterDataOldValue=!0);if(e.all)return t(),r.characterData=!0,void(r.characterDataOldValue=!0);if(e.attribute)t([e.attribute.trim()]);else{var n=i(e.elementFilter).concat(e.attributeList||[]);n.length&&t(n)}}),n&&(r.attributeFilter=Object.keys(n)),r},e.validateOptions=function(t){for(var i in t)if(!(i in e.optionKeys))throw Error("Invalid option: "+i);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var o={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]},a=0;a<t.queries.length;a++){var s=t.queries[a];if(s.all){if(Object.keys(s).length>1)throw Error("Invalid request option. all has no options.");o.queries.push({all:!0})}else if("attribute"in s){if((u={attribute:n(s.attribute)}).elementFilter=g.parseSelectors("*["+u.attribute+"]"),Object.keys(s).length>1)throw Error("Invalid request option. attribute has no options.");o.queries.push(u)}else if("element"in s){var l=Object.keys(s).length,u={element:s.element,elementFilter:g.parseSelectors(s.element)};if(s.hasOwnProperty("elementAttributes")&&(u.attributeList=r(s.elementAttributes),l--),l>1)throw Error("Invalid request option. element only allows elementAttributes option.");o.queries.push(u)}else{if(!s.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(s).length>1)throw Error("Invalid request option. characterData has no options.");o.queries.push({characterData:!0})}}return o},e.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new d(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),n=[],r=0;r<this.options.queries.length;r++)n.push(new h(t,this.options.queries[r]));return n},e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})},e.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,n){t&&t.validate(e[n])})},e.prototype.changesToReport=function(e){return e.some(function(e){return!!["added","removed","reordered","reparented","valueChanged","characterDataChanged"].some(function(t){return e[t]&&e[t].length})||!(!e.attributeChanged||!Object.keys(e.attributeChanged).some(function(t){return!!e.attributeChanged[t].length}))})},e.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},e.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e},e.NodeMap=a,e.parseElementFilter=g.parseSelectors,e.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e}();e.MutationSummary=y}(e.recorder||(e.recorder={}))}(e.video||(e.video={}))}(RC||(RC={}));var RC;!function(e){!function(e){!function(e){var t;!function(e){e[e.setBaseUrl=0]="setBaseUrl",e[e.applyDomSnapshot=1]="applyDomSnapshot",e[e.applyPointerPosition=2]="applyPointerPosition",e[e.applyPointerState=3]="applyPointerState",e[e.applyElementValueChange=4]="applyElementValueChange",e[e.applyElementCheckedChange=5]="applyElementCheckedChange",e[e.applyWindowResize=6]="applyWindowResize",e[e.applyDomScroll=7]="applyDomScroll",e[e.applyDomMutation=8]="applyDomMutation"}(t=e.VideoRecordingMessage||(e.VideoRecordingMessage={}));var n={altGlyph:0,altGlyphDef:0,altGlyphItem:0,animate:0,animateColor:0,animateMotion:0,animateTransform:0,animation:0,circle:0,clipPath:0,"color-profile":0,cursor:0,defs:0,desc:0,discard:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feDropShadow:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,"font-face":0,"font-face-format":0,"font-face-name":0,"font-face-src":0,"font-face-uri":0,foreignObject:0,g:0,glyph:0,glyphRef:0,handler:0,hatch:0,hatchpath:0,hkern:0,image:0,line:0,linearGradient:0,listener:0,marker:0,mask:0,mesh:0,meshgradient:0,meshpatch:0,meshrow:0,metadata:0,"missing-glyph":0,mpath:0,path:0,pattern:0,polygon:0,polyline:0,prefetch:0,radialGradient:0,rect:0,set:0,solidColor:0,solidcolor:0,stop:0,svg:0,switch:0,symbol:0,tbreak:0,text:0,textPath:0,title:0,tref:0,tspan:0,unknown:0,use:0,view:0,vkern:0},r=function(){function e(e,t){this.root=e,this.delegate=t,this.idMap={},this.actualPointerPosition=[0,0]}return e.prototype.setBaseUrl=function(e){var t=this.delegate;t&&t.setBaseUrl&&t.setBaseUrl(e)},e.prototype.applyPointerState=function(e){this.delegate.updatePointerState&&this.delegate.updatePointerState(this.actualPointerPosition,e,!1)},e.prototype.unApplyPointerState=function(e){this.delegate.updatePointerState&&this.delegate.updatePointerState(this.actualPointerPosition,e,!0)},e.prototype.applyPointerPosition=function(e){this.actualPointerPosition[0]+=e[0],this.actualPointerPosition[1]+=e[1],this.delegate.updatePointerPosition&&this.delegate.updatePointerPosition(this.actualPointerPosition)},e.prototype.unApplyPointerPosition=function(e){this.actualPointerPosition[0]-=e[0],this.actualPointerPosition[1]-=e[1],this.delegate.updatePointerPosition&&this.delegate.updatePointerPosition(this.actualPointerPosition)},e.prototype.applyWindowResize=function(e){this.delegate.setWindowSize&&this.delegate.setWindowSize(e.size)},e.prototype.unApplyWindowResize=function(e){this.delegate.setWindowSize&&this.delegate.setWindowSize(e.oldSize)},e.prototype.applyElementCheckedChange=function(e){this.deserializeNode(e).checked=e.checked},e.prototype.unApplyElementCheckedChange=function(e){this.deserializeNode(e).checked=e.oldChecked},e.prototype.applyElementValueChange=function(e){var t=this.deserializeNode(e);"file"===t.type&&""!==e.value||(t.value=e.value)},e.prototype.unApplyElementValueChange=function(e){var t=this.deserializeNode(e);"file"===t.type&&""!==e.oldValue||(t.value=e.oldValue)},e.prototype.applyDomSnapshot=function(e,t,n){this.idMap[e]=this.root;for(var r=0;r<t.length;r++)this.deserializeNode(t[r],this.root);this.applyWindowResize({size:n})},e.prototype.getPageScrollingElement=function(){var e=this.getDocument();return e.scrollingElement||e.documentElement},e.prototype.applyDomScroll=function(e){var t=e.isPageScroll?this.getPageScrollingElement():this.deserializeNode(e);t.scrollLeft=e.scrollPosition[0],t.scrollTop=e.scrollPosition[1]},e.prototype.unApplyDomScroll=function(e){var t=e.isPageScroll?this.getPageScrollingElement():this.deserializeNode(e);t.scrollLeft=e.oldScrollPosition[0],t.scrollTop=e.oldScrollPosition[1]},e.prototype.applyDomMutation=function(e,t,n,r){var i=this,o=this;e.forEach(function(e){e.previousSibling&&e.previousSibling.nodeType&&o.deserializeNode(e.previousSibling)}),t.forEach(function(e){var t=i.deserializeNode(e);i.deserializeNode(e.parentNode),i.deserializeNode(e.previousSibling);t.parentNode&&t.parentNode.removeChild(t)}),e.forEach(function(e){var t=i.deserializeNode(e);t.parentNode&&t.parentNode.removeChild(t)}),t.forEach(function(e){var t=i.deserializeNode(e),n=i.deserializeNode(e.parentNode),r=i.deserializeNode(e.previousSibling);n.insertBefore(t,r?r.nextSibling:n.firstChild)}),n.forEach(function(e){var t=i.deserializeNode(e);Object.keys(e.attributes).forEach(function(n){var r=e.attributes[n];null===r?t.removeAttribute(n):i.delegate&&i.delegate.setAttribute&&i.delegate.setAttribute(t,n,r)||t.setAttribute(n,r)})}),r.forEach(function(e){i.deserializeNode(e).textContent=e.textContent})},e.prototype.unApplyDomMutation=function(e,t,n,r){var i=this;r.forEach(function(e){i.deserializeNode(e).textContent=e.oldTextContent}),n.forEach(function(e){var t=i.deserializeNode(e);Object.keys(e.oldValues).forEach(function(n){var r=e.oldValues[n];null===r?t.removeAttribute(n):i.delegate&&i.delegate.setAttribute&&i.delegate.setAttribute(t,n,r)||t.setAttribute(n,r)})}),t.forEach(function(e){var t=i.deserializeNode(e);if(e.oldParentNode)i.deserializeNode(e.oldParentNode);if(e.oldPreviousSibling)i.deserializeNode(e.oldPreviousSibling);t.parentNode&&t.parentNode.removeChild(t)}),t.forEach(function(e){var t=i.deserializeNode(e);if(e.oldParentNode){var n=i.deserializeNode(e.oldParentNode),r=i.deserializeNode(e.oldPreviousSibling);n.insertBefore(t,r?r.nextSibling:n.firstChild)}}),e.forEach(function(e){var t=i.deserializeNode(e),n=i.deserializeNode(e.oldParentNode),r=i.deserializeNode(e.oldPreviousSibling);n.insertBefore(t,r?r.nextSibling:n.firstChild)})},e.prototype.getDocument=function(){var e=this.root.ownerDocument;return null===e&&(e=this.root),e},e.prototype.deserializeNode=function(e,t){var r=this;if(null===e)return null;var i=this.idMap[e.id];if(i)return i;var o=this.getDocument();switch(e.nodeType){case Node.COMMENT_NODE:i=o.createComment(e.textContent);break;case Node.TEXT_NODE:i=o.createTextNode(e.textContent);break;case Node.DOCUMENT_TYPE_NODE:i=o.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Node.ELEMENT_NODE:var a=e.tagName.toLowerCase()in n;this.delegate&&this.delegate.createElement&&(i=this.delegate.createElement(e.tagName)),i||(i=a?o.createElementNS("http://www.w3.org/2000/svg",e.tagName):o.createElement(e.tagName)),Object.keys(e.attributes).forEach(function(t){if(!r.delegate||!r.delegate.setAttribute||!r.delegate.setAttribute(i,t,e.attributes[t]))try{i.setAttribute(t,e.attributes[t])}catch(e){console.error(e)}})}if(!i)throw new Error("deserializeNode failed");if(this.idMap[e.id]=i,e.childNodes)for(var s=0;s<e.childNodes.length;s++)this.deserializeNode(e.childNodes[s],i);var l=e.scrollPosition;if(l){var u=i;u.scrollLeft=l[0],u.scrollTop=l[1]}var c=e.value;null!=c&&(i.value=c);var d=e.checked;return null!=d&&(i.checked=d),t&&t.appendChild(i),i},e.prototype.playSingleFrame=function(e){var n=this,r=t[e[0]],i=e.slice(2);return n[r].apply(n,i),!0},e.prototype.unPlaySingleFrame=function(e){var n=this,r=t[e[0]],i=e.slice(2);if(r="applyDomMutation"==r?"unApplyDomMutation":"applyDomScroll"==r?"unApplyDomScroll":"applyWindowResize"==r?"unApplyWindowResize":"applyElementValueChange"==r?"unApplyElementValueChange":"applyElementCheckedChange"==r?"unApplyElementCheckedChange":"applyPointerPosition"==r?"unApplyPointerPosition":"applyPointerState"==r?"unApplyPointerState":null)return n[r].apply(n,i),!0},e.prototype.playFrames=function(e){e.map(this.playSingleFrame.bind(this))},e.prototype.clearDocument=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);this.idMap={},this.actualPointerPosition=[0,0]},e}();e.TreeMirrorConsumer=r;var i=function(){function n(t,n,r){var i=this;this.target=t,this.mirror=n,this.propertyChangeCheckerInterval=500,this.nextId=1,this.knownNodes=new e.MutationSummary.NodeMap,this.actualScrollPositions=new e.MutationSummary.NodeMap,this.actualValues=new e.MutationSummary.NodeMap,this.actualChecked=new e.MutationSummary.NodeMap,this.actualPointerPosition=[0,0],this.target=t;var o=this.getWindow(),a=(this.getDocument(),Boolean(o.PointerEvent)),s=Boolean(o.MSPointerEvent);this.eventsMap=a?{down:"pointerdown",up:"pointerup",move:"pointermove",over:"pointerover",out:"pointerout"}:s?{down:"MSPointerDown",up:"MSPointerUp",move:"MSPointerMove",over:"MSPointerOver",out:"MSPointerOut"}:{down:"mousedown",up:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout"},this.supportsPointerEvents=a||s,this.startedAt=Date.now(),this.mirror.onVideoFrameAvailable(this.annotateFrame("setBaseUrl",[(n.baseUrl||this.getWindow().location.href).match(/^(.*\/)[^\/]*$/)[1]])),this.connect(),this.overridePropertySetter(HTMLInputElement.prototype,"value"),this.overridePropertySetter(HTMLInputElement.prototype,"checked"),this.overridePropertySetter(HTMLSelectElement.prototype,"value"),this.overridePropertySetter(HTMLOptionElement.prototype,"value"),this.overridePropertySetter(HTMLTextAreaElement.prototype,"value");var l=[{all:!0}];r&&(l=l.concat(r)),this.mutationSummary=new e.MutationSummary({oldPreviousSibling:!0,rootNode:t,callback:function(e){i.onDomMutation(e)},queries:l})}return n.prototype.overridePropertySetter=function(e,t){var n=this,r=Object.getOwnPropertyDescriptor(e,t),i=r.set;r.set=function(e){i.apply(this,arguments),n.isConnected()&&n.onInputPropertyChange(this)},Object.defineProperty(e,t,r)},n.prototype.connect=function(){if(!this.isConnected()){var e=this.getWindow(),t=this.getDocument();this.mutationSummary&&this.mutationSummary.reconnect(),this.doDomSnapshot(this.target),t.addEventListener("scroll",this.domScrollListener=this.onDomScroll.bind(this),!0),t.addEventListener("input",this.domInputListener=this.onDomInput.bind(this),!0),t.addEventListener("change",this.domChangeListener=this.onDomInput.bind(this),!0),e.addEventListener("resize",this.windowResizeListener=this.onWindowResize.bind(this),!0),this.startTrackingPointer()}},n.prototype.disconnect=function(){if(this.isConnected()){this.flushPendingMutations(),this.mutationSummary.disconnect();var e=this.getWindow(),t=this.getDocument();t.removeEventListener("scroll",this.domScrollListener,!0),t.removeEventListener("input",this.domInputListener,!0),t.removeEventListener("change",this.domChangeListener,!0),e.removeEventListener("resize",this.windowResizeListener,!0),this.stopTrackingPointer()}},n.prototype.isConnected=function(){return this.mutationSummary&&this.mutationSummary.connected},n.prototype.getNormalizedEventName=function(e){var t=this.eventsMap;for(var n in t)if(t[n]==e)return n;return e},n.prototype.forEachPointerPositionEvent=function(e){var t=this,n=this.getDocument(),r=this.eventsMap;["move","over","out"].forEach(function(i){e.call(t,r[i]||i,n)})},n.prototype.forEachPointerStateEvent=function(e){var t=this,n=this.getDocument(),r=this.eventsMap;["down","up","click","contextmenu"].forEach(function(i){e.call(t,r[i]||i,n)})},n.prototype.startTrackingPointer=function(){var e=this;this.pointerPositionEventsListener=this.createThrottled(this.onPointerMoveEvent,this,100),this.forEachPointerPositionEvent(function(t,n){n.addEventListener(t,e.pointerPositionEventsListener,!0)}),this.pointerStateEventsListener=this.onPointerStateEvent.bind(this),this.forEachPointerStateEvent(function(t,n){n.addEventListener(t,e.pointerStateEventsListener,!0)})},n.prototype.stopTrackingPointer=function(){var e=this;this.forEachPointerPositionEvent(function(t,n){n.removeEventListener(t,e.pointerPositionEventsListener,!0)}),this.forEachPointerStateEvent(function(t,n){n.removeEventListener(t,e.pointerStateEventsListener,!0)})},n.prototype.onInputPropertyChange=function(e){var t=!1,n=(e.getAttribute("type")||"").toLowerCase();if("checkbox"==n||"radio"==n){var r=this.actualChecked.get(e);null!=r&&r==e.checked||(t||(this.flushPendingMutations(),t=!0),this.handleElementCheckedChange(e))}else{var i=this.actualValues.get(e);null!=i&&i==e.value||(t||(this.flushPendingMutations(),t=!0),this.handleElementValueChange(e))}},n.prototype.doDomSnapshot=function(e){for(var t=this.serializeNode(e).id,n=[],r=e.firstChild;r;r=r.nextSibling)n.push(this.serializeNode(r,!0));this.actualWindowSize=this.getWindowSize(),this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomSnapshot",[t,n,this.actualWindowSize]))},n.prototype.getWindowSize=function(){var e=this.getWindow(),t=e.document;return{width:e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,height:e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}},n.prototype.getDocument=function(){var e=this.target.ownerDocument;return null===e&&(e=this.target),e},n.prototype.getWindow=function(){return this.getDocument().defaultView},n.prototype.annotateFrame=function(e,n){var r=[t[e],Date.now()-this.startedAt];return r.push.apply(r,n),r},n.prototype.onPointerMoveEvent=function(e){var t=e.clientX-this.actualPointerPosition[0],n=e.clientY-this.actualPointerPosition[1];0==t&&0==n||(this.mirror.onVideoFrameAvailable(this.annotateFrame("applyPointerPosition",[[t,n]])),this.actualPointerPosition[0]=e.clientX,this.actualPointerPosition[1]=e.clientY)},n.prototype.onPointerStateEvent=function(e){this.onPointerMoveEvent(e),this.mirror.onVideoFrameAvailable(this.annotateFrame("applyPointerState",[this.getNormalizedEventName(e.type),this.getSimplifiedSelector(e.target)]))},n.prototype.flushPendingMutations=function(){var e=this.mutationSummary.takeSummaries();e&&this.onDomMutation(e)},n.prototype.onDomInput=function(e){this.flushPendingMutations(),this.handleElementValueChange(e.target)},n.prototype.handleElementValueChange=function(e){var t=this.serializeNode(e),n=e.value,r=this.actualValues.get(e);t.value=n,t.oldValue=null!=r?r:"",this.mirror.onVideoFrameAvailable(this.annotateFrame("applyElementValueChange",[t,this.getSimplifiedSelector(e)])),this.actualValues.set(e,n)},n.prototype.handleElementCheckedChange=function(e){var t=this.serializeNode(e),n=e.checked,r=this.actualChecked.get(e);t.checked=n,t.oldChecked=null!=r&&r,this.mirror.onVideoFrameAvailable(this.annotateFrame("applyElementCheckedChange",[t])),this.actualChecked.set(e,n)},n.prototype.onWindowResize=function(e){this.flushPendingMutations();var t=this.getWindowSize();this.mirror.onVideoFrameAvailable(this.annotateFrame("applyWindowResize",[{size:t,oldSize:this.actualWindowSize}])),this.actualWindowSize=t},n.prototype.onDomScroll=function(e){this.flushPendingMutations();var t,n=this.getDocument(),r=e.target,i=!1;r==n?(i=!0,t=n.scrollingElement?n.scrollingElement:n.documentElement):t=r;var o=this.serializeNode(t),a=this.actualScrollPositions.get(t);o.scrollPosition=[t.scrollLeft,t.scrollTop],o.oldScrollPosition=a||[0,0],o.isPageScroll=i,this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomScroll",[o])),this.actualScrollPositions.set(t,o.scrollPosition)},n.prototype.rememberNode=function(e){var t=this.nextId++;return this.knownNodes.set(e,t),t},n.prototype.forgetNode=function(e){this.knownNodes.delete(e),this.actualValues.delete(e),this.actualChecked.delete(e),this.actualScrollPositions.delete(e)},n.prototype.serializeNode=function(e,t){if(null===e)return null;var n=this.knownNodes.get(e);if(void 0!==n)return{id:n};var r={id:this.rememberNode(e),nodeType:e.nodeType};switch(r.nodeType){case Node.DOCUMENT_TYPE_NODE:var i=e;r.name=i.name,r.publicId=i.publicId,r.systemId=i.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:r.textContent=e.textContent;break;case Node.ELEMENT_NODE:var o=e;r.tagName=o.tagName,r.attributes={},0==o.scrollLeft&&0==o.scrollTop||(r.scrollPosition=[o.scrollLeft,o.scrollTop],this.actualScrollPositions.set(e,r.scrollPosition));var a=o.value;null!=a&&(r.value=String(a),this.actualValues.set(e,r.value));var s=o.checked;null!=s&&(r.checked=s,this.actualChecked.set(e,s));for(var l=0;l<o.attributes.length;l++){var u=o.attributes[l];r.attributes[u.name]=u.value}if(t&&o.childNodes.length){r.childNodes=[];for(var c=o.firstChild;c;c=c.nextSibling)r.childNodes.push(this.serializeNode(c,!0))}}return r},n.prototype.serializeNodeWithPositionData=function(e,t,n){var r=this.serializeNode(e);return r.previousSibling=this.serializeNode(e.previousSibling),n&&(r.oldPreviousSibling=this.serializeNode(t.getOldPreviousSibling(e))),r.parentNode=this.serializeNode(e.parentNode),n&&(r.oldParentNode=this.serializeNode(t.getOldParentNode(e))),r},n.prototype.serializeAddedAndMoved=function(t){var n=this,r=t.added,i=t.reparented,o=t.reordered,a=new e.MutationSummary.NodeMap;r.forEach(function(e){return a.set(e,!0)});var s=r.concat(i).concat(o),l=new e.MutationSummary.NodeMap;s.forEach(function(t){var n=t.parentNode,r=l.get(n);r||(r=new e.MutationSummary.NodeMap,l.set(n,r)),r.set(t,!0)});var u=[];return l.keys().forEach(function(e){for(var r=l.get(e),i=r.keys();i.length;){for(var o=i[0];o.previousSibling&&r.has(o.previousSibling);)o=o.previousSibling;for(;o&&r.has(o);){var s=n.serializeNodeWithPositionData(o,t,!a.has(o));u.push(s),r.delete(o),o=o.nextSibling}i=r.keys()}}),u},n.prototype.serializeAttributeChanges=function(t){var n=this,r=t.attributeChanged,i=new e.MutationSummary.NodeMap;return Object.keys(r).forEach(function(e){r[e].forEach(function(r){var o=i.get(r);o||((o=n.serializeNode(r)).attributes={},o.oldValues={},i.set(r,o)),o.attributes[e]=r.getAttribute(e),o.oldValues[e]=t.getOldAttribute(r,e)})}),i.keys().map(function(e){return i.get(e)})},n.prototype.onDomMutation=function(e){var t=this,n=e[0],r=n.removed.map(function(e){return t.serializeNodeWithPositionData(e,n,!0)}),i=this.serializeAddedAndMoved(n),o=this.serializeAttributeChanges(n),a=n.characterDataChanged.map(function(e){var r=t.serializeNode(e);return r.textContent=e.textContent,r.oldTextContent=n.getOldCharacterData(e),r});this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomMutation",[r,i,o,a])),n.removed.forEach(function(e){t.forgetNode(e)})},n.prototype.getSimplifiedSelector=function(e){for(var t=[],n=e;n&&n!=this.target;n=n.parentNode){if(e.getAttribute("id")){t.push("#"+e.getAttribute("id"));break}var r=String(n.className||"").split(" ");1!=r.length||r[0]||(r.length=0),r.length=Math.min(r.length,3);var i=String(n.tagName||"NOTAG").toUpperCase();t.unshift(i+(r.length?"."+r.join("."):""))}return t.join(" > ")},n.prototype.createThrottled=function(e,t,n){var r,i,o=-1/0;return function(){r=arguments;var a=Date.now(),s=a-o;s>=n?(o=a,e.apply(t,r),i&&clearTimeout(i),i=null):i||(i=setTimeout(function(){i=null,o=Date.now(),e.apply(t,r)},n-s))}},n}();e.TreeMirrorProducer=i}(e.recorder||(e.recorder={}))}(e.video||(e.video={}))}(RC||(RC={})),window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Uuid={chars:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),uuid:function(){for(var e,t=this.chars,n=new Array(36),r=0,i=0;i<36;i++)8==i||13==i||18==i||23==i?n[i]="-":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19==i?3&e|8:e]);return n.join("")}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.video=RC.video||{},RC.video.CanRecordVideo={recordSessionVideo:!1,processVideoFrameFn:null,mirrorProducer:null,videoBaseUrl:null,videoData:null,socket:null,sessionUuid:null,connectAttempts:0,maxConnectAttempts:10,connectAttemptInterval:3e3,start:function(){var e=this;window.MutationObserver||window.WebKitMutationObserver||(e.recordSessionVideo=!1),e.recordSessionVideo&&e.startVideoRecording(),this.SUPER()},stop:function(){var e=this;e.recordSessionVideo&&e.stopVideoRecording(),this.SUPER()},startVideoRecording:function(){var e=this;window.MutationObserver||window.WebKitMutationObserver?e.mirrorProducer?e.mirrorProducer.connect():(e.sessionUuid=RC.util.Uuid.uuid(),e.videoData=[],e.allVideoData=[],e.connectToWebSocketServer(),e.mirrorProducer=new RC.video.recorder.TreeMirrorProducer(document,{onVideoFrameAvailable:e.onVideoFrameAvailable.bind(this),baseUrl:e.videoBaseUrl})):e.logToConsole("Video recording not supported in this browser")},stopVideoRecording:function(){var e=this;e.mirrorProducer&&(e.mirrorProducer.disconnect(),e.socket&&e.socket.readyState===WebSocket.OPEN&&e.socket.close())},onVideoFrameAvailable:function(e){this.processVideoFrameFn&&this.processVideoFrameFn(e),this.supportOffline&&this.allVideoData.push(e),this.socket&&this.socket.readyState==WebSocket.OPEN?this.socket.send(JSON.stringify([e])):this.videoData.push(e)},connectToWebSocketServer:function(){try{this.connectAttempts++;var e=RC.Logger.prototype.baseUrl.replace(/^https?:\/\/([^/]+).*/,"wss://$1/wss/"),t=this.socket=new WebSocket(e);t.addEventListener("open",this.onWebSocketOpen.bind(this)),t.addEventListener("close",this.onWebSocketClosed.bind(this))}catch(e){console.log("Could not not connect to RootCause websocket server"),this.reConnectToWebSocketServerAfterDelay()}},reConnectToWebSocketServerAfterDelay:function(){if(this.connectAttempts<=this.maxConnectAttempts){var e=this;setTimeout(function(){e.connectToWebSocketServer()},this.connectAttemptInterval)}},onWebSocketOpen:function(e){this.videoData.length&&(this.socket.send(JSON.stringify([["initSession",0,this.applicationId,this.sessionUuid]])),this.socket.send(JSON.stringify(this.videoData)),this.videoData=[])},onWebSocketClosed:function(e){1e3!=e.code&&this.reConnectToWebSocketServerAfterDelay()},collectCrashData:function(e,t){var n=this;this.SUPER(e,function(e){e.sessionUuid=n.sessionUuid,e.mayHaveVideo=Boolean(n.sessionUuid),t.call(n,e)})}};var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RC;!function(e){!function(e){!function(e){function t(e){return'"'+e.replace(/"/,'\\"')+'"'}function n(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(e=e.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(v))throw Error("Invalid request option. invalid attribute name: "+e);return e}function r(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},r={},i=e.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(a){var s=(a=n(a)).toLowerCase();if(t[s])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");r[a]=!0,t[s]=!0}}return Object.keys(r)}function i(e){var t={};return e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=!0})}),Object.keys(t)}var o;"undefined"!=typeof WebKitMutationObserver?o=WebKitMutationObserver:"undefined"!=typeof MutationObserver&&(o=MutationObserver);var a=function(){function e(){this.nodes=[],this.values=[]}return e.prototype.isIndex=function(e){return+e==e>>>0},e.prototype.nodeId=function(t){var n=t[e.ID_PROP];return n||(n=t[e.ID_PROP]=e.nextId_++),n},e.prototype.set=function(e,t){var n=this.nodeId(e);this.nodes[n]=e,this.values[n]=t},e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]},e.prototype.has=function(e){return this.nodeId(e)in this.nodes},e.prototype.delete=function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0},e.prototype.keys=function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},e.ID_PROP="__mutation_summary_node_map_id__",e.nextId_=1,e}();e.NodeMap=a;var s;!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(s||(s={}));var l=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===s&&(s=null),this.node=e,this.childList=t,this.attributes=n,this.characterData=r,this.oldParentNode=i,this.added=o,this.attributeOldValues=a,this.characterDataOldValue=s,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return e.prototype.getAttributeOldValue=function(e){if(this.attributeOldValues)return this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]},e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e},e.prototype.attributeMutated=function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},this.isCaseInsensitive&&(e=e.toLowerCase()),e in this.attributeOldValues||(this.attributeOldValues[e]=t)},e.prototype.characterDataMutated=function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)},e.prototype.removedFromParent=function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e},e.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},e}(),u=function(){return function(){this.added=new a,this.removed=new a,this.maybeMoved=new a,this.oldPrevious=new a,this.moved=void 0}}(),c=function(e){function t(t,n){var r=e.call(this)||this;r.rootNode=t,r.reachableCache=void 0,r.wasReachableCache=void 0,r.anyParentsChanged=!1,r.anyAttributesChanged=!1,r.anyCharacterDataChanged=!1;for(var i=0;i<n.length;i++){var o=n[i];switch(o.type){case"childList":r.anyParentsChanged=!0;for(a=0;a<o.removedNodes.length;a++){s=o.removedNodes[a];r.getChange(s).removedFromParent(o.target)}for(var a=0;a<o.addedNodes.length;a++){var s=o.addedNodes[a];r.getChange(s).insertedIntoParent()}break;case"attributes":r.anyAttributesChanged=!0,(l=r.getChange(o.target)).attributeMutated(o.attributeName,o.oldValue);break;case"characterData":r.anyCharacterDataChanged=!0;var l=r.getChange(o.target);l.characterDataMutated(o.oldValue)}}return r}return __extends(t,e),t.prototype.getChange=function(e){var t=this.get(e);return t||(t=new l(e),this.set(e,t)),t},t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode},t.prototype.getIsReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new a;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t},t.prototype.getWasReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new a;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t},t.prototype.reachabilityChange=function(e){return this.getIsReachable(e)?this.getWasReachable(e)?s.STAYED_IN:s.ENTERED:this.getWasReachable(e)?s.EXITED:s.STAYED_OUT},t}(a),d=function(){function e(e,t,n,r,i){this.rootNode=e,this.mutations=t,this.selectors=n,this.calcReordered=r,this.calcOldPreviousSibling=i,this.treeChanges=new c(e,t),this.entered=[],this.exited=[],this.stayedIn=new a,this.visited=new a,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return e.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},e.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var n=this.treeChanges.get(e),r=t;if((n&&n.childList||void 0==r)&&(r=this.treeChanges.reachabilityChange(e)),r!==s.STAYED_OUT){if(this.matchabilityChange(e),r===s.ENTERED)this.entered.push(e);else if(r===s.EXITED)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(r===s.STAYED_IN){var i=s.STAYED_IN;n&&n.childList&&(n.oldParentNode!==e.parentNode?(i=s.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(i=s.REORDERED)),this.stayedIn.set(e,i)}if(r!==s.STAYED_IN)for(var o=e.firstChild;o;o=o.nextSibling)this.visitNode(o,r)}}},e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(t=n.oldParentNode);var r=this.childListChangeMap.get(t);r||(r=new u,this.childListChangeMap.set(t,r)),r.oldPrevious.has(e)||r.oldPrevious.set(e,e.previousSibling)}},e.prototype.getChanged=function(e,t,n){this.selectors=t,this.characterDataOnly=n;for(i=0;i<this.entered.length;i++){a=this.entered[i];(l=this.matchabilityChange(a))!==s.ENTERED&&l!==s.STAYED_IN||e.added.push(a)}for(var r=this.stayedIn.keys(),i=0;i<r.length;i++){a=r[i];if((l=this.matchabilityChange(a))===s.ENTERED)e.added.push(a);else if(l===s.EXITED)e.removed.push(a);else if(l===s.STAYED_IN&&(e.reparented||e.reordered)){var o=this.stayedIn.get(a);e.reparented&&o===s.REPARENTED?e.reparented.push(a):e.reordered&&o===s.REORDERED&&e.reordered.push(a)}}for(i=0;i<this.exited.length;i++){var a=this.exited[i],l=this.matchabilityChange(a);l!==s.EXITED&&l!==s.STAYED_IN||e.removed.push(a)}},e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var n=this.treeChanges.reachabilityChange(e);if(n===s.STAYED_OUT||n===s.ENTERED)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(t=n.oldParentNode);var r=this.childListChangeMap.get(t);if(!r)throw Error("getOldPreviousSibling requested on invalid node.");return r.oldPrevious.get(e)},e.prototype.getOldAttribute=function(e,t){var n=this.treeChanges.get(e);if(!n||!n.attributes)throw Error("getOldAttribute requested on invalid node.");var r=n.getAttributeOldValue(t);if(void 0===r)throw Error("getOldAttribute requested for unchanged attribute name.");return r},e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,n;if(e){t={},n={};for(o=0;o<e.length;o++)t[h=e[o]]=!0,n[h.toLowerCase()]=h}for(var r={},i=this.treeChanges.keys(),o=0;o<i.length;o++){var a=i[o],l=this.treeChanges.get(a);if(l.attributes&&(s.STAYED_IN===this.treeChanges.reachabilityChange(a)&&s.STAYED_IN===this.matchabilityChange(a)))for(var u=a,c=l.getAttributeNamesMutated(),d=0;d<c.length;d++){var h=c[d];(!t||t[h]||l.isCaseInsensitive&&n[h])&&(l.getAttributeOldValue(h)!==u.getAttribute(h)&&(n&&l.isCaseInsensitive&&(h=n[h]),r[h]=r[h]||[],r[h].push(u)))}}return r},e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],n=0;n<e.length;n++){var r=e[n];if(s.STAYED_IN===this.treeChanges.reachabilityChange(r)){var i=this.treeChanges.get(r);i.characterData&&r.textContent!=i.characterDataOldValue&&t.push(r)}}return t},e.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new a);var n=this.matchCache[e.uid],r=n.get(t);return void 0===r&&(r=e.matchabilityChange(t,this.treeChanges.get(t)),n.set(t,r)),r},e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return s.STAYED_IN;default:return s.STAYED_OUT}if(!this.selectors)return s.STAYED_IN;if(e.nodeType!==Node.ELEMENT_NODE)return s.STAYED_OUT;for(var n=e,r=this.selectors.map(function(e){return t.computeMatchabilityChange(e,n)}),i=s.STAYED_OUT,o=0;i!==s.STAYED_IN&&o<r.length;){switch(r[o]){case s.STAYED_IN:i=s.STAYED_IN;break;case s.ENTERED:i=i===s.EXITED?s.STAYED_IN:s.ENTERED;break;case s.EXITED:i=i===s.ENTERED?s.STAYED_IN:s.EXITED}o++}return i},e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new u,this.childListChangeMap.set(e,t)),t},e.prototype.processChildlistChanges=function(){if(!this.childListChangeMap){this.childListChangeMap=new a;for(var e=0;e<this.mutations.length;e++){var t=this.mutations[e];if("childList"==t.type&&(this.treeChanges.reachabilityChange(t.target)===s.STAYED_IN||this.calcOldPreviousSibling)){for(var n=this.getChildlistChange(t.target),r=t.previousSibling,i=function(e,t){!e||n.oldPrevious.has(e)||n.added.has(e)||n.maybeMoved.has(e)||t&&(n.added.has(t)||n.maybeMoved.has(t))||n.oldPrevious.set(e,t)},o=0;o<t.removedNodes.length;o++)i(l=t.removedNodes[o],r),n.added.has(l)?n.added.delete(l):(n.removed.set(l,!0),n.maybeMoved.delete(l)),r=l;i(t.nextSibling,r);for(o=0;o<t.addedNodes.length;o++){var l=t.addedNodes[o];n.removed.has(l)?(n.removed.delete(l),n.maybeMoved.set(l,!0)):n.added.set(l,!0)}}}}},e.prototype.wasReordered=function(e){function t(e){if(!e)return!1;if(!s.maybeMoved.has(e))return!1;var t=s.moved.get(e);return void 0!==t?t:(l.has(e)?t=!0:(l.set(e,!0),t=r(e)!==n(e)),l.has(e)?(l.delete(e),s.moved.set(e,t)):t=s.moved.get(e),t)}function n(e){var r=u.get(e);if(void 0!==r)return r;for(r=s.oldPrevious.get(e);r&&(s.removed.has(r)||t(r));)r=n(r);return void 0===r&&(r=e.previousSibling),u.set(e,r),r}function r(e){if(c.has(e))return c.get(e);for(var n=e.previousSibling;n&&(s.added.has(n)||t(n));)n=n.previousSibling;return c.set(e,n),n}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var i=e.parentNode,o=this.treeChanges.get(e);o&&o.oldParentNode&&(i=o.oldParentNode);var s=this.childListChangeMap.get(i);if(!s)return!1;if(s.moved)return s.moved.get(e);s.moved=new a;var l=new a,u=new a,c=new a;return s.maybeMoved.keys().forEach(t),s.moved.get(e)},e}(),h=function(){function e(e,t){var n=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element||t.characterData?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var r=t.attribute?[t.attribute]:t.attributeList,i=e.attributeChangedNodes(r);t.attribute?this.valueChanged=i[t.attribute]||[]:(this.attributeChanged=i,t.attributeList&&t.attributeList.forEach(function(e){n.attributeChanged.hasOwnProperty(e)||(n.attributeChanged[e]=[])}))}if(t.all||t.characterData){var o=e.getCharacterDataChanged();t.characterData?this.valueChanged=o:this.characterDataChanged=o}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}return e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)},e}();e.Summary=h;var p=/[a-zA-Z_]+/,f=/[a-zA-Z0-9_\-]+/,m=function(){function e(){}return e.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),n=0;n<t.length;n++)if(this.attrValue===t[n])return!0;return!1},e.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+t(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+t(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},e}(),g=function(){function e(){this.uid=e.nextUid++,this.qualifiers=[]}return Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)},e.prototype.wasMatching=function(e,t,n){if(!t||!t.attributes)return n;var r=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==r&&r!==e.tagName)return!1;for(var i=[],o=!1,a=0;a<this.qualifiers.length;a++){var s=this.qualifiers[a],l=t.getAttributeOldValue(s.attrName);i.push(l),o=o||void 0!==l}if(!o)return n;for(a=0;a<this.qualifiers.length;a++){s=this.qualifiers[a];if(void 0===(l=i[a])&&(l=e.getAttribute(s.attrName)),!s.matches(l))return!1}return!0},e.prototype.matchabilityChange=function(e,t){var n=this.isMatching(e);return n?this.wasMatching(e,t,n)?s.STAYED_IN:s.ENTERED:this.wasMatching(e,t,n)?s.EXITED:s.STAYED_OUT},e.parseSelectors=function(t){function n(){i&&(o&&(i.qualifiers.push(o),o=void 0),s.push(i)),i=new e}function r(){o&&i.qualifiers.push(o),o=new m}for(var i,o,a,s=[],l=/\s/,u="Invalid or unsupported selector syntax.",c=1,d=0;d<t.length;){var h=t[d++];switch(c){case 1:if(h.match(p)){n(),i.tagName=h,c=2;break}if("*"==h){n(),i.tagName="*",c=3;break}if("."==h){n(),r(),i.tagName="*",o.attrName="class",o.contains=!0,c=4;break}if("#"==h){n(),r(),i.tagName="*",o.attrName="id",c=4;break}if("["==h){n(),r(),i.tagName="*",o.attrName="",c=6;break}if(h.match(l))break;throw Error(u);case 2:if(h.match(f)){i.tagName+=h;break}if("."==h){r(),o.attrName="class",o.contains=!0,c=4;break}if("#"==h){r(),o.attrName="id",c=4;break}if("["==h){r(),o.attrName="",c=6;break}if(h.match(l)){c=14;break}if(","==h){c=1;break}throw Error(u);case 3:if("."==h){r(),o.attrName="class",o.contains=!0,c=4;break}if("#"==h){r(),o.attrName="id",c=4;break}if("["==h){r(),o.attrName="",c=6;break}if(h.match(l)){c=14;break}if(","==h){c=1;break}throw Error(u);case 4:if(h.match(p)){o.attrValue=h,c=5;break}throw Error(u);case 5:if(h.match(f)){o.attrValue+=h;break}if("."==h){r(),o.attrName="class",o.contains=!0,c=4;break}if("#"==h){r(),o.attrName="id",c=4;break}if("["==h){r(),c=6;break}if(h.match(l)){c=14;break}if(","==h){c=1;break}throw Error(u);case 6:if(h.match(p)){o.attrName=h,c=7;break}if(h.match(l))break;throw Error(u);case 7:if(h.match(f)){o.attrName+=h;break}if(h.match(l)){c=8;break}if("~"==h){o.contains=!0,c=9;break}if("="==h){o.attrValue="",c=11;break}if("]"==h){c=3;break}throw Error(u);case 8:if("~"==h){o.contains=!0,c=9;break}if("="==h){o.attrValue="",c=11;break}if("]"==h){c=3;break}if(h.match(l))break;throw Error(u);case 9:if("="==h){o.attrValue="",c=11;break}throw Error(u);case 10:if("]"==h){c=3;break}if(h.match(l))break;throw Error(u);case 11:if(h.match(l))break;if('"'==h||"'"==h){a=h,c=13;break}o.attrValue+=h,c=12;break;case 12:if(h.match(l)){c=10;break}if("]"==h){c=3;break}if("'"==h||'"'==h)throw Error(u);o.attrValue+=h;break;case 13:if(h==a){c=10;break}o.attrValue+=h;break;case 14:if(h.match(l))break;if(","==h){c=1;break}throw Error(u)}}switch(c){case 1:case 2:case 3:case 5:case 14:n();break;default:throw Error(u)}if(!s.length)throw Error(u);return s},e.nextUid=1,e.matchesSelector=function(){var e=document.createElement("div");return"function"==typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector"}(),e}(),v=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,y=function(){function e(t){var n=this;this.connected=!1,this.options=e.validateOptions(t),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(t){return e.createQueryValidator(n.root,t)})),this.observer=new o(function(e){n.observerCallback(e)}),this.reconnect()}return e.createObserverOptions=function(e){function t(e){r.attributes&&!n||(r.attributes=!0,r.attributeOldValue=!0,e?(n=n||{},e.forEach(function(e){n[e]=!0,n[e.toLowerCase()]=!0})):n=void 0)}var n,r={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return r.characterData=!0,void(r.characterDataOldValue=!0);if(e.all)return t(),r.characterData=!0,void(r.characterDataOldValue=!0);if(e.attribute)t([e.attribute.trim()]);else{var n=i(e.elementFilter).concat(e.attributeList||[]);n.length&&t(n)}}),n&&(r.attributeFilter=Object.keys(n)),r},e.validateOptions=function(t){for(var i in t)if(!(i in e.optionKeys))throw Error("Invalid option: "+i);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var o={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]},a=0;a<t.queries.length;a++){var s=t.queries[a];if(s.all){if(Object.keys(s).length>1)throw Error("Invalid request option. all has no options.");o.queries.push({all:!0})}else if("attribute"in s){if((u={attribute:n(s.attribute)}).elementFilter=g.parseSelectors("*["+u.attribute+"]"),Object.keys(s).length>1)throw Error("Invalid request option. attribute has no options.");o.queries.push(u)}else if("element"in s){var l=Object.keys(s).length,u={element:s.element,elementFilter:g.parseSelectors(s.element)};if(s.hasOwnProperty("elementAttributes")&&(u.attributeList=r(s.elementAttributes),l--),l>1)throw Error("Invalid request option. element only allows elementAttributes option.");o.queries.push(u)}else{if(!s.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(s).length>1)throw Error("Invalid request option. characterData has no options.");o.queries.push({characterData:!0})}}return o},e.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new d(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),n=[],r=0;r<this.options.queries.length;r++)n.push(new h(t,this.options.queries[r]));return n},e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})},e.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,n){t&&t.validate(e[n])})},e.prototype.changesToReport=function(e){return e.some(function(e){return!!["added","removed","reordered","reparented","valueChanged","characterDataChanged"].some(function(t){return e[t]&&e[t].length})||!(!e.attributeChanged||!Object.keys(e.attributeChanged).some(function(t){return!!e.attributeChanged[t].length}))})},e.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},e.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e},e.NodeMap=a,e.parseElementFilter=g.parseSelectors,e.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e}();e.MutationSummary=y}(e.recorder||(e.recorder={}))}(e.video||(e.video={}))}(RC||(RC={}));var RC;!function(e){!function(e){!function(e){var t;!function(e){e[e.setBaseUrl=0]="setBaseUrl",e[e.applyDomSnapshot=1]="applyDomSnapshot",e[e.applyPointerPosition=2]="applyPointerPosition",e[e.applyPointerState=3]="applyPointerState",e[e.applyElementValueChange=4]="applyElementValueChange",e[e.applyElementCheckedChange=5]="applyElementCheckedChange",e[e.applyWindowResize=6]="applyWindowResize",e[e.applyDomScroll=7]="applyDomScroll",e[e.applyDomMutation=8]="applyDomMutation"}(t=e.VideoRecordingMessage||(e.VideoRecordingMessage={}));var n={altGlyph:0,altGlyphDef:0,altGlyphItem:0,animate:0,animateColor:0,animateMotion:0,animateTransform:0,animation:0,circle:0,clipPath:0,"color-profile":0,cursor:0,defs:0,desc:0,discard:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feDropShadow:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,"font-face":0,"font-face-format":0,"font-face-name":0,"font-face-src":0,"font-face-uri":0,foreignObject:0,g:0,glyph:0,glyphRef:0,handler:0,hatch:0,hatchpath:0,hkern:0,image:0,line:0,linearGradient:0,listener:0,marker:0,mask:0,mesh:0,meshgradient:0,meshpatch:0,meshrow:0,metadata:0,"missing-glyph":0,mpath:0,path:0,pattern:0,polygon:0,polyline:0,prefetch:0,radialGradient:0,rect:0,set:0,solidColor:0,solidcolor:0,stop:0,svg:0,switch:0,symbol:0,tbreak:0,text:0,textPath:0,title:0,tref:0,tspan:0,unknown:0,use:0,view:0,vkern:0},r=function(){function e(e,t){this.root=e,this.delegate=t,this.idMap={},this.actualPointerPosition=[0,0]}return e.prototype.setBaseUrl=function(e){var t=this.delegate;t&&t.setBaseUrl&&t.setBaseUrl(e)},e.prototype.applyPointerState=function(e){this.delegate.updatePointerState&&this.delegate.updatePointerState(this.actualPointerPosition,e,!1)},e.prototype.unApplyPointerState=function(e){this.delegate.updatePointerState&&this.delegate.updatePointerState(this.actualPointerPosition,e,!0)},e.prototype.applyPointerPosition=function(e){this.actualPointerPosition[0]+=e[0],this.actualPointerPosition[1]+=e[1],this.delegate.updatePointerPosition&&this.delegate.updatePointerPosition(this.actualPointerPosition)},e.prototype.unApplyPointerPosition=function(e){this.actualPointerPosition[0]-=e[0],this.actualPointerPosition[1]-=e[1],this.delegate.updatePointerPosition&&this.delegate.updatePointerPosition(this.actualPointerPosition)},e.prototype.applyWindowResize=function(e){this.delegate.setWindowSize&&this.delegate.setWindowSize(e.size)},e.prototype.unApplyWindowResize=function(e){this.delegate.setWindowSize&&this.delegate.setWindowSize(e.oldSize)},e.prototype.applyElementCheckedChange=function(e){this.deserializeNode(e).checked=e.checked},e.prototype.unApplyElementCheckedChange=function(e){this.deserializeNode(e).checked=e.oldChecked},e.prototype.applyElementValueChange=function(e){var t=this.deserializeNode(e);"file"===t.type&&""!==e.value||(t.value=e.value)},e.prototype.unApplyElementValueChange=function(e){var t=this.deserializeNode(e);"file"===t.type&&""!==e.oldValue||(t.value=e.oldValue)},e.prototype.applyDomSnapshot=function(e,t,n){this.idMap[e]=this.root;for(var r=0;r<t.length;r++)this.deserializeNode(t[r],this.root);this.applyWindowResize({size:n})},e.prototype.getPageScrollingElement=function(){var e=this.getDocument();return e.scrollingElement||e.documentElement},e.prototype.applyDomScroll=function(e){var t=e.isPageScroll?this.getPageScrollingElement():this.deserializeNode(e);t.scrollLeft=e.scrollPosition[0],t.scrollTop=e.scrollPosition[1]},e.prototype.unApplyDomScroll=function(e){var t=e.isPageScroll?this.getPageScrollingElement():this.deserializeNode(e);t.scrollLeft=e.oldScrollPosition[0],t.scrollTop=e.oldScrollPosition[1]},e.prototype.applyDomMutation=function(e,t,n,r){var i=this,o=this;e.forEach(function(e){e.previousSibling&&e.previousSibling.nodeType&&o.deserializeNode(e.previousSibling)}),t.forEach(function(e){var t=i.deserializeNode(e);i.deserializeNode(e.parentNode),i.deserializeNode(e.previousSibling);t.parentNode&&t.parentNode.removeChild(t)}),e.forEach(function(e){var t=i.deserializeNode(e);t.parentNode&&t.parentNode.removeChild(t)}),t.forEach(function(e){var t=i.deserializeNode(e),n=i.deserializeNode(e.parentNode),r=i.deserializeNode(e.previousSibling);n.insertBefore(t,r?r.nextSibling:n.firstChild)}),n.forEach(function(e){var t=i.deserializeNode(e);Object.keys(e.attributes).forEach(function(n){var r=e.attributes[n];null===r?t.removeAttribute(n):i.delegate&&i.delegate.setAttribute&&i.delegate.setAttribute(t,n,r)||t.setAttribute(n,r)})}),r.forEach(function(e){i.deserializeNode(e).textContent=e.textContent})},e.prototype.unApplyDomMutation=function(e,t,n,r){var i=this;r.forEach(function(e){i.deserializeNode(e).textContent=e.oldTextContent}),n.forEach(function(e){var t=i.deserializeNode(e);Object.keys(e.oldValues).forEach(function(n){var r=e.oldValues[n];null===r?t.removeAttribute(n):i.delegate&&i.delegate.setAttribute&&i.delegate.setAttribute(t,n,r)||t.setAttribute(n,r)})}),t.forEach(function(e){var t=i.deserializeNode(e);if(e.oldParentNode)i.deserializeNode(e.oldParentNode);if(e.oldPreviousSibling)i.deserializeNode(e.oldPreviousSibling);t.parentNode&&t.parentNode.removeChild(t)}),t.forEach(function(e){var t=i.deserializeNode(e);if(e.oldParentNode){var n=i.deserializeNode(e.oldParentNode),r=i.deserializeNode(e.oldPreviousSibling);n.insertBefore(t,r?r.nextSibling:n.firstChild)}}),e.forEach(function(e){var t=i.deserializeNode(e),n=i.deserializeNode(e.oldParentNode),r=i.deserializeNode(e.oldPreviousSibling);n.insertBefore(t,r?r.nextSibling:n.firstChild)})},e.prototype.getDocument=function(){var e=this.root.ownerDocument;return null===e&&(e=this.root),e},e.prototype.deserializeNode=function(e,t){var r=this;if(null===e)return null;var i=this.idMap[e.id];if(i)return i;var o=this.getDocument();switch(e.nodeType){case Node.COMMENT_NODE:i=o.createComment(e.textContent);break;case Node.TEXT_NODE:i=o.createTextNode(e.textContent);break;case Node.DOCUMENT_TYPE_NODE:i=o.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Node.ELEMENT_NODE:var a=e.tagName.toLowerCase()in n;this.delegate&&this.delegate.createElement&&(i=this.delegate.createElement(e.tagName)),i||(i=a?o.createElementNS("http://www.w3.org/2000/svg",e.tagName):o.createElement(e.tagName)),Object.keys(e.attributes).forEach(function(t){if(!r.delegate||!r.delegate.setAttribute||!r.delegate.setAttribute(i,t,e.attributes[t]))try{i.setAttribute(t,e.attributes[t])}catch(e){console.error(e)}})}if(!i)throw new Error("deserializeNode failed");if(this.idMap[e.id]=i,e.childNodes)for(var s=0;s<e.childNodes.length;s++)this.deserializeNode(e.childNodes[s],i);var l=e.scrollPosition;if(l){var u=i;u.scrollLeft=l[0],u.scrollTop=l[1]}var c=e.value;null!=c&&(i.value=c);var d=e.checked;return null!=d&&(i.checked=d),t&&t.appendChild(i),i},e.prototype.playSingleFrame=function(e){var n=this,r=t[e[0]],i=e.slice(2);return n[r].apply(n,i),!0},e.prototype.unPlaySingleFrame=function(e){var n=this,r=t[e[0]],i=e.slice(2);if(r="applyDomMutation"==r?"unApplyDomMutation":"applyDomScroll"==r?"unApplyDomScroll":"applyWindowResize"==r?"unApplyWindowResize":"applyElementValueChange"==r?"unApplyElementValueChange":"applyElementCheckedChange"==r?"unApplyElementCheckedChange":"applyPointerPosition"==r?"unApplyPointerPosition":"applyPointerState"==r?"unApplyPointerState":null)return n[r].apply(n,i),!0},e.prototype.playFrames=function(e){e.map(this.playSingleFrame.bind(this))},e.prototype.clearDocument=function(e){for(;e.firstChild;)e.removeChild(e.firstChild);this.idMap={},this.actualPointerPosition=[0,0]},e}();e.TreeMirrorConsumer=r;var i=function(){function n(t,n,r){var i=this;this.target=t,this.mirror=n,this.propertyChangeCheckerInterval=500,this.nextId=1,this.knownNodes=new e.MutationSummary.NodeMap,this.actualScrollPositions=new e.MutationSummary.NodeMap,this.actualValues=new e.MutationSummary.NodeMap,this.actualChecked=new e.MutationSummary.NodeMap,this.actualPointerPosition=[0,0],this.target=t;var o=this.getWindow(),a=(this.getDocument(),Boolean(o.PointerEvent)),s=Boolean(o.MSPointerEvent);this.eventsMap=a?{down:"pointerdown",up:"pointerup",move:"pointermove",over:"pointerover",out:"pointerout"}:s?{down:"MSPointerDown",up:"MSPointerUp",move:"MSPointerMove",over:"MSPointerOver",out:"MSPointerOut"}:{down:"mousedown",up:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout"},this.supportsPointerEvents=a||s,this.startedAt=Date.now(),this.mirror.onVideoFrameAvailable(this.annotateFrame("setBaseUrl",[(n.baseUrl||this.getWindow().location.href).match(/^(.*\/)[^\/]*$/)[1]])),this.connect(),this.overridePropertySetter(HTMLInputElement.prototype,"value"),this.overridePropertySetter(HTMLInputElement.prototype,"checked"),this.overridePropertySetter(HTMLSelectElement.prototype,"value"),this.overridePropertySetter(HTMLOptionElement.prototype,"value"),this.overridePropertySetter(HTMLTextAreaElement.prototype,"value");var l=[{all:!0}];r&&(l=l.concat(r)),this.mutationSummary=new e.MutationSummary({oldPreviousSibling:!0,rootNode:t,callback:function(e){i.onDomMutation(e)},queries:l})}return n.prototype.overridePropertySetter=function(e,t){var n=this,r=Object.getOwnPropertyDescriptor(e,t),i=r.set;r.set=function(e){i.apply(this,arguments),n.isConnected()&&n.onInputPropertyChange(this)},Object.defineProperty(e,t,r)},n.prototype.connect=function(){if(!this.isConnected()){var e=this.getWindow(),t=this.getDocument();this.mutationSummary&&this.mutationSummary.reconnect(),this.doDomSnapshot(this.target),t.addEventListener("scroll",this.domScrollListener=this.onDomScroll.bind(this),!0),t.addEventListener("input",this.domInputListener=this.onDomInput.bind(this),!0),t.addEventListener("change",this.domChangeListener=this.onDomInput.bind(this),!0),e.addEventListener("resize",this.windowResizeListener=this.onWindowResize.bind(this),!0),this.startTrackingPointer()}},n.prototype.disconnect=function(){if(this.isConnected()){this.flushPendingMutations(),this.mutationSummary.disconnect();var e=this.getWindow(),t=this.getDocument();t.removeEventListener("scroll",this.domScrollListener,!0),t.removeEventListener("input",this.domInputListener,!0),t.removeEventListener("change",this.domChangeListener,!0),e.removeEventListener("resize",this.windowResizeListener,!0),this.stopTrackingPointer()}},n.prototype.isConnected=function(){return this.mutationSummary&&this.mutationSummary.connected},n.prototype.getNormalizedEventName=function(e){var t=this.eventsMap;for(var n in t)if(t[n]==e)return n;return e},n.prototype.forEachPointerPositionEvent=function(e){var t=this,n=this.getDocument(),r=this.eventsMap;["move","over","out"].forEach(function(i){e.call(t,r[i]||i,n)})},n.prototype.forEachPointerStateEvent=function(e){var t=this,n=this.getDocument(),r=this.eventsMap;["down","up","click","contextmenu"].forEach(function(i){e.call(t,r[i]||i,n)})},n.prototype.startTrackingPointer=function(){var e=this;this.pointerPositionEventsListener=this.createThrottled(this.onPointerMoveEvent,this,100),this.forEachPointerPositionEvent(function(t,n){n.addEventListener(t,e.pointerPositionEventsListener,!0)}),this.pointerStateEventsListener=this.onPointerStateEvent.bind(this),this.forEachPointerStateEvent(function(t,n){n.addEventListener(t,e.pointerStateEventsListener,!0)})},n.prototype.stopTrackingPointer=function(){var e=this;this.forEachPointerPositionEvent(function(t,n){n.removeEventListener(t,e.pointerPositionEventsListener,!0)}),this.forEachPointerStateEvent(function(t,n){n.removeEventListener(t,e.pointerStateEventsListener,!0)})},n.prototype.onInputPropertyChange=function(e){var t=!1,n=(e.getAttribute("type")||"").toLowerCase();if("checkbox"==n||"radio"==n){var r=this.actualChecked.get(e);null!=r&&r==e.checked||(t||(this.flushPendingMutations(),t=!0),this.handleElementCheckedChange(e))}else{var i=this.actualValues.get(e);null!=i&&i==e.value||(t||(this.flushPendingMutations(),t=!0),this.handleElementValueChange(e))}},n.prototype.doDomSnapshot=function(e){for(var t=this.serializeNode(e).id,n=[],r=e.firstChild;r;r=r.nextSibling)n.push(this.serializeNode(r,!0));this.actualWindowSize=this.getWindowSize(),this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomSnapshot",[t,n,this.actualWindowSize]))},n.prototype.getWindowSize=function(){var e=this.getWindow(),t=e.document;return{width:e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,height:e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}},n.prototype.getDocument=function(){var e=this.target.ownerDocument;return null===e&&(e=this.target),e},n.prototype.getWindow=function(){return this.getDocument().defaultView},n.prototype.annotateFrame=function(e,n){var r=[t[e],Date.now()-this.startedAt];return r.push.apply(r,n),r},n.prototype.onPointerMoveEvent=function(e){var t=e.clientX-this.actualPointerPosition[0],n=e.clientY-this.actualPointerPosition[1];0==t&&0==n||(this.mirror.onVideoFrameAvailable(this.annotateFrame("applyPointerPosition",[[t,n]])),this.actualPointerPosition[0]=e.clientX,this.actualPointerPosition[1]=e.clientY)},n.prototype.onPointerStateEvent=function(e){this.onPointerMoveEvent(e),this.mirror.onVideoFrameAvailable(this.annotateFrame("applyPointerState",[this.getNormalizedEventName(e.type),this.getSimplifiedSelector(e.target)]))},n.prototype.flushPendingMutations=function(){var e=this.mutationSummary.takeSummaries();e&&this.onDomMutation(e)},n.prototype.onDomInput=function(e){this.flushPendingMutations(),this.handleElementValueChange(e.target)},n.prototype.handleElementValueChange=function(e){var t=this.serializeNode(e),n=e.value,r=this.actualValues.get(e);t.value=n,t.oldValue=null!=r?r:"",this.mirror.onVideoFrameAvailable(this.annotateFrame("applyElementValueChange",[t,this.getSimplifiedSelector(e)])),this.actualValues.set(e,n)},n.prototype.handleElementCheckedChange=function(e){var t=this.serializeNode(e),n=e.checked,r=this.actualChecked.get(e);t.checked=n,t.oldChecked=null!=r&&r,this.mirror.onVideoFrameAvailable(this.annotateFrame("applyElementCheckedChange",[t])),this.actualChecked.set(e,n)},n.prototype.onWindowResize=function(e){this.flushPendingMutations();var t=this.getWindowSize();this.mirror.onVideoFrameAvailable(this.annotateFrame("applyWindowResize",[{size:t,oldSize:this.actualWindowSize}])),this.actualWindowSize=t},n.prototype.onDomScroll=function(e){this.flushPendingMutations();var t,n=this.getDocument(),r=e.target,i=!1;r==n?(i=!0,t=n.scrollingElement?n.scrollingElement:n.documentElement):t=r;var o=this.serializeNode(t),a=this.actualScrollPositions.get(t);o.scrollPosition=[t.scrollLeft,t.scrollTop],o.oldScrollPosition=a||[0,0],o.isPageScroll=i,this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomScroll",[o])),this.actualScrollPositions.set(t,o.scrollPosition)},n.prototype.rememberNode=function(e){var t=this.nextId++;return this.knownNodes.set(e,t),t},n.prototype.forgetNode=function(e){this.knownNodes.delete(e),this.actualValues.delete(e),this.actualChecked.delete(e),this.actualScrollPositions.delete(e)},n.prototype.serializeNode=function(e,t){if(null===e)return null;var n=this.knownNodes.get(e);if(void 0!==n)return{id:n};var r={id:this.rememberNode(e),nodeType:e.nodeType};switch(r.nodeType){case Node.DOCUMENT_TYPE_NODE:var i=e;r.name=i.name,r.publicId=i.publicId,r.systemId=i.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:r.textContent=e.textContent;break;case Node.ELEMENT_NODE:var o=e;r.tagName=o.tagName,r.attributes={},0==o.scrollLeft&&0==o.scrollTop||(r.scrollPosition=[o.scrollLeft,o.scrollTop],this.actualScrollPositions.set(e,r.scrollPosition));var a=o.value;null!=a&&(r.value=String(a),this.actualValues.set(e,r.value));var s=o.checked;null!=s&&(r.checked=s,this.actualChecked.set(e,s));for(var l=0;l<o.attributes.length;l++){var u=o.attributes[l];r.attributes[u.name]=u.value}if(t&&o.childNodes.length){r.childNodes=[];for(var c=o.firstChild;c;c=c.nextSibling)r.childNodes.push(this.serializeNode(c,!0))}}return r},n.prototype.serializeNodeWithPositionData=function(e,t,n){var r=this.serializeNode(e);return r.previousSibling=this.serializeNode(e.previousSibling),n&&(r.oldPreviousSibling=this.serializeNode(t.getOldPreviousSibling(e))),r.parentNode=this.serializeNode(e.parentNode),n&&(r.oldParentNode=this.serializeNode(t.getOldParentNode(e))),r},n.prototype.serializeAddedAndMoved=function(t){var n=this,r=t.added,i=t.reparented,o=t.reordered,a=new e.MutationSummary.NodeMap;r.forEach(function(e){return a.set(e,!0)});var s=r.concat(i).concat(o),l=new e.MutationSummary.NodeMap;s.forEach(function(t){var n=t.parentNode,r=l.get(n);r||(r=new e.MutationSummary.NodeMap,l.set(n,r)),r.set(t,!0)});var u=[];return l.keys().forEach(function(e){for(var r=l.get(e),i=r.keys();i.length;){for(var o=i[0];o.previousSibling&&r.has(o.previousSibling);)o=o.previousSibling;for(;o&&r.has(o);){var s=n.serializeNodeWithPositionData(o,t,!a.has(o));u.push(s),r.delete(o),o=o.nextSibling}i=r.keys()}}),u},n.prototype.serializeAttributeChanges=function(t){var n=this,r=t.attributeChanged,i=new e.MutationSummary.NodeMap;return Object.keys(r).forEach(function(e){r[e].forEach(function(r){var o=i.get(r);o||((o=n.serializeNode(r)).attributes={},o.oldValues={},i.set(r,o)),o.attributes[e]=r.getAttribute(e),o.oldValues[e]=t.getOldAttribute(r,e)})}),i.keys().map(function(e){return i.get(e)})},n.prototype.onDomMutation=function(e){var t=this,n=e[0],r=n.removed.map(function(e){return t.serializeNodeWithPositionData(e,n,!0)}),i=this.serializeAddedAndMoved(n),o=this.serializeAttributeChanges(n),a=n.characterDataChanged.map(function(e){var r=t.serializeNode(e);return r.textContent=e.textContent,r.oldTextContent=n.getOldCharacterData(e),r});this.mirror.onVideoFrameAvailable(this.annotateFrame("applyDomMutation",[r,i,o,a])),n.removed.forEach(function(e){t.forgetNode(e)})},n.prototype.getSimplifiedSelector=function(e){for(var t=[],n=e;n&&n!=this.target;n=n.parentNode){if(e.getAttribute("id")){t.push("#"+e.getAttribute("id"));break}var r=String(n.className||"").split(" ");1!=r.length||r[0]||(r.length=0),r.length=Math.min(r.length,3);var i=String(n.tagName||"NOTAG").toUpperCase();t.unshift(i+(r.length?"."+r.join("."):""))}return t.join(" > ")},n.prototype.createThrottled=function(e,t,n){var r,i,o=-1/0;return function(){r=arguments;var a=Date.now(),s=a-o;s>=n?(o=a,e.apply(t,r),i&&clearTimeout(i),i=null):i||(i=setTimeout(function(){i=null,o=Date.now(),e.apply(t,r)},n-s))}},n}();e.TreeMirrorProducer=i}(e.recorder||(e.recorder={}))}(e.video||(e.video={}))}(RC||(RC={})),window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Uuid={chars:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),uuid:function(){for(var e,t=this.chars,n=new Array(36),r=0,i=0;i<36;i++)8==i||13==i||18==i||23==i?n[i]="-":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19==i?3&e|8:e]);return n.join("")}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.video=RC.video||{},RC.video.CanRecordVideo={recordSessionVideo:!1,processVideoFrameFn:null,mirrorProducer:null,videoBaseUrl:null,videoData:null,socket:null,sessionUuid:null,connectAttempts:0,maxConnectAttempts:10,connectAttemptInterval:3e3,start:function(){var e=this;window.MutationObserver||window.WebKitMutationObserver||(e.recordSessionVideo=!1),e.recordSessionVideo&&e.startVideoRecording(),this.SUPER()},stop:function(){var e=this;e.recordSessionVideo&&e.stopVideoRecording(),this.SUPER()},startVideoRecording:function(){var e=this;window.MutationObserver||window.WebKitMutationObserver?e.mirrorProducer?e.mirrorProducer.connect():(e.sessionUuid=RC.util.Uuid.uuid(),e.videoData=[],e.allVideoData=[],e.connectToWebSocketServer(),e.mirrorProducer=new RC.video.recorder.TreeMirrorProducer(document,{onVideoFrameAvailable:e.onVideoFrameAvailable.bind(this),baseUrl:e.videoBaseUrl})):e.logToConsole("Video recording not supported in this browser")},stopVideoRecording:function(){var e=this;e.mirrorProducer&&(e.mirrorProducer.disconnect(),e.socket&&e.socket.readyState===WebSocket.OPEN&&e.socket.close())},onVideoFrameAvailable:function(e){this.processVideoFrameFn&&this.processVideoFrameFn(e),this.supportOffline&&this.allVideoData.push(e),this.socket&&this.socket.readyState==WebSocket.OPEN?this.socket.send(JSON.stringify([e])):this.videoData.push(e)},connectToWebSocketServer:function(){try{this.connectAttempts++;var e=RC.Logger.prototype.baseUrl.replace(/^https?:\/\/([^/]+).*/,"wss://$1/wss/"),t=this.socket=new WebSocket(e);t.addEventListener("open",this.onWebSocketOpen.bind(this)),t.addEventListener("close",this.onWebSocketClosed.bind(this))}catch(e){console.log("Could not not connect to RootCause websocket server"),this.reConnectToWebSocketServerAfterDelay()}},reConnectToWebSocketServerAfterDelay:function(){if(this.connectAttempts<=this.maxConnectAttempts){var e=this;setTimeout(function(){e.connectToWebSocketServer()},this.connectAttemptInterval)}},onWebSocketOpen:function(e){this.videoData.length&&(this.socket.send(JSON.stringify([["initSession",0,this.applicationId,this.sessionUuid]])),this.socket.send(JSON.stringify(this.videoData)),this.videoData=[])},onWebSocketClosed:function(e){1e3!=e.code&&this.reConnectToWebSocketServerAfterDelay()},collectCrashData:function(e,t){var n=this;this.SUPER(e,function(e){e.sessionUuid=n.sessionUuid,e.mayHaveVideo=Boolean(n.sessionUuid),t.call(n,e)})}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.mixin=RC.mixin||{},RC.mixin.Screenshot={captureScreenshot:!1,screenshots:[],blurredNodes:null,blackoutSelector:null,onBeforeScreenshot:null,onAfterScreenshot:null,screenshot:function(e,t,n){var r=this;r.onBeforeScreenshot&&r.onBeforeScreenshot(),r.blurTargets();try{r.doScreenshot(e,t,n)}catch(e){if(r.debug)throw e;this.addLogEntry({type:"error",message:e.message+" - "+e.stack}),r.clearBlurTargets(),r.onAfterScreenshot&&r.onAfterScreenshot(),t&&t.call(r,null,e)}},doScreenshot:function(e,t,n){var r=this;r.isElectron?require("electron").remote.getCurrentWebContents().capturePage(function(t){var i=t.toDataURL("image/png"),o=new Image;o.src=t.toDataURL();var a=document.createElement("canvas");a.width=o.width,a.height=o.height,a.getContext("2d").drawImage(o,0,0),n&&r.injectMarker(a),r.clearBlurTargets(),r.onAfterScreenshot&&r.onAfterScreenshot(),e&&e.call(r,i)}):html2canvas(r.getDocument().body,{type:"view",onrendered:function(t){n&&r.injectMarker(t);var i=t.toDataURL("image/png");r.clearBlurTargets(),r.onAfterScreenshot&&r.onAfterScreenshot(),e&&e.call(r,i)}})},injectMarker:function(e){if(this.recorder&&this.recorder.getLastEvent()){var t=this.recorder.getLastEvent();if(t){var n=this.recorder.getRecordedEvents(),r=n[n.length-2];r&&0===t.x&&0===t.y&&"click"===t.type&&r.type.match("key")&&(t=r);var i=t.type;if(/^key/.test(t.type)&&"string"==typeof t.rawEvent.key&&(i=i+" - "+t.rawEvent.key),"number"==typeof t.x){var o=Math.max(t.x,10),a=Math.max(t.y,30);this.drawCrosshair(e,o,a),this.drawText(e,"{ "+i+" }",o+20,a-30)}else{var s=t.target.getBoundingClientRect(),l=s.top;this.drawBox(e,s),l=l>30?s.top-30:s.bottom+5,this.drawText(e,"{ "+i+" }",s.left,l)}}}},drawCrosshair:function(e,t,n){var r=e.getContext("2d"),i=document.scrollingElement||document.documentElement,o=t-i.scrollLeft,a=n-i.scrollTop;r.lineWidth=2,r.strokeStyle="#8b0000",r.beginPath(),r.arc(o,a,15,0,2*Math.PI,!1),r.stroke(),r.moveTo(o-19,a),r.lineTo(o-11,a),r.moveTo(o+11,a),r.lineTo(o+19,a),r.moveTo(o,a-19),r.lineTo(o,a-11),r.moveTo(o,a+11),r.lineTo(o,a+19),r.stroke()},drawBox:function(e,t){var n=e.getContext("2d"),r=document.scrollingElement||document.documentElement;n.lineWidth=2,n.strokeStyle="#8b0000",n.strokeRect(t.left-r.scrollLeft,t.top-r.scrollTop,t.width,t.height)},drawText:function(e,t,n,r){var i=e.getContext("2d"),o=document.scrollingElement||document.documentElement,a=n-o.scrollLeft,s=r-o.scrollTop;i.lineWidth=2,i.strokeStyle="#fff",i.font="normal 14pt monospace",i.textBaseline="top",i.fillStyle="#fff";var l=i.measureText(t).width;i.fillRect(a,s,l,parseInt(i.font,10)+3),i.fillStyle="#8b0000",i.fillText(t,a,s)},blurTargets:function(){var e=this.blackoutSelector;if(e)try{(this.blurredNodes=this.getDocument().querySelectorAll(e)).forEach(function(e){e.oldCssText=e.style.cssText,e.style.cssText="visibility:hidden !important"})}catch(e){if(this.debug)throw e;this.logToConsole(e)}},clearBlurTargets:function(){var e=this.blurredNodes||[];try{e.forEach(function(e){e.style.cssText=e.oldCssText,delete e.oldCssText})}catch(e){if(this.debug)throw e;this.logToConsole(e)}this.blurredNodes=null},reset:function(){this.screenshots=[],this.SUPER()},collectCrashData:function(e,t){var n=this,r="siesta-recorder"===n.applicationId&&!location.href.match("bryntum.com");this.SUPER(e,function(e){if(r||!n.captureScreenshot&&!e.isFeedback)t.call(n,e);else{n.pause();var i=function(r){n.resume(),r&&(n.screenshots.push(r),e.screenshot=r),t.call(n,e)};n.screenshot(i,i,!e.isFeedback)}})},onLogCompleted:function(){return this.screenshots=[],this.SUPER.apply(this,arguments)}},function(e){window.pakoForTheRootCause=e()}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],2:[function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,o,a,l=t||e.length,u=new Array(2*l);for(i=0,n=0;n<l;)if((o=e[n++])<128)u[i++]=o;else if((a=s[o])>4)u[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<l;)o=o<<6|63&e[n++],a--;a>1?u[i++]=65533:o<65536?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return r(u,i)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],4:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],5:[function(e,t,n){"use strict";function r(e,t){return e.msg=T[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(x.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){R._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,x.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=P(e.adler,t,i,n):2===e.state.wrap&&(e.adler=M(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function d(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-re?e.strstart-(e.w_size-re):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+ne,p=u[o+a-1],f=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+a]===f&&u[n+a-1]===p&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<h);if(r=ne-(h-o),o=h-ne,r>a){if(e.match_start=t,a=r,r>=s)break;p=u[o+a-1],f=u[o+a]}}}while((t=d[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function h(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-re)){x.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=te)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+te-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<te)););}while(e.lookahead<re&&0!==e.strm.avail_in)}function p(e,t){for(var n,r;;){if(e.lookahead<re){if(h(e),e.lookahead<re&&t===k)return he;if(0===e.lookahead)break}if(n=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-re&&(e.match_length=d(e,n)),e.match_length>=te)if(r=R._tr_tally(e,e.strstart-e.match_start,e.match_length-te),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=te){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=R._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=e.strstart<te-1?e.strstart:te-1,t===_?(s(e,!0),0===e.strm.avail_out?fe:me):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:pe}function f(e,t){for(var n,r,i;;){if(e.lookahead<re){if(h(e),e.lookahead<re&&t===k)return he;if(0===e.lookahead)break}if(n=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=te-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-re&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===U||e.match_length===te&&e.strstart-e.match_start>4096)&&(e.match_length=te-1)),e.prev_length>=te&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-te,r=R._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-te),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=te-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return he}else if(e.match_available){if((r=R._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return he}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=R._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<te-1?e.strstart:te-1,t===_?(s(e,!0),0===e.strm.avail_out?fe:me):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:pe}function m(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=ne){if(h(e),e.lookahead<=ne&&t===k)return he;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=te&&e.strstart>0&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+ne;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=ne-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=te?(n=R._tr_tally(e,1,e.match_length-te),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=R._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===_?(s(e,!0),0===e.strm.avail_out?fe:me):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:pe}function g(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===k)return he;break}if(e.match_length=0,n=R._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===_?(s(e,!0),0===e.strm.avail_out?fe:me):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:pe}function v(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=S[e.level].max_lazy,e.good_match=S[e.level].good_length,e.nice_match=S[e.level].nice_length,e.max_chain_length=S[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=te-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new x.Buf16(2*Z),this.dyn_dtree=new x.Buf16(2*(2*Y+1)),this.bl_tree=new x.Buf16(2*(2*K+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new x.Buf16(ee+1),this.heap=new x.Buf16(2*$+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new x.Buf16(2*$+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=H,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?oe:ce,e.adler=2===t.wrap?0:1,t.last_flush=k,R._tr_init(t),I):r(e,L)}function C(e){var t=w(e);return t===I&&y(e.state),t}function E(e,t,n,i,o,a){if(!e)return L;var s=1;if(t===B&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>J||n!==Q||i<8||i>15||t<0||t>9||a<0||a>W)return r(e,L);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+te-1)/te),l.window=new x.Buf8(2*l.w_size),l.head=new x.Buf16(l.hash_size),l.prev=new x.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new x.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,C(e)}var S,x=e("../utils/common"),R=e("./trees"),P=e("./adler32"),M=e("./crc32"),T=e("./messages"),k=0,A=1,N=3,_=4,O=5,I=0,D=1,L=-2,F=-3,z=-5,B=-1,U=1,q=2,V=3,W=4,j=0,H=2,Q=8,J=9,X=15,G=8,$=286,Y=30,K=19,Z=2*$+1,ee=15,te=3,ne=258,re=ne+te+1,ie=32,oe=42,ae=69,se=73,le=91,ue=103,ce=113,de=666,he=1,pe=2,fe=3,me=4,ge=3;S=[new v(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===k)return he;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return he;if(e.strstart-e.block_start>=e.w_size-re&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===_?(s(e,!0),0===e.strm.avail_out?fe:me):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),he)}),new v(4,4,8,4,p),new v(4,5,16,8,p),new v(4,6,32,32,p),new v(4,4,16,16,f),new v(8,16,32,32,f),new v(8,16,128,128,f),new v(8,32,128,256,f),new v(32,128,258,1024,f),new v(32,258,258,4096,f)],n.deflateInit=function(e,t){return E(e,t,Q,X,G,j)},n.deflateInit2=E,n.deflateReset=C,n.deflateResetKeep=w,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?L:(e.state.gzhead=t,I):L},n.deflate=function(e,t){var n,s,c,d;if(!e||!e.state||t>O||t<0)return e?r(e,L):L;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===de&&t!==_)return r(e,0===e.avail_out?z:L);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===oe)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=q||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=M(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ae):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=q||s.level<2?4:0),l(s,ge),s.status=ce);else{var h=Q+(s.w_bits-8<<4)<<8;h|=(s.strategy>=q||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(h|=ie),h+=31-h%31,s.status=ce,u(s,h),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===ae)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=M(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=M(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=se)}else s.status=se;if(s.status===se)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=M(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(e.adler=M(e.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.gzindex=0,s.status=le)}else s.status=le;if(s.status===le)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=M(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(e.adler=M(e.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.status=ue)}else s.status=ue;if(s.status===ue&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ce)):s.status=ce),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,I}else if(0===e.avail_in&&i(t)<=i(n)&&t!==_)return r(e,z);if(s.status===de&&0!==e.avail_in)return r(e,z);if(0!==e.avail_in||0!==s.lookahead||t!==k&&s.status!==de){var p=s.strategy===q?g(s,t):s.strategy===V?m(s,t):S[s.level].func(s,t);if(p!==fe&&p!==me||(s.status=de),p===he||p===fe)return 0===e.avail_out&&(s.last_flush=-1),I;if(p===pe&&(t===A?R._tr_align(s):t!==O&&(R._tr_stored_block(s,0,0,!1),t===N&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,I}return t!==_?I:s.wrap<=0?D:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?I:D)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==oe&&t!==ae&&t!==se&&t!==le&&t!==ue&&t!==ce&&t!==de?r(e,L):(e.state=null,t===ce?r(e,F):I):L},n.deflateSetDictionary=function(e,t){var n,r,i,a,s,l,u,c,d=t.length;if(!e||!e.state)return L;if(n=e.state,2===(a=n.wrap)||1===a&&n.status!==oe||n.lookahead)return L;for(1===a&&(e.adler=P(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new x.Buf8(n.w_size),x.arraySet(c,t,d-n.w_size,n.w_size,0),t=c,d=n.w_size),s=e.avail_in,l=e.next_in,u=e.input,e.avail_in=d,e.next_in=0,e.input=t,h(n);n.lookahead>=te;){r=n.strstart,i=n.lookahead-(te-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+te-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=te-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=te-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=s,n.wrap=a,I},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?te[e]:te[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>W-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>W-e.bi_valid,e.bi_valid+=n-W):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function d(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(o=0;o<=V;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<q;n++)(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)>f&&(o=f,m++),l[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=p&&(a=h[r-p]),s=l[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(o=f;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}function p(e,t,n){var r,i,o=new Array(V+1),a=0;for(r=1;r<=V;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function f(){var e,t,n,r,o,a=new Array(V+1);for(n=0,r=0;r<L-1;r++)for(re[r]=n,e=0;e<1<<G[r];e++)ne[n++]=r;for(ne[n-1]=r,o=0,r=0;r<16;r++)for(ie[r]=o,e=0;e<1<<$[r];e++)te[o++]=r;for(o>>=7;r<B;r++)for(ie[r]=o<<7,e=0;e<1<<$[r]-7;e++)te[256+o++]=r;for(t=0;t<=V;t++)a[t]=0;for(e=0;e<=143;)Z[2*e+1]=8,e++,a[8]++;for(;e<=255;)Z[2*e+1]=9,e++,a[9]++;for(;e<=279;)Z[2*e+1]=7,e++,a[7]++;for(;e<=287;)Z[2*e+1]=8,e++,a[8]++;for(p(Z,z+1,a),e=0;e<B;e++)ee[2*e+1]=5,ee[2*e]=c(e,5);oe=new i(Z,G,F+1,z,V),ae=new i(ee,$,0,B,V),se=new i(new Array(0),Y,0,U,j)}function m(e){var t;for(t=0;t<z;t++)e.dyn_ltree[2*t]=0;for(t=0;t<B;t++)e.dyn_dtree[2*t]=0;for(t=0;t<U;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*H]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){g(e),r&&(s(e,n),s(e,~n)),T.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function w(e,t,n){var r,i,o,s,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?u(e,i,t):(u(e,(o=ne[i])+F+1,t),0!==(s=G[o])&&l(e,i-=re[o],s),u(e,o=a(--r),n),0!==(s=$[o])&&l(e,r-=ie[o],s))}while(c<e.last_lit);u(e,H,t)}function C(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=q,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)b(e,o,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,b(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),p(o,u,e.bl_count)}function E(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*Q]++):s<=10?e.bl_tree[2*J]++:e.bl_tree[2*X]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function S(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,d=4;for(0===a&&(c=138,d=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<d)do{u(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,Q,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,J,e.bl_tree),l(e,s-3,3)):(u(e,X,e.bl_tree),l(e,s-11,7));s=0,o=i,0===a?(c=138,d=3):i===a?(c=6,d=3):(c=7,d=4)}}function x(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),C(e,e.bl_desc),t=U-1;t>=3&&0===e.bl_tree[2*K[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function R(e,t,n,r){var i;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),i=0;i<r;i++)l(e,e.bl_tree[2*K[i]+1],3);S(e,e.dyn_ltree,t-1),S(e,e.dyn_dtree,n-1)}function P(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return A;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return N;for(t=32;t<F;t++)if(0!==e.dyn_ltree[2*t])return N;return A}function M(e,t,n,r){l(e,(O<<1)+(r?1:0),3),v(e,t,n,!0)}var T=e("../utils/common"),k=4,A=0,N=1,_=2,O=0,I=1,D=2,L=29,F=256,z=F+1+L,B=30,U=19,q=2*z+1,V=15,W=16,j=7,H=256,Q=16,J=17,X=18,G=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(z+2));r(Z);var ee=new Array(2*B);r(ee);var te=new Array(512);r(te);var ne=new Array(256);r(ne);var re=new Array(L);r(re);var ie=new Array(B);r(ie);var oe,ae,se,le=!1;n._tr_init=function(e){le||(f(),le=!0),e.l_desc=new o(e.dyn_ltree,oe),e.d_desc=new o(e.dyn_dtree,ae),e.bl_desc=new o(e.bl_tree,se),e.bi_buf=0,e.bi_valid=0,m(e)},n._tr_stored_block=M,n._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===_&&(e.strm.data_type=P(e)),C(e,e.l_desc),C(e,e.d_desc),a=x(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?M(e,t,n,r):e.strategy===k||o===i?(l(e,(I<<1)+(r?1:0),3),w(e,Z,ee)):(l(e,(D<<1)+(r?1:0),3),R(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),w(e,e.dyn_ltree,e.dyn_dtree)),m(e),r&&g(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ne[n]+F+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){l(e,I<<1,3),u(e,H,Z),d(e)}},{"../utils/common":1}],8:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=a.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==d)throw new Error(l[n]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=o.deflateSetDictionary(this.strm,i))!==d)throw new Error(l[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}var o=e("./zlib/deflate"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/messages"),u=e("./zlib/zstream"),c=Object.prototype.toString,d=0,h=-1,p=0,f=8;r.prototype.push=function(e,t){var n,r,i=this.strm,l=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(l),i.next_out=0,i.avail_out=l),1!==(n=o.deflate(i,r))&&n!==d)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==r||(this.onEnd(d),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=r,n.deflate=i,n.deflateRaw=function(e,t){return t=t||{},t.raw=!0,i(e,t)},n.gzip=function(e,t){return t=t||{},t.gzip=!0,i(e,t)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")}),window.RC=window.RC||{},window.RC=RC||window.RC,RC.mixin=RC.mixin||{},RC.mixin.Offline=(RC.pako=pakoForTheRootCause,delete window.pakoForTheRootCause,{supportOffline:!1,maxItemsInLocalStorage:5,checkOnlineIntervalInSeconds:60,checkOnlineInterval:6e4,afterPageLoadRetryDelay:2e4,maxDays:7,init:function(e){var t=this;t.SUPER(e),t.queue=[],t.isRetrying=!1,t.supportOffline&&(t.loadFromLocalStorage(),setInterval(function(){t.processQueue()},t.checkOnlineInterval),setTimeout(function(){t.processQueue()},t.afterPageLoadRetryDelay),window.addEventListener("online",function(){t.processQueue()}))},getDate:function(){return(new Date).getTime()},onLogFailed:function(e,t){var n=this;if(n.supportOffline){var r;n.allVideoData&&(r=btoa(RC.pako.gzip(JSON.stringify(n.allVideoData.slice()),{to:"string"}))),n.addToQueue({url:n.logUrl,data:t,fullVideo:r,createdAt:n.getDate()})}return n.SUPER(e,t)},addToQueue:function(e){this.queue.push(e),this.saveToLocalStorage()},processQueue:function(){if(navigator.onLine){var e=this.queue[this.queue.length-1];if(e&&!this.isRetrying){this.isRetrying=!0;var t=function(){this.queue=this.queue.filter(function(t){return t!==e}),this.isRetrying=!1,this.saveToLocalStorage()}.bind(this),n=function(){this.logToConsole("Failed to send an error report. Will retry again later."),this.isRetrying=!1}.bind(this),r=function(){RC.util.Ajax.request(e.url,RC.apply(e.data,{offline:!0,fullVideo:e.fullVideo}),"POST",function(e){var r=!0;try{var i=JSON.parse(e);i&&"success"in i&&(r=i.success)}catch(e){r=!1}r?t():n()},function(e){n()})};this.isElectron?this.extractFileSources(e.data,function(){r()}):r()}}},saveToLocalStorage:function(){limitedQueue=this.queue.slice(-this.maxItemsInLocalStorage);for(var e=0;e<this.maxItemsInLocalStorage;e++){var t=limitedQueue[e],n={};RC.apply(n,t),delete n.sourceCode;var r="RC"+e;try{localStorage.setItem(r,JSON.stringify(n||null))}catch(e){this.logToConsole("Failed to save to local storage")}}},loadFromLocalStorage:function(){for(var e=0;e<this.maxItemsInLocalStorage;e++){var t,n="RC"+e;try{var r=localStorage.getItem(n);t=JSON.parse(r)}catch(e){}t&&t.createdAt<this.getDate()+1e3*this.maxDays*86400&&this.queue.push(t)}}}),function(){"use strict";function e(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function t(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=r(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function n(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=v)for(;++n<r;)t(e[n],n,e);else i(e,t)}function r(t){return t=u(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:e(t)}function i(e,t){for(var n in e)C.call(e,n)&&t(e[n],n,e)}function o(t){return null==t?e(t):E.call(t).slice(8,-1)}function a(e,t){var n=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}function s(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function l(e,t){var r=null;return n(e,function(n,i){r=t(r,n,i,e)}),r}function u(e){return String(e).replace(/^ +| +$/g,"")}function c(e){function n(t){return l(t,function(t,n){var i=n.pattern||s(n);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=r(t[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}var d=h,f=e&&"object"==typeof e&&"String"!=o(e);f&&(d=e,e=null);var m=d.navigator||{},g=m.userAgent||"";e||(e=g);var v,w,C=f||b==p,S=f?!!m.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(E.toString()),x=f?"Object":"ScriptBridgingProxyObject",R=f?"Object":"Environment",P=f&&d.java?"JavaPackage":o(d.java),M=f?"Object":"RuntimeObject",T=/\bJava/.test(P)&&d.java,k=T&&o(d.environment)==R,A=T?"a":"",N=T?"b":"",_=d.document||{},O=d.operamini||d.opera,I=y.test(I=f&&O?O["[[Class]]"]:o(O))?I:O=null,D=e,L=[],F=null,z=e==g,B=z&&O&&"function"==typeof O.version&&O.version(),U=function(t){return l(t,function(t,n){return t||RegExp("\\b"+(n.pattern||s(n))+"\\b","i").exec(e)&&(n.label||n)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),q=function(t){return l(t,function(t,n){return t||RegExp("\\b"+(n.pattern||s(n))+"\\b","i").exec(e)&&(n.label||n)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),V=n([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=function(t){return l(t,function(t,n,r){return t||(n[V]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(V)]||RegExp("\\b"+s(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),j=function(n){return l(n,function(n,r){var i=r.pattern||s(r);return!n&&(n=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(n=t(n,i,r.label||r)),n})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(U&&(U=[U]),W&&!V&&(V=n([W])),(v=/\bGoogle TV\b/.exec(V))&&(V=v[0]),/\bSimulator\b/i.test(e)&&(V=(V?V+" ":"")+"Simulator"),"Opera Mini"==q&&/\bOPiOS\b/.test(e)&&L.push("running in Turbo/Uncompressed mode"),"IE"==q&&/\blike iPhone OS\b/.test(e)?(W=(v=c(e.replace(/like iPhone OS/,""))).manufacturer,V=v.product):/^iP/.test(V)?(q||(q="Safari"),j="iOS"+((v=/ OS ([\d_]+)/i.exec(e))?" "+v[1].replace(/_/g,"."):"")):"Konqueror"!=q||/buntu/i.test(j)?W&&"Google"!=W&&(/Chrome/.test(q)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(V))||/\bAndroid\b/.test(j)&&/^Chrome/.test(q)&&/\bVersion\//i.test(e)?(q="Android Browser",j=/\bAndroid\b/.test(j)?j:"Android"):"Silk"==q?(/\bMobi/i.test(e)||(j="Android",L.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&L.unshift("accelerated")):"PaleMoon"==q&&(v=/\bFirefox\/([\d.]+)\b/.exec(e))?L.push("identifying as Firefox "+v[1]):"Firefox"==q&&(v=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(j||(j="Firefox OS"),V||(V=v[1])):!q||(v=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(q))?(q&&!V&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(v+"/")+8))&&(q=null),(v=V||W||j)&&(V||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(j))&&(q=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(j)?j:v)+" Browser")):"Electron"==q&&(v=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&L.push("Chromium "+v):j="Kubuntu",B||(B=function(t){return l(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",s(q),"(?:Firefox|Minefield|NetFront)"])),(v="iCab"==U&&parseFloat(B)>3&&"WebKit"||/\bOpera\b/.test(q)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(U)&&"WebKit"||!U&&/\bMSIE\b/i.test(e)&&("Mac OS"==j?"Tasman":"Trident")||"WebKit"==U&&/\bPlayStation\b(?! Vita\b)/i.test(q)&&"NetFront")&&(U=[v]),"IE"==q&&(v=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(q+=" Mobile",j="Windows Phone "+(/\+$/.test(v)?v:v+".x"),L.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(q="IE Mobile",j="Windows Phone 8.x",L.unshift("desktop mode"),B||(B=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=q&&"Trident"==U&&(v=/\brv:([\d.]+)/.exec(e))&&(q&&L.push("identifying as "+q+(B?" "+B:"")),q="IE",B=v[1]),z){if(a(d,"global"))if(T&&(D=(v=T.lang.System).getProperty("os.arch"),j=j||v.getProperty("os.name")+" "+v.getProperty("os.version")),C&&a(d,"system")&&(v=[d.system])[0]){j||(j=v[0].os||null);try{v[1]=d.require("ringo/engine").version,B=v[1].join("."),q="RingoJS"}catch(e){v[0].global.system==d.system&&(q="Narwhal")}}else"object"==typeof d.process&&!d.process.browser&&(v=d.process)?"object"==typeof v.versions?"string"==typeof v.versions.electron?(L.push("Node "+v.versions.node),q="Electron",B=v.versions.electron):"string"==typeof v.versions.nw&&(L.push("Chromium "+B,"Node "+v.versions.node),q="NW.js",B=v.versions.nw):(q="Node.js",D=v.arch,j=v.platform,B=/[\d.]+/.exec(v.version)[0]):k&&(q="Rhino");else o(v=d.runtime)==x?(q="Adobe AIR",j=v.flash.system.Capabilities.os):o(v=d.phantom)==M?(q="PhantomJS",B=(v=v.version||null)&&v.major+"."+v.minor+"."+v.patch):"number"==typeof _.documentMode&&(v=/\bTrident\/(\d+)/i.exec(e))?(B=[B,_.documentMode],(v=+v[1]+4)!=B[1]&&(L.push("IE "+B[1]+" mode"),U&&(U[1]=""),B[1]=v),B="IE"==q?String(B[1].toFixed(1)):B[0]):"number"==typeof _.documentMode&&/^(?:Chrome|Firefox)\b/.test(q)&&(L.push("masking as "+q+" "+B),q="IE",B="11.0",U=["Trident"],j="Windows");j=j&&r(j)}if(B&&(v=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(B)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(z&&m.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(F=/b/i.test(v)?"beta":"alpha",B=B.replace(RegExp(v+"\\+?$"),"")+("beta"==F?N:A)+(/\d+\+?/.exec(v)||"")),"Fennec"==q||"Firefox"==q&&/\b(?:Android|Firefox OS)\b/.test(j))q="Firefox Mobile";else if("Maxthon"==q&&B)B=B.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(V))"Xbox 360"==V&&(j=null),"Xbox 360"==V&&/\bIEMobile\b/.test(e)&&L.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(q)&&(!q||V||/Browser|Mobi/.test(q))||"Windows CE"!=j&&!/Mobi/i.test(e))if("IE"==q&&z)try{null===d.external&&L.unshift("platform preview")}catch(e){L.unshift("embedded")}else(/\bBlackBerry\b/.test(V)||/\bBB10\b/.test(e))&&(v=(RegExp(V.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||B)?(j=((v=[v,/BB10/.test(e)])[1]?(V=null,W="BlackBerry"):"Device Software")+" "+v[0],B=null):this!=i&&"Wii"!=V&&(z&&O||/Opera/.test(q)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==q&&/\bOS X (?:\d+\.){2,}/.test(j)||"IE"==q&&(j&&!/^Win/.test(j)&&B>5.5||/\bWindows XP\b/.test(j)&&B>8||8==B&&!/\bTrident\b/.test(e)))&&!y.test(v=c.call(i,e.replace(y,"")+";"))&&v.name&&(v="ing as "+v.name+((v=v.version)?" "+v:""),y.test(q)?(/\bIE\b/.test(v)&&"Mac OS"==j&&(j=null),v="identify"+v):(v="mask"+v,q=I?r(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(v)&&(j=null),z||(B=null)),U=["Presto"],L.push(v));else q+=" Mobile";(v=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(v=[parseFloat(v.replace(/\.(\d)$/,".0$1")),v],"Safari"==q&&"+"==v[1].slice(-1)?(q="WebKit Nightly",F="alpha",B=v[1].slice(0,-1)):B!=v[1]&&B!=(v[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(B=null),v[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==v[0]&&537.36==v[2]&&parseFloat(v[1])>=28&&"WebKit"==U&&(U=["Blink"]),z&&(S||v[1])?(U&&(U[1]="like Chrome"),v=v[1]||((v=v[0])<530?1:v<532?2:v<532.05?3:v<533?4:v<534.03?5:v<534.07?6:v<534.1?7:v<534.13?8:v<534.16?9:v<534.24?10:v<534.3?11:v<535.01?12:v<535.02?"13+":v<535.07?15:v<535.11?16:v<535.19?17:v<536.05?18:v<536.1?19:v<537.01?20:v<537.11?"21+":v<537.13?23:v<537.18?24:v<537.24?25:v<537.36?26:"Blink"!=U?"27":"28")):(U&&(U[1]="like Safari"),v=(v=v[0])<400?1:v<500?2:v<526?3:v<533?4:v<534?"4+":v<535?5:v<537?6:v<538?7:v<601?8:"8"),U&&(U[1]+=" "+(v+="number"==typeof v?".x":/[.+]/.test(v)?"":"+")),"Safari"==q&&(!B||parseInt(B,10)>45)&&(B=v)),"Opera"==q&&(v=/\bzbov|zvav$/.exec(j))?(q+=" ",L.unshift("desktop mode"),"zvav"==v?(q+="Mini",B=null):q+="Mobile",j=j.replace(RegExp(" *"+v+"$"),"")):"Safari"==q&&/\bChrome\b/.exec(U&&U[1])&&(L.unshift("desktop mode"),q="Chrome Mobile",B=null,/\bOS X\b/.test(j)?(W="Apple",j="iOS 4.3+"):j=null),B&&0===B.indexOf(v=/[\d.]+$/.exec(j))&&e.indexOf("/"+v+"-")>-1&&(j=u(j.replace(v,""))),U&&!/\b(?:Avant|Nook)\b/.test(q)&&(/Browser|Lunascape|Maxthon/.test(q)||"Safari"!=q&&/^iOS/.test(j)&&/\bSafari\b/.test(U[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(q)&&U[1])&&(v=U[U.length-1])&&L.push(v),L.length&&(L=["("+L.join("; ")+")"]),W&&V&&V.indexOf(W)<0&&L.push("on "+W),V&&L.push((/^on /.test(L[L.length-1])?"":"on ")+V),j&&(v=/ ([\d.+]+)$/.exec(j),w=v&&"/"==j.charAt(j.length-v[0].length-1),j={architecture:32,family:v&&!w?j.replace(v[0],""):j,version:v?v[1]:null,toString:function(){var e=this.version;return this.family+(e&&!w?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(v=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D))&&!/\bi686\b/i.test(D)?(j&&(j.architecture=64,j.family=j.family.replace(RegExp(" *"+v),"")),q&&(/\bWOW64\b/i.test(e)||z&&/\w(?:86|32)$/.test(m.cpuClass||m.platform)&&!/\bWin64; x64\b/i.test(e))&&L.unshift("32-bit")):j&&/^OS X/.test(j.family)&&"Chrome"==q&&parseFloat(B)>=39&&(j.architecture=64),e||(e=null);var H={};return H.description=e,H.layout=U&&U[0],H.manufacturer=W,H.name=q,H.prerelease=F,H.product=V,H.ua=e,H.version=q&&B,H.os=j||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=c,H.toString=function(){return this.description||""},H.version&&L.unshift(B),H.name&&L.unshift(q),j&&q&&(j!=String(j).split(" ")[0]||j!=q.split(" ")[0]&&!V)&&L.push(V?"("+j+")":"on "+j),L.length&&(H.description=L.join(" ")),H}var d={function:!0,object:!0},h=d[typeof window]&&window||this,p=h,f=d[typeof exports]&&exports,m=d[typeof module]&&module&&!module.nodeType&&module,g=f&&m&&"object"==typeof global&&global;!g||g.global!==g&&g.window!==g&&g.self!==g||(h=g);var v=Math.pow(2,53)-1,y=/\bOpera/,b=this,w=Object.prototype,C=w.hasOwnProperty,E=w.toString,S=c();window.platform=S}.call(this),function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return void 0===e}if(e){var i={},o=e.TraceKit,a="?";i.noConflict=function(){return e.TraceKit=o,i},i.computeStackTrace=function(){function t(e){if("string"!=typeof e)return[];if(!n(w,e)){w[e]=[]}return w[e]}function o(e,n){var i,o=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",u=t(e);if(!u.length)return a;for(var c=0;c<10;++c)if(l=u[n-c]+l,!r(l)){if(i=s.exec(l))return i[1];if(i=o.exec(l))return i[1]}return a}function s(e,n){var o=t(e);if(!o.length)return null;var a=[],s=Math.floor(i.linesOfContext/2),l=s+i.linesOfContext%2,u=Math.max(0,n-s-1),c=Math.min(o.length,n+l-1);n-=1;for(var d=u;d<c;++d)r(o[d])||a.push(o[d]);return a.length>0?a:null}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function u(e){return l(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function c(e,n){for(var r,i,o=0,a=n.length;o<a;++o)if((r=t(n[o])).length&&(r=r.join("\n"),i=e.exec(r)))return{url:n[o],line:r.substring(0,i.index).split("\n").length,column:i.index-r.lastIndexOf("\n",i.index)-1};return null}function d(e,n,r){var i,o=t(n),a=new RegExp("\\b"+l(e)+"\\b");return r-=1,o&&o.length>r&&(i=a.exec(o[r]))?i.index:null}function h(t){if(!r(e&&e.document)){for(var n,i,o,a,s=[e.location.href],d=e.document.getElementsByTagName("script"),h=""+t,p=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,m=0;m<d.length;++m){var g=d[m];g.src&&s.push(g.src)}if(o=p.exec(h)){var v=o[1]?"\\s+"+o[1]:"",y=o[2].split(",").join("\\s*,\\s*");n=l(o[3]).replace(/;$/,";?"),i=new RegExp("function"+v+"\\s*\\(\\s*"+y+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(l(h).replace(/\s+/g,"\\s+"));if(a=c(i,s))return a;if(o=f.exec(h)){var b=o[1];if(n=u(o[2]),i=new RegExp("on"+b+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),a=c(i,s[0]))return a;if(i=new RegExp(n),a=c(i,s))return a}return null}}function p(e){if(!e.stack)return null;for(var t,n,i=/^\s*at (.*?) ?\(((?:file|https?|\s*|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,l=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=e.stack.split("\n"),h=[],p=/^(.*) is undefined$/.exec(e.message),f=0,m=c.length;f<m;++f){if(t=i.exec(c[f])){var g=t[2]&&-1!==t[2].indexOf("native");n={url:g?null:t[2],func:t[1]||a,args:g?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=u.exec(c[f]))n={url:t[2],func:t[1]||a,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=l.exec(c[f])))continue;n={url:t[3],func:t[1]||a,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!n.func&&n.line&&(n.func=o(n.url,n.line)),n.line&&(n.context=s(n.url,n.line)),h.push(n)}return h.length?(h[0]&&h[0].line&&!h[0].column&&p?h[0].column=d(p[1],h[0].url,h[0].line):h[0].column||r(e.columnNumber)||(h[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:h}):null}function f(e){var t=e.stacktrace;if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=t.split("\n"),l=[],u=0;u<a.length;u+=2){var c=null;if((n=r.exec(a[u]))?c={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=i.exec(a[u]))&&(c={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),c){if(!c.func&&c.line&&(c.func=o(c.url,c.line)),c.line)try{c.context=s(c.url,c.line)}catch(e){}c.context||(c.context=[a[u+1]]),l.push(c)}}return l.length?{mode:"stacktrace",name:e.name,message:e.message,stack:l}:null}}function m(r){var i=r.message.split("\n");if(i.length<4)return null;var a,l=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of function script\s*$/i,p=[],f=e&&e.document&&e.document.getElementsByTagName("script"),m=[];for(var g in f)n(f,g)&&!f[g].src&&m.push(f[g]);for(var v=2;v<i.length;v+=2){var y=null;if(a=l.exec(i[v]))y={url:a[2],func:a[3],args:[],line:+a[1],column:null};else if(a=d.exec(i[v])){y={url:a[3],func:a[4],args:[],line:+a[1],column:null};var b=+a[1],w=m[a[2]-1];if(w){var C=t(y.url);if(C){var E=(C=C.join("\n")).indexOf(w.innerText);E>=0&&(y.line=b+C.substring(0,E).split("\n").length)}}}else if(a=h.exec(i[v])){var S=e.location.href.replace(/#.*$/,""),x=c(new RegExp(u(i[v+1])),[S]);y={url:S,func:"",args:[],line:x?x.line:a[1],column:null}}if(y){y.func||(y.func=o(y.url,y.line));var R=s(y.url,y.line),P=R?R[Math.floor(R.length/2)]:null;R&&P.replace(/^\s*/,"")===i[v+1].replace(/^\s*/,"")?y.context=R:y.context=[i[v+1]],p.push(y)}}return p.length?{mode:"multiline",name:r.name,message:i[0],stack:p}:null}function g(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){e.incomplete=!1,i.func||(i.func=o(i.url,i.line)),i.context||(i.context=s(i.url,i.line));var a=/ '([^']+)' /.exec(r);if(a&&(i.column=d(a[1],i.url,i.line)),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,e.stack[0].context=i.context,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function v(e,t){for(var n,r,s,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},p=!1,f=v.caller;f&&!p;f=f.caller)if(f!==y&&f!==i.report){if(r={url:null,func:a,args:[],line:null,column:null},f.name?r.func=f.name:(n=l.exec(f.toString()))&&(r.func=n[1]),void 0===r.func)try{r.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}if(s=h(f)){r.url=s.url,r.line=s.line,r.func===a&&(r.func=o(r.url,r.line));var m=/ '([^']+)' /.exec(e.message||e.description);m&&(r.column=d(m[1],s.url,s.line))}c[""+f]?p=!0:c[""+f]=!0,u.push(r)}t&&u.splice(0,t);var b={mode:"callers",name:e.name,message:e.message,stack:u};return g(b,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),b}function y(e,t){var n=null;t=null==t?0:+t;try{if(n=f(e))return n}catch(e){if(b)throw e}try{if(n=p(e))return n}catch(e){if(b)throw e}try{if(n=m(e))return n}catch(e){if(b)throw e}try{if(n=v(e,t+1))return n}catch(e){if(b)throw e}return{mode:"failed"}}var b=!1,w={};return y.augmentStackTraceWithInitialElement=g,y.guessFunctionName=o,y.gatherContext=s,y.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return y(t,e+1)}},y.getSource=t,y}(),e.TraceKit=i}}("undefined"!=typeof window?window:global),window.RC=window.RC||{},RC.apply=function(e,t){t=t||{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},RC.applyIf=function(e,t){t=t||{};for(var n in t)!t.hasOwnProperty(n)||n in e||(e[n]=t[n]);return e},RC.mix=function(e,t){if(!e||!t)throw"to/from are required";for(var n in t)t.hasOwnProperty(n)&&function(t,n,r){if("function"==typeof n&&"function"==typeof r)e[t]=function(){var e=this.SUPER;this.SUPER=r;var t=n.apply(this,arguments);return this.SUPER=e,t};else{if(t in e)throw"Mixin conflict: "+t+" property found in target object";e[t]=n}}(n,t[n],e[n]);return e},RC.supportsTouch=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0},window.Err=window.Err||RC,function(){"use strict";RC.trace=RC.trace||{};var e=window.TraceKit.noConflict();void 0===window.TraceKit&&delete window.TraceKit,RC.trace.Tracer={stackDepth:4,errorMsgStripRe:/^((?:.*error:\s*)|uncaught\s+)/i,functionCapRe:/\.([^\./]*)$/i,extractMessage:function(e){var t=e&&e.match(this.errorMsgStripRe);return t&&e.substr(t[0].length)||e},extractFunctionName:function(e){var t=e&&e.match(this.functionCapRe),n=t?t[1].split(" ")[0]:e;return"Anonymous function"===n&&(n="?"),n},extractFile:function(e){return e&&e.split("?")[0]},processStack:function(t,n,r,i){var o,a={stack:(t=t||{}).trueStack||t.stack,name:t.name,message:t.message},s=e.computeStackTrace(a),l=t.message,u=t.functionSource||void 0,c=t.sourceMethod||t.functionName||void 0,d=t.args||void 0,h=t.thisObj||void 0,p=[r],f=[c];if("failed"!==s.mode&&!s.incomplete&&(o=this.cleanStack(c,s.stack,t.wrapperFunctionName),l=s.message,o.length)){var m=o[0];n=t.functionName?m.url:n||m.url,r=t.functionName?m.line:r||m.line,i=t.functionName?m.column:i||m.column,u=m.context?m.context.join("\n"):u,c=this.extractFunctionName(m.func);var g=Math.min(this.stackDepth,o.length);p=[],f=[];for(var v=0;v<g;v++)p.push(o[v].line),f.push(this.extractFunctionName(o[v].func))}return{msg:this.extractMessage(l),file:this.extractFile(n),line:r,lines:p.join(","),functionNames:f.join(","),column:i,functionSource:u,functionName:c,stack:t.trueStack||t.stack||void 0,stackFrames:o,args:d,thisObj:h}},cleanStack:function(e,t,n){var r;if(t=t||[],e){for(r=0;r<t.length&&e!==this.extractFunctionName(t[r].func);r++);r<t.length&&(t=t.slice(r))}if(n){var i;for(r=0;r<t.length&&!i;r++){var o=this.extractFunctionName(t[r].func);o&&o.match(n)&&(i=!0)}i&&t.splice(r-1,1)}return t}}}(),window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Dom={measureScrollBarWidth:function(){if(!document.body)return 0;var e=document.createElement("div");e.style.cssText="width: 100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Cookie={inject:function(e){var t=document.cookie.split(";"),n=e.split(";"),r={},i={};t.forEach(function(e){var t=e.indexOf("="),n=(t>-1?e.substr(0,t):e).trim(),r=t>-1?e.substr(t+1):"";i[n]=r}),n.forEach(function(e){var t=e.indexOf("="),n=(t>-1?e.substr(0,t):e).trim(),i=t>-1?e.substr(t+1):"";r[n]=i});for(var o=0;o<t.length;o++){var a=t[o],s=a.indexOf("="),l=(s>-1?a.substr(0,s):a).trim();if(r[l]){var u=new Date;u.setTime(u.getTime()+6048e5);var c="; expires="+u.toUTCString();document.cookie=l+"="+r[l]+c+"; path=/"}else document.cookie=l+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Ajax={request:function(e,t,n,r,i){return window.platform&&("IE"!==platform.name||"9.0"!==platform.version)||"POST"!==n?this.defaultRequest.apply(this,arguments):this.legacyIERequest.apply(this,arguments)},defaultRequest:function(e,t,n,r,i){var o=new XMLHttpRequest,a=t?RC.util.Serializer.stringify(t):"",s=this;return r&&o.addEventListener("load",function(){this.status>=400?i&&i.call(s,this.responseText):r&&r.call(s,this.responseText)}),i&&o.addEventListener("error",function(){i.call(s,this.responseText)}),o.open(n,e,!0),"POST"===n&&o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),o.send(a),o},legacyIERequest:function(e,t,n,r,i){var o=t?RC.util.Serializer.stringify(t):"",a=new XDomainRequest,s=this;a.onprogress=function(){},a.ontimeout=a.onerror=function(){i.call(s,this.responseText)},a.onload=function(){r.call(s,this.responseText)},a.open(n,e,!0),a.send(o)}},RC.util=RC.util||{},RC.util.Serializer={MAX_NBR_PROPERTIES:10,isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},stringify:function(e,t){var n=this;return e.thisObj&&(e.thisObj=this.processObject(e.thisObj)),e.args&&(e.args=this.processObject(e.args)),JSON.stringify(e,function(e,t){return n.jsonEscape(t)})},processObject:function(e,t){var n;if(this.isArray(e)){if(t)return String(e);var r=[];for(n=0;n<e.length;n++)r[n]=this.processObject(e[n],!0);return r}if("function"==typeof e)return"function ()";if("object"!=typeof e||null===e||void 0===e)return e;n=0;var i={};for(var o in e)e.hasOwnProperty(o)&&n<this.MAX_NBR_PROPERTIES&&(i[o]=this.jsonReplacer(o,e[o]),n++);return i},jsonReplacer:function(e,t){return"function"==typeof t?"function ()":t instanceof HTMLElement?this.HTMLElement(t):"thisObj"===e?t:e&&t&&!this.isArray(t)&&"object"==typeof t?t.toString():t},jsonEscape:function(e){return e},HTMLElement:function(e){for(var t={},n=e.attributes,r=0;r<n.length;r++)t[n[r]]=e.getAttribute(n[r]);return t}},RC.util=RC.util||{},RC.util.Function={argArray:"qwertyuioasdfghjklzxcvbnm".split(""),fnIgnoreRe:/self|constructor|onBeforeCreated|onClassCreated/,objectIgnoreRe:/superclass|hasListeners/,tryCatchify:function(targets){var me=this;if(targets)if("string"==typeof targets)me.wrapWithTryCatch(eval(targets));else for(var o in targets)this.tryCatchifySingle(o,targets[o])},tryCatchifySingle:function(targetObj,methodName){var me=this;try{targetObj="string"==typeof targetObj?eval(targetObj):targetObj}catch(e){console.log("RootCause: Failed to wrap function for arguments capturing",e),targetObj=null}targetObj&&("function"==typeof targetObj&&"function"!=typeof targetObj[methodName]?me.wrapWithTryCatch(targetObj.prototype,methodName):"*"===methodName?me.wrapObject(targetObj):me.wrapWithTryCatch(targetObj,methodName))},wrapObject:function(e){var t=this;for(var n in e){var r=e[n],i=window.Ext&&(n in Ext.Base.prototype||n in Ext.util.Observable.prototype);!e.hasOwnProperty(n)||"function"!=typeof r||n.match(t.fnIgnoreRe)||i||r._wrapped||!r.$className&&r.length&&t.wrapWithTryCatch(e,n)}},intercept:function(e,t,n,r){var i=e[t];if(!i||"function"!=typeof i)throw new Error('No "'+t+'" function found in '+e.toString());e[t]=function(){return n.apply(r||this,arguments),i.apply(this,arguments)},e[t]._origFn=i,e[t]._wrapped=!0},interceptConstructor:function(e,t,n,r){var i=e[t];if(!i)throw new Error('No "'+t+'" function found in '+e.toString());"function"==typeof i.bind&&(e[t]=function(){var e;switch(arguments.length){case 0:e=new i;break;case 1:e=new i(arguments[0]);break;case 2:e=new i(arguments[0],arguments[1]);break;case 3:e=new i(arguments[0],arguments[1],arguments[2]);break;case 4:e=new i(arguments[0],arguments[1],arguments[2],arguments[3]);break;case 5:e=new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);break;case 6:e=new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);break;default:e=new(i.bind.apply(i,arguments))}return n.apply(e,arguments),e},e[t]._origFn=i,e[t]._wrapped=!0)},removeInterceptor:function(e,t){e[t]&&e[t]._wrapped&&(e[t]=e[t]._origFn)},wrapWithTryCatch:function(e,t){var n=e[t];this.argArray;if(n&&"function"==typeof n){n.length;var r=this;e[t]=function(){try{return n.apply(this,arguments)}catch(o){var e=new Error(o);if(e.functionSource=n.toString(),e.functionName=r.getFunctionName(n),e.functionName){var t=e.functionSource,i=t.substr(0,t.indexOf("("));e.functionSource=i+(i.indexOf(e.functionName)<0?e.functionName:"")+t.substr(i.length)}throw e.thisObj=this,e.args=[].slice.apply(arguments),e.trueStack=o.stack,e.wrapperFunctionName="wrapperFn",e}},e[t]._wrapped=!0}},getFunctionName:function(e){var t=e.$name||e.name;if(!t){var n=e.toString().match(/^function\s*([^\s(]+)/);t=n&&n[1]}return t||""}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Url={uriKeys:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],queryKey:"query",uriParseRexp:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,queryParseRexp:/(?:^|&)([^&=]*)=?([^&]*)/g,parse:function(e){var t,n,r,i=RC.util.Url.uriParseRexp,o=RC.util.Url.queryParseRexp,a=RC.util.Url.uriKeys,s=RC.util.Url.queryKey;return t=i.exec(e),n=a.reduce(function(e,n,r){return e[n]=t[r]||"",e},{}),r={},n[s].replace(o,function(e,t,n){t&&(r[t]=n)}),n[s]=r,n}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.util=RC.util||{},RC.util.Value={atoms:{Undefined:1,Null:2,Boolean:3,Number:4,String:5,Date:6},typeOf:function(e){return Object.prototype.toString.call(e).slice(8,-1)},isAtom:function(e){return RC.util.Value.typeOf(e)in RC.util.Value.atoms},getObjectKeys:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},fuzzyMatchValues:function(e,t,n,r,i){var o,a,s=RC.util.Value,l=0;if(e=n?n(e):e,t=n?n(t):t,o=s.typeOf(e),a=s.typeOf(t),o==a)switch(o){case"Null":case"Undefined":case"Boolean":case"Number":l=s.fuzzyMatchSimple(e,t);break;case"String":l=s.fuzzyMatchString(e,t);break;case"Date":l=s.fuzzyMatchDate(e,t);break;case"Array":l=s.fuzzyMatchArray(e,t,n,r,i);break;default:l=s.fuzzyMatchObject(e,t,n,r,i)}return l},fuzzyMatchSimple:function(e,t){return e==t&&1||0},fuzzyMatchDate:function(e,t){return e===t||e.getTime()==t.getTime()&&1||0},fuzzyMatchString:function(e,t){var n,r,i;for(e=e.split(""),t=t.split(""),e.length>t.length&&(n=t,t=e,e=n),n=0,r=0,i=e.length;r<i&&n==r;++r)n+=e[r]==t[r]&&1||0;return t.length>0?n/t.length:1},fuzzyMatchArray:function(e,t,n,r,i){var o,a,s,l,u=RC.util.Value;if(e===t)l=1;else{if(e.length>t.length&&(o=t,t=e,e=o),r=r||[],i=i||[],r.includes(e)||i.includes(t))throw new Error("Can't fuzzy match arrays circular reference found");for(r.push(e),i.push(t),o=[],a=0,s=e.length;a<s;++a)o[a]=u.fuzzyMatchValues(e[a],t[a],n,r,i);r.pop(),i.pop(),l=t.length>0?o.reduce(function(e,t){return e+t},0)/t.length:1}return l},fuzzyMatchObject:function(e,t,n,r,i){var o,a,s,l,u,c,d,h=RC.util.Value;if(e===t)d=1;else{if(o=h.getObjectKeys(e),a=h.getObjectKeys(t),o.length>a.length&&(l=a,a=o,o=l,l=t,t=e,e=l),r=r||[],i=i||[],r.includes(e)||i.includes(t))throw"Can't fuzzy match arrays circular reference found";for(r.push(e),i.push(t),l=[],u=0,c=o.length;u<c;++u)s=o[u],l[u]=h.fuzzyMatchValues(e[s],t[s],n,r,i);r.pop(),i.pop(),d=a.length>0?l.reduce(function(e,t){return e+t},0)/a.length:1}return d}},RC.ui=RC.ui||{},RC.ui.FeedbackButton=function(e){var t=this;RC.apply(t,e),t.onMouseDown=t.onMouseDown.bind(t),t.onMouseMove=t.onMouseMove.bind(t),t.onTouchStart=t.onTouchStart.bind(t),t.onTouchMove=t.onTouchMove.bind(t),t.onMouseUp=t.onMouseUp.bind(t),t.onSendClick=t.onSendClick.bind(t),t.showForm=t.showForm.bind(t),t.hideForm=t.hideForm.bind(t),t.onWindowLoad=t.onWindowLoad.bind(t),["bugText","featureRequestText","nameFieldPlaceholder","messageFieldPlaceholder","submitButtonText","cancelButtonText","infoText"].forEach(function(e){t.template=t.template.replace("_"+e+"_",t[e])}),"complete"===document.readyState&&document.body?t.initialize():window.addEventListener("load",t.onWindowLoad.bind(t))},RC.ui.FeedbackButton.prototype={text:"FEEDBACK",bugText:"Bug",featureRequestText:"Feature request",nameFieldPlaceholder:"Your name",messageFieldPlaceholder:"Message",submitButtonText:"Submit",cancelButtonText:"Cancel",infoText:"Click and drag to highlight issue",textColor:"#666",backgroundColor:"#eee",foregroundColor:"#fff",buttonColor:"#0088d1",buttonHoverColor:"#00689c",buttonTextColor:"#fff",highlightColor:"rgba(255,0,0,0.5)",feedbackButtonColor:"#aaa",feedbackButtonTextColor:"#fff",side:"right",el:null,timer:null,styleNode:null,selectorEl:null,formVisible:!1,startX:null,startY:null,userName:"",maskEl:null,mouseEventType:window.MSPointerEvent?"mspointer":window.PointerEvent?"pointer":"mouse",send:null,sendButton:null,template:'        <div class="rc-feedbackbutton-button"></div>        <div class="rc-feedbackbutton-form">        <form>        <input type="radio" name="type" value="bug" checked="checked" id="__bug">        <label for="__bug">_bugText_</label>        <input type="radio" name="type" value="feature" id="__feature">        <label for="__feature">_featureRequestText_</label>        <input type="text" placeholder="_nameFieldPlaceholder_" name="name" required>        <textarea name="message" placeholder="_messageFieldPlaceholder_" required></textarea>        <input type="submit">        <p class="infoText">_infoText_</p>        </form>        <button class="send"><div></div>_submitButtonText_</button>        <button class="cancel">_cancelButtonText_</button>        <span class="poweredby">Powered by <a href="https://therootcause.io" target="_blank"><strong>RootCause</strong></a></span>',outerCss:"        .rc-feedbackbutton-iframe {             border      : 0;             width       : 30px;             z-index     : 20000002 !important;             position    : fixed;             bottom      : 10%;             height      : 410px;            transition  : width .2s ease, height 0s ease .2s;        }        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-side-right {            right       : 0px;        }        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-side-left {            left        : 0px;        }        .rc-feedbackbutton-init {            transition  : width 0s;         }                .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-expanded:hover,        .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-expanded,        .rc-feedbackbutton-iframe:hover {            width       : 325px;            height      : 410px !important;            max-height  : 90%;            min-height  : 272px;            transition  : width .2s ease, height 0s;        }                .rc-feedbackbutton-iframe:hover {            width       : 35px;        }                .rc-feedbackbutton-iframe.rc-feedbackbutton-iframe-drawing {            width       : 25px;        }                .rc-feedbackbutton-iframe.detached {            position    : absolute;            bottom      : auto;        }",innerCss:'        body {            margin      : 0;            font-family : "Helvetica Neue",Helvetica,Arial,sans-serif;            font-weight : 300;            overflow    : hidden;            width       : 100%;            height      : 100%;        }        .rc-feedbackbutton-button {            position    : absolute;            bottom      : 30px;            cursor      : pointer;             min-width   : 10px;            min-height  : 20px;            font-size   :17px;            color       :${feedbackButtonTextColor};            letter-spacing:1px;            background-color: ${feedbackButtonColor};            text-align  : center;            padding     : 5px 15px;            border-top-left-radius: 3px;            border-top-right-radius: 3px;            box-shadow  : rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;            transition  : background-color 0.2s ease, color 0.2s ease;            white-space : nowrap;        }        .rc-feedbackbutton-side-left .rc-feedbackbutton-button {            right        : 30px;            transform   : rotate(90deg);            transform-origin: right bottom;        }        .rc-feedbackbutton-side-right .rc-feedbackbutton-button {            left        : 30px;            transform   : rotate(-90deg);            transform-origin: left bottom;        }        .rc-feedbackbutton-expanded .rc-feedbackbutton-button,        .rc-feedbackbutton-button:hover {            background-color: ${buttonColor};            color       : ${buttonTextColor};        }        .rc-feedbackbutton-iframe-expanded .rc-feedbackbutton-button {            background-color: ${buttonColor};        }        .rc-feedbackbutton-form {            position: absolute;            bottom: 15px;            margin-top: 15px;            box-sizing: border-box;            width: 300px;            background-color: ${backgroundColor};            padding: 20px;            box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;        }        .rc-feedbackbutton-side-right .rc-feedbackbutton-form {            left: 30px;            border-top-left-radius: 3px;            border-bottom-left-radius: 3px;        }        .rc-feedbackbutton-side-left .rc-feedbackbutton-form {            right: 30px;            border-top-right-radius: 3px;            border-bottom-right-radius: 3px;        }        .rc-feedbackbutton-expanded .rc-feedbackbutton-form,        .rc-feedbackbutton-button:hover .rc-feedbackbutton-form {            box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;        }        textarea,        input[type=text] {            box-sizing: border-box;            width: 100%;            margin-top:10px;            _outline: 0;            text-align: left;            line-height: 19px;            padding: 7px 12px;            background: ${foregroundColor};            border: 1px solid transparent;            color: rgba(0,0,0,.85);            border-radius: 3px;            font-size:inherit;            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;            font-weight: 300;            resize: none;        }                textarea:disabled,        input:disabled {            opacity: 0.5;        }                textarea {                 height: 180px;        }                label {            color: ${textColor};            margin: 0 10px 0 0;            cursor: pointer;        }                button {            width: 125px;            cursor: pointer;            display: inline-block;            _outline: 0;            border: 0;            background: ${buttonColor};            color: ${buttonTextColor};            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;            padding: 9px 20px;            font-size: inherit;            font-weight: 300;            border-radius: 3px;            transition: background-color .1s ease;        }                .send {            margin-right: 5px;           transition: background 0.5s;        }        .send.failed {            background:red;         }                button:hover {            background: ${buttonHoverColor};        }                button:disabled {            opacity: 0.5;        }                button:disabled:hover {            background: ${buttonColor};        }                input[type=radio] {            cursor: pointer;            position: relative;            top: -2px;        }                p {            color: ${textColor};        }        p.infoText:empty{            display:none;        }                p.infoText:before {            content: "i";            display: inline-block;            color: ${buttonTextColor};            margin-right: 5px;            background-color: ${buttonColor};            width: 20px;            height: 20px;            border-radius: 100%;            text-align: center;            font-weight: 700;        }                @keyframes spinner-rotate { to { transform: rotate(360deg) } }                .send div {            display:inline-block;            transition: width 0.5s, background 0.5s;            border-radius:50%;        }         .spinner {            height: 12px;            margin: 0 5px 0 -7px;            border-bottom: 2px solid ${buttonTextColor};            animation: spinner-rotate 1s infinite linear;            width: 12px;        }        .checkmark {            position:absolute;            width: 22px;            height:22px;            background: #00c200;            margin:-2px 5px 0 -27px;            transform: rotate(45deg);        }                .checkmark:before{            content:"";            position: absolute;            width:3px;            height:9px;            background-color:#fff;            left:11px;            top:6px;        }        .checkmark:after {            content: "";            position: absolute;            width: 3px;            height: 3px;            background-color: #fff;            left: 8px;            top: 12px;        }                input[type=submit] {            display: none;        }                .poweredby {            position: absolute;            right: 10px;            bottom: 4px;            font-size: 8px;        }        .poweredby a{            text-decoration: none;        }',initialize:function(){this.initialized||(this.createElement(),this.createStyle(),this.initialized=!0)},createElement:function(){var e=this,t=e.el=document.createElement("iframe"),n="                <html>                <head><style>"+e.prepareInnerCss()+"</style></head>                <body>"+e.template+"</body>                </html > ";t.setAttribute("tabindex","-1"),t.id="rc-feedbackbutton-frame",t.className="rc-feedbackbutton-iframe rc-feedbackbutton-init rc-feedbackbutton-iframe-side-"+e.side,setTimeout(function(){t.className=t.className.replace("rc-feedbackbutton-init","")},200),document.body.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.write(n),t.contentWindow.document.close();var r=t.contentDocument;r.addEventListener("click",function(t){"string"==typeof t.target.className&&0===t.target.className.indexOf("rc-feedbackbutton-button")&&e.showForm()}),r.body.className+=" rc-feedbackbutton-side-"+e.side,r.querySelector(".rc-feedbackbutton-button").innerHTML=e.text,e.userName&&(r.querySelector("input[name=name]").value=e.userName),e.sendBtn=r.querySelector(".send"),e.sendBtn.addEventListener("click",e.onSendClick),r.querySelector(".cancel").addEventListener("mousedown",e.hideForm),t.style.height=r.querySelector(".rc-feedbackbutton-button").offsetWidth+35+"px",r.addEventListener("keyup",this.onIframeDocumentKeyDown.bind(this))},createStyle:function(){var e=document.createElement("style");e.innerHTML=this.outerCss,document.head.appendChild(e)},prepareInnerCss:function(){var e=this,t=e.innerCss;return["textColor","backgroundColor","foregroundColor","buttonColor","buttonHoverColor","buttonTextColor","feedbackButtonColor","feedbackButtonTextColor"].forEach(function(n){t=t.replace(new RegExp("\\${"+n+"}","g"),e[n])}),t},showForm:function(){var e=this,t=e.el;t.className.match(/rc-feedbackbutton-iframe-expanded/)?e.hideForm():(t.className+=" rc-feedbackbutton-iframe-expanded",t.contentDocument.body.className+=" rc-feedbackbutton-expanded",document.addEventListener("mspointer"==e.mouseEventType?"MSPointerDown":e.mouseEventType+"down",e.onMouseDown),document.addEventListener("touchstart",e.onMouseDown),e.maskEl=document.createElement("div"),e.maskEl.style.cssText="z-index:10000;position:absolute;left:0;top:0;width:100%;height:100%;",document.body.appendChild(e.maskEl))},hideForm:function(){var e=this,t=e.el;t&&(t.className=t.className.replace(/rc-feedbackbutton-iframe-expanded/,""),t.contentDocument.body.className=t.contentDocument.body.className.replace("rc-feedbackbutton-expanded",""),t.contentDocument.querySelector(".send").firstChild.className=""),document.removeEventListener("mspointer"==e.mouseEventType?"MSPointerDown":e.mouseEventType+"down",e.onMouseDown),document.removeEventListener("touchstart",e.onMouseDown),e.unbindListeners(),e.sendBtn.disabled=!1,e.selectorEl&&(e.selectorEl.parentElement.removeChild(e.selectorEl),e.selectorEl=null),e.maskEl&&(e.maskEl.parentElement.removeChild(e.maskEl),e.maskEl=null)},onWindowLoad:function(){this.initialize()},onSendClick:function(e){var t=this,n=t.el.contentDocument,r=n.querySelector("form");if(e.preventDefault(),r.checkValidity()){var i=t.sendBtn;i.firstChild.className="spinner",i.disabled=!0,t.send(function(e){i.disabled=!1,e?(i.firstChild.className="checkmark",t.timer=setTimeout(function(){t.timer=null,i.firstChild.className="",t.hideForm(),r.reset()},2e3)):(i.className="send failed",i.firstChild.className="",t.timer=setTimeout(function(){t.timer=null,i.className="send"},2e3))})}else n.querySelector("input[type=submit]").click()},onMouseDown:function(e){var t=this;t.elIsInForm(e.target)||(t.selectorEl&&t.selectorEl.parentElement.removeChild(t.selectorEl),e.stopPropagation(),e.preventDefault(),document.addEventListener("mspointer"==t.mouseEventType?"MSPointerMove":t.mouseEventType+"move",t.onMouseMove,!0),document.addEventListener("touchmove",t.onTouchMove,!0),document.addEventListener("touchstart",t.onTouchStart,!0),document.addEventListener("mspointer"==t.mouseEventType?"MSPointerUp":t.mouseEventType+"up",t.onMouseUp,!0),document.addEventListener("touchend",t.onMouseUp,!0),t.startX=e.pageX,t.startY=e.pageY,t.selectorEl=document.createElement("div"),t.selectorEl.className="rc-feedback-selection",t.drawingTimeout=setTimeout(function(){t.el.className+=" rc-feedbackbutton-iframe-drawing"},100),document.body.appendChild(t.selectorEl))},onIframeDocumentKeyDown:function(e){"Escape"===e.key&&this.hideForm()},onTouchStart:function(e){e.preventDefault()},onTouchMove:function(e){if(e.touches&&1===e.touches.length){e.preventDefault(),e.stopPropagation();var t=e.touches[0],n=Math.min(t.pageX,this.startX),r=Math.min(t.pageY,this.startY),i=Math.abs(t.pageX-this.startX),o=Math.abs(t.pageY-this.startY);this.setSelectionBox(n,r,i,o)}},onMouseMove:function(e){var t=Math.min(e.pageX,this.startX),n=Math.min(e.pageY,this.startY),r=Math.abs(e.pageX-this.startX),i=Math.abs(e.pageY-this.startY);e.preventDefault(),this.setSelectionBox(t,n,r,i)},setSelectionBox:function(e,t,n,r){this.selectorEl.style.cssText="position:absolute;border:2px solid "+this.highlightColor+";border-radius: 3px;z-index:20000001;left:"+e+"px;top:"+t+"px;width:"+n+"px;height:"+r+"px"},onMouseUp:function(e){var t=this,n=t.el.contentDocument.body;t.unbindListeners(),e.stopPropagation(),e.preventDefault(),n.querySelector("input[type=text]").focus(),t.el.className=t.el.className.replace(/rc-feedbackbutton-iframe-drawing/,""),n.scrollLeft=0},unbindListeners:function(){var e=this;document.removeEventListener("mspointer"==e.mouseEventType?"MSPointerMove":e.mouseEventType+"move",this.onMouseMove,!0),document.removeEventListener("mspointer"==e.mouseEventType?"MSPointerUp":e.mouseEventType+"up",this.onMouseUp,!0),document.removeEventListener("touchend",e.onMouseUp,!0),document.removeEventListener("touchstart",e.onTouchStart,!0),document.removeEventListener("touchmove",e.onTouchMove,!0),clearTimeout(e.drawingTimeout),clearTimeout(e.timer)},elIsInForm:function(e){return e===this.el||this.el.contains(e)},getName:function(){return this.el.contentDocument.querySelector("input[name=name]").value},getMessage:function(){return this.el.contentDocument.querySelector("textarea[name=message]").value},getType:function(){return this.el.contentDocument.querySelector("#__bug").checked?"bug":"featurerequest"},showForm:function(){var e=this,t=e.el;t.className.match(/rc-feedbackbutton-iframe-expanded/)?e.hideForm():(t.className+=" rc-feedbackbutton-iframe-expanded",t.contentDocument.body.className+=" rc-feedbackbutton-expanded",document.addEventListener("mspointer"==e.mouseEventType?"MSPointerDown":e.mouseEventType+"down",e.onMouseDown),document.addEventListener("touchstart",e.onMouseDown),e.maskEl=document.createElement("div"),e.maskEl.style.cssText="z-index:10000;position:absolute;left:0;top:0;width:100%;height:100%;",document.body.appendChild(e.maskEl))},hideForm:function(){var e=this,t=e.el;t&&(t.className=t.className.replace(/rc-feedbackbutton-iframe-expanded/,""),t.contentDocument.body.className=t.contentDocument.body.className.replace("rc-feedbackbutton-expanded",""),t.contentDocument.querySelector(".send").firstChild.className=""),document.removeEventListener("mspointer"==e.mouseEventType?"MSPointerDown":e.mouseEventType+"down",e.onMouseDown),document.removeEventListener("touchstart",e.onMouseDown),e.unbindListeners(),e.selectorEl&&(e.selectorEl.parentElement.removeChild(e.selectorEl),e.selectorEl=null),e.maskEl&&(e.maskEl.parentElement.removeChild(e.maskEl),e.maskEl=null)},destroy:function(){var e=this;e.hideForm(),e.styleNode&&e.styleNode.parentNode.removeChild(e.styleNode),e.styleNode=null,e.el&&e.el.parentNode.removeChild(e.el),e.el=null}},RC.ui=RC.ui||{},RC.ui.ConfirmationDialog=function(e){var t=this;RC.apply(t,e),["titleText","introText","infoFieldPlaceholderText","emailFieldPlaceholderText","screenshotFieldLabel","stepsFieldLabel","systemInfoFieldLabel","cookiesFieldLabel","footerText","cancelButtonText","sendButtonText"].forEach(function(e){t.template=t.template.replace("_"+e+"_",t[e])}),this.destroy=this.destroy.bind(this)},RC.ui.ConfirmationDialog.prototype={el:null,styleEl:null,screenshotSrc:null,email:null,recordUserActions:null,showEmailField:!0,textColor:"#666",backgroundColor:"#eee",foregroundColor:"#fff",buttonColor:"#0088d1",buttonHoverColor:"#00689c",buttonTextColor:"#fff",maskColor:"rgba(0,0,0,0.4)",titleText:"Submit Error Report",introText:"An error has occurred in the application, please submit this report to help us diagnose and fix the issue",infoFieldPlaceholderText:"Any additional information...",emailFieldPlaceholderText:"Email (optional)",screenshotFieldLabel:"Include screenshot",stepsFieldLabel:"Steps To Reproduce",systemInfoFieldLabel:"System information",cookiesFieldLabel:"Cookies",footerText:"By submitting this form you agree that the provider of this website may use this information to improve this website.",cancelButtonText:"Cancel",sendButtonText:"Send",outerCss:"        .rc-confirmation-iframe {           position: fixed;          top: 0;          left: 0;          width: 100%;          height: 100%;          z-index: 20000003 !important;           border: 0;        }",innerCss:'        html {            height: 100%;        }                body {            color: ${textColor};            background-color: transparent;            height: calc(100% - 40px);            margin: 20px;            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;            font-weight: 300;            transition: background-color 0.5s ease;        }                body.animate {            background-color: ${maskColor};        }                body.out {            background-color: transparent;        }                .rc-confirmation {            position: fixed;            top: 150%;            left: 50%;            transform: translateX(-50%) translateY(-50%);            width: 450px;             height: 500px;            max-height: 90%;            min-height: 410px;            max-width: 90%;            min-width: 390px;            box-sizing: border-box;            border-radius: 3px;            box-shadow: rgba(0, 0, 0, 0.06) 0px 1px 6px, rgba(0, 0, 0, 0.16) 0px 2px 15px;            background-color: ${backgroundColor};            transition: top 0.2s ease;        }                .animate .rc-confirmation {            top: 50%;        }                .out .rc-confirmation {            top: -50%;        }                header {            padding: 25px 15px;            background-color: ${buttonColor};            border-top-left-radius: 3px;            border-top-right-radius: 3px;            color: ${buttonTextColor};            text-transform: uppercase;            font-size: 17px;            letter-spacing: 1px;            text-align: center;        }                .section {            padding: 20px;            font-size: 15px;        }                p:first-child {            margin: 0 0 10px 0;        }                button {            width: calc(50% - 5px);            cursor: pointer;            display: inline-block;            border: none;            background: ${buttonColor};            color: ${buttonTextColor};            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;            padding: 9px 20px;            font-size: inherit;            border-radius: 3px;            transition: background-color .1s ease;        }                button:disabled {            opacity: 0.5;        }                .send {            margin-right: 5px;        }                button:hover {            background: ${buttonHoverColor};        }                button:disabled:hover {            background: ${buttonColor};        }                textarea,        input[type=text] {            box-sizing: border-box;            width: 100%;            margin-top: 10px;            _outline: 0;            line-height: 19px;            padding: 7px 12px;            background: ${foregroundColor};            border: 0;            color: rgba(0,0,0,.85);            border-radius: 3px;            font-size: inherit;            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;            font-weight: 300;            resize: none;        }                textarea:disabled,        input:disabled {            opacity: 0.5;        }                textarea {             height: 30px;            min-height: 30px;        }                label {            display: block;            cursor: pointer;        }                label:first-of-type {            margin-top: 10px;        }                input[type=checkbox] {            cursor: pointer;            position: relative;            top: -1px;        }                img {            position: absolute;            right: 20px;            height: 60px;            transition: all 0.1s ease;            background-color: #fff;        }                img:hover {            height: 137px;        }        @keyframes spinner-rotate { to { transform: rotate(360deg) } }                .spinner {            width: 0;            transition: width 0.5s;            height: 12px;            border-radius: 10px;            border-bottom: 2px solid ${buttonTextColor};            display: inline-block;            margin: 0 5px 0 -7px;        }                .spinner.visible {            animation: spinner-rotate 1s infinite linear;            width: 12px;        }        .poweredby {            position: absolute;            right: 10px;            bottom: 4px;            font-size: 8px;        }        .poweredby a{            text-decoration: none;        }',template:'        <div class="rc-confirmation">            <header>_titleText_</header>            <div class="section">            <p>_introText_</p>            <textarea id="info" data-id="info" placeholder="_infoFieldPlaceholderText_"></textarea>            <input id="email" type="text" data-id="email" placeholder="_emailFieldPlaceholderText_">            <label id="screenshot"><input type="checkbox" data-id="screenshot" checked="checked">_screenshotFieldLabel_<img src="IMAGE"></label>            <label id="userActions"><input type="checkbox" data-id="userActions" checked="checked">_stepsFieldLabel_</label>            <label id="systeminfo"><input type="checkbox" data-id="systeminfo" checked="checked">_systemInfoFieldLabel_</label>            <label id="cookieData"><input type="checkbox" data-id="cookieData" checked="checked">_cookiesFieldLabel_</label>            <p style="font-size: 10px;color:#777">            _footerText_            </p>            <button class="cancel">_cancelButtonText_</button>            <button type="submit" class="send"><div class="spinner"></div>_sendButtonText_</button>            <span class="poweredby">Powered by <a href="https://therootcause.io" target="_blank"><strong>RootCause</strong></a></span>           </div>        </div>    ',onSendClick:null,show:function(){var e=this,t=e.el=document.createElement("iframe"),n=this.styleEl=document.createElement("style"),r="                <html>                <head><style>"+e.prepareInnerCss()+"</style></head>                <body>"+e.template+"</body>                </html > ";t.id="rc-confirmationdialog-frame",t.className="rc-confirmation-iframe",document.body.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.write(r),t.contentWindow.document.close(),n.innerHTML=this.outerCss,document.head.appendChild(n);var i=t.contentDocument,o=i.getElementById("email");if(e.screenshotSrc)i.querySelector("#screenshot img").src=this.screenshotSrc;else{var a=i.getElementById("screenshot");a.parentElement.removeChild(a)}if(!e.recordUserActions){var s=i.getElementById("userActions");s.parentElement.removeChild(s)}this.showEmailField?o.value=this.email||"":o.parentElement.removeChild(o);var l=i.querySelector("textarea"),u=i.querySelector(".section").offsetHeight+50;l.style.height="calc(100% - "+u+"px)",l.focus(),i.body.className="animate",i.addEventListener("keyup",e.onKeyUp.bind(e)),i.querySelector(".send").addEventListener("click",e.onInternalSendClick.bind(e)),i.querySelector(".cancel").addEventListener("click",e.onCancelClick.bind(e))},prepareInnerCss:function(){var e=this,t=e.innerCss;return["textColor","backgroundColor","foregroundColor","buttonColor","buttonHoverColor","buttonTextColor","maskColor"].forEach(function(n){t=t.replace(new RegExp("\\${"+n+"}","g"),e[n])}),t},destroy:function(){document.body.removeChild(this.el),this.styleEl.parentElement.removeChild(this.styleEl)},onInternalSendClick:function(){var e=this,t={},n=e.el.contentDocument,r=n.querySelectorAll("[data-id]");[].forEach.call(r,function(e){t[e.dataset.id]="checkbox"===e.getAttribute("type")?e.checked:e.value,e.disabled=!0}),n.querySelector(".spinner").className+=" visible",n.querySelector(".send").disabled=!0,e.onSendClick&&e.onSendClick(t,function(){n.body.className="out",setTimeout(function(){e.destroy()},200)})},onCancelClick:function(){var e=this;e.el.contentDocument.body.className="",setTimeout(function(){e.destroy()},200)},onKeyUp:function(e){"Escape"===e.key&&this.destroy()}},RC.ui=RC.ui||{},RC.ui.Toast={duration:5e3,backgroundColor:"#0088d1",textColor:"#fff",show:function(e,t){var n=(t=t||{}).duration||this.duration;RC.ui.Toast.instance&&RC.ui.Toast.remove(),RC.ui.Toast.createStyle(t);var r=document.createElement("div");r.className="rc-toast",r.innerHTML=e,r.addEventListener("click",RC.ui.Toast.hide),document.body.appendChild(r),r.style.bottom="-"+r.offsetHeight+"px",RC.ui.Toast.instance=r,r.timeout=setTimeout(RC.ui.Toast.hide,n),r.className="rc-toast rc-toast-show"},hide:function(){var e=RC.ui.Toast.instance;e&&(e.className="rc-toast",clearTimeout(e.timeout),e.removeEventListener("click",RC.ui.Toast.hide),setTimeout(function(){RC.ui.Toast.remove()},300))},remove:function(){RC.ui.Toast.instance&&(RC.ui.Toast.instance.parentNode.removeChild(RC.ui.Toast.instance),RC.ui.Toast.style.parentNode.removeChild(RC.ui.Toast.style),RC.ui.Toast.instance=null)},createStyle:function(e){var t=document.createElement("style"),n=e.backgroundColor||this.backgroundColor,r=e.textColor||this.textColor;t.innerHTML=".rc-toast { overflow:hidden;box-shadow: 1px 1px 8px #aaa; background-color: "+n+"; color: "+r+"; position: fixed;transition: all 0.3s ease;right: 10px;padding: 20px;font-family: sans-serif;visibility: hidden;bottom: -100%;border-radius: 2px;} .rc-toast.rc-toast-show { bottom: 10px !important;visibility: visible; z-index:1000000;} .rc-toast a { color: inherit; }",RC.ui.Toast.style=document.head.appendChild(t)}},window.RC=window.RC||{},window.RC=RC||window.RC,RC.mixin=RC.mixin||{},RC.mixin.XhrLogger=function(){"use strict";function e(e){c.interceptConstructor(e.window,"XMLHttpRequest",function(){r(e,this)})}function t(e){c.removeInterceptor(e.window,"XMLHttpRequest")}function n(){return++d}function r(e,t){t.__rclogger={},c.intercept(t,"open",function(n,r,o,a,s){return i(e,t,n,r,o,a,s)}),c.intercept(t,"setRequestHeader",function(n,r){return o(e,t,n,r)}),c.intercept(t,"send",function(n){return a(e,t,n)}),t.addEventListener("load",u.bind(e)),t.addEventListener("abort",u.bind(e)),t.addEventListener("error",u.bind(e)),t.addEventListener("timeout",u.bind(e))}function i(e,t,n,r,i,o,a){t.__rclogger.method=n,t.__rclogger.url=r,t.__rclogger.async=!1!==i,e.useEncryption&&(t.__rclogger.username=o,t.__rclogger.password=a),t.__rclogger.headers={}}function o(e,t,n,r){t.__rclogger.headers=t.__rclogger.headers||{},n=String(n).toLowerCase().trim(),r=String(r).trim(),t.__rclogger.headers.hasOwnProperty(n)?t.__rclogger.headers[n]+=", "+r:t.__rclogger.headers[n]=r}function a(e,t,r){t.__rclogger.timestamp=Date.now(),t.__rclogger.requestId=n(),t.__rclogger.request=s(r),(e.logAjaxRequests||e.enableAjaxPlayback)&&t.__rclogger.url!==e.logUrl&&e.addLogEntry({type:"ajax",requestId:t.__rclogger.requestId,async:t.__rclogger.async,url:t.__rclogger.url,method:t.__rclogger.method,username:t.__rclogger.username,password:t.__rclogger.password,headers:t.__rclogger.headers||{},request:t.__rclogger.request})}function s(e){return(e||"").toString()}function l(e,t){var n;try{n=t}catch(e){}return n}function u(e){var t=this,n=e.target;t.addLogEntry({type:"ajax"+e.type,status:n.status,statusText:n.statusText,responseType:n.responseType,requestId:n.__rclogger.requestId,url:n.__rclogger.url,method:n.__rclogger.method,duration:n.__rclogger.timestamp?(new Date).getTime()-n.__rclogger.timestamp:void 0,async:n.__rclogger.async,username:n.__rclogger.username,password:n.__rclogger.password,request:n.__rclogger.request,requestHeaders:n.__rclogger.headers,response:(t.logAjaxResponses||t.enableAjaxPlayback)&&l(n.responseType,n.response)||"",responseHeaders:n.getAllResponseHeaders().trim().split("\n").reduce(function(e,t){return t=t.split(":"),e[t.shift().trim()]=t.join(":").trim(),e},{})}),navigator.onLine&&t.treatFailedAjaxAsError&&n.status>=400&&t.handleError("Ajax "+e.type+" ["+n.status+"] "+n.__rclogger.url,n.__rclogger.url,0,0,null,{requestId:n.__rclogger.requestId,responseType:n.responseType,isFailedAjax:!0,response:l(n.responseType,n.response)})}var c=RC.util.Function,d=0;return{logAjaxRequests:!1,logAjaxResponses:!1,enableAjaxPlayback:!1,treatFailedAjaxAsError:!1,start:function(){var t=this;if("function"==typeof document.addEventListener&&!t.botRe.test(navigator.userAgent))return(t.logAjaxRequests||t.logAjaxResponses||t.enableAjaxPlayback||t.treatFailedAjaxAsError)&&"XMLHttpRequest"in t.window&&e(t),t.SUPER()},stop:function(){var e=this;return(e.logAjaxRequests||e.logAjaxResponses||e.enableAjaxPlayback||e.treatFailedAjaxAsError)&&"XMLHttpRequest"in e.window&&t(e),e.SUPER()}}}(),window.RC=window.RC||{},window.RC=RC||window.RC,RC.mixin=RC.mixin||{},RC.mixin.Electron={init:function(e){var t=this;t.SUPER(e),t.sources={},t.isElectron=window.process&&window.process.versions&&window.process.versions.electron},collectCrashData:function(e,t){var n=this;if(!n.isElectron)return n.SUPER(e,t);n.SUPER(e,function(e){n.extractFileSources(e,function(){t.call(n,e)})})},extractFileSources:function(e,t){function n(e,t){var n=t.match("//# [s]ourceMappingURL=(.*)[\\s]*$","m");if(n&&2===n.length){var o=n[1],a=o.match("data:application/json;(charset=[^;]+;)?base64,(.*)");if(a&&a[2])r.sources[e].map=atob(a[2]);else{if(!new RegExp("^(?:[a-z]+:)?//","i").test(o)){var l=e.lastIndexOf("/");-1!==l&&(o=e.slice(0,l+1)+o)}var u=o;0===o.indexOf("file://")&&(u=o.substring(7)),require("fs").readFile(u,"utf-8",function(t,n){s(e,n)}),i+=1}}}e.stackFrames=e.stackFrames||[];var r=this,i=0,o=e.stackFrames.filter(function(e){return e.url&&(0===e.url.indexOf("file://")||0===e.url.indexOf("/")||0===e.url.indexOf("\\\\")||e.url.match(/^[A-Z]/))}).map(function(e){return e.url}),a=function(e,t){r.sources[e]=r.sources[e]||{},t&&(r.sources[e].file=t,n(e,t)),i-=1,l()},s=function(e,t){r.sources[e]=r.sources[e]||{},t&&(r.sources[e].map=t),i-=1,l()},l=function(){0===i&&u()},u=function(){var n={};o.forEach(function(e){r.sources[e]&&(n[e]=r.sources[e])}),e.sourceCode=n,t()};o.filter(function(e,t,n){return n.indexOf(e)===t}).forEach(function(e){if(!r.sources[e]){var t=e;0===e.indexOf("file://")&&(t=e.substring(7)),require("fs").readFile(t,"utf-8",function(t,n){a(e,n)}),i+=1}}),l()}},function(){"use strict";var e=location.search,t=location.hash,n=window.parent!==window&&window.parent.frames.length>=5,r=e.indexOf("__debug")>0,i=n&&t.indexOf("RECORDER_ERROR")>0;n&&(location.hash=location.hash.replace(/#RECORDER_ERROR/,"")),RC.Logger=function(e){this.init(e)},RC.ErrorLogger=RC.Logger,RC.Logger.prototype={baseUrl:"https://app.therootcause.io/",maxNbrOfReportedErrors:1,recordUserActions:!1,maxNbrOfRecordedUserActions:null,captureArguments:null,logConsoleOutput:!0,logResourceLoadFailures:!0,treatResourceLoadFailureAsError:!1,user:void 0,resetOnHistoryChange:!1,version:void 0,applicationId:void 0,recorderConfig:{},data:void 0,ignoreErrorMessageRe:null,ignoreUrlRe:null,ignoreFileRe:null,onBeforeLog:null,onErrorLogged:null,onErrorLogFailed:null,autoStart:!0,frameworkVersion:void 0,tags:null,showErrorDialog:!1,environment:void 0,showNotificationOnError:!1,notificationBackgroundColor:"#0088d1",notificationTextColor:"#fff",loggingErrorText:"Logging error, please wait...",newErrorText:'An error was caught and successfully logged, id <a href="{link}">#{id}</a>',reproducedErrorText:'Error reported (<a href="{link}">#{id}</a>) is known and reproduced, we are working on a fix',fixedErrorText:'An error (<a href="{link}">#{id}</a>) was detected and it has already been marked as fixed, please try downloading our latest nightly build',saveCookies:!1,enableArgumentsCapturing:!1,plugins:null,showFeedbackButton:!1,showIconWhileRecording:!1,styleNode:null,iconNode:null,iconCSS:".rc-recording-indicator {            position      : fixed;            right         : 5px;            bottom        : 5px;            width         : 18px;            height        : 18px;            border-radius : 50%;            border        : solid 1px red;            box-sizing    : border-box;            z-index       : 10000;            box-shadow    : 0 0 0 rgba(255, 169, 44, 0.5);            animation     : rc-pulse 2s infinite;        }        .rc-recording-indicator:before {            content          : '';            position         : absolute;            left             : 2px;            top              : 2px;            width            : 12px;            height           : 12px;            border-radius    : 50%;            background-color : red;        }        @keyframes rc-pulse {            0% {                box-shadow : 0 0 0 0 rgba(255, 100, 44, 0.7);            }            70% {                box-shadow : 0 0 0 10px rgba(255, 100, 44, 0);            }            100% {                box-shadow : 0 0 0 0 rgba(255, 100, 44, 0);            }        }",minFailureResponseStatus:400,treatUnhandledPromiseRejectionAsError:!0,cookieData:null,recorder:null,player:null,active:!1,paused:!1,loggedErrors:null,logEntries:null,window:window,debug:r||i,feedbackButton:null,pageStartHref:location.href,botRe:/bot|googlebot|crawler|spider|robot|crawling|daum|phantomjs/i,loggerVersion:"2020-03-10 16:05",oldOnErrorFn:null,logRecorderErrors:r,init:function(t){var n=this,r=n.window.document;if("function"==typeof Function.prototype.bind){if(RC.apply(n,t),!n.baseUrl)throw"baseUrl is a required config option";if(n.onError=n.onError.bind(n),n.onOnlineStatusChanged=n.onOnlineStatusChanged.bind(n),n.onUnhandledRejection=n.onUnhandledRejection.bind(n),n.onVisibilityStatusChanged=n.onVisibilityStatusChanged.bind(n),n.onPageHistoryChange=n.onPageHistoryChange.bind(n),n.log=n.log.bind(n),n.loggedErrors=[],n.tags=n.tags||{},n.plugins=n.plugins||[],n.windowWidth=n.window.innerWidth||r.documentElement.clientWidth||r.body.clientWidth,n.windowHeight=n.window.innerHeight||r.documentElement.clientHeight||r.body.clientHeight,n.logEntries=[{type:"navigate",description:n.window.location.href,timestamp:Date.now()}],n.isReplay()){var o=i?n.loggerVersion:n.version;n.player=new RC.player.Player({playbackScriptUrl:n.baseUrl+"rootcause-playback-engine.js",sinonScriptUrl:n.baseUrl+"deps/nise.js",replayAjaxInteraction:n.enableAjaxPlayback,applicationVersion:o,frameworkVersion:n.frameworkVersion})}else{if(!n.applicationId)throw"applicationId is a required config option";n.captureArguments&&[].concat(n.captureArguments).forEach(function(e){RC.util.Function.tryCatchify(e)})}n.plugins.forEach(function(e,t){n.plugins[t]=new RC.plugin[e.name](e,n)}),n.cookieData=this.getDocument().cookie,n.captureScreenshot=n.captureScreenshot||n.enableScreenshot,n.captureScreenshot=n.captureScreenshot&&!!document.createElement("canvas").getContext,n.logUrl=n.baseUrl+"api/error/insert/",n.overrideUrl=n.baseUrl+"api/override/get/",n.autoStart&&n.start(),(n.showFeedbackButton||e.indexOf("__feedback")>0)&&this.createFeedbackButton()}},start:function(){var e=this,t=this.window.document;e.active||"function"!=typeof t.addEventListener||e.botRe.test(navigator.userAgent)||(e.active=!0,e.addErrorListeners(),e.isReplay()&&!i||(e.logConsoleOutput&&(!0===e.logConsoleOutput&&(e.logConsoleOutput=["debug","log","info","warn","error"]),e.wrapConsole()),e.enableArgumentsCapturing&&e.loadArgumentsCaptureTargets(),e.togglePageListeners(!0),e.pageStartHref=e.window.location.href,e.windowWidth=e.window.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,e.windowHeight=e.window.innerHeight||t.documentElement.clientHeight||t.body.clientHeight,e.addTag("Logger Build",e.loggerVersion),e.recordUserActions&&RC.recorder&&RC.recorder.BaseRecorderRole&&e.initEventRecording(),e.resetOnHistoryChange&&e.window.addEventListener("popstate",e.onPageHistoryChange),e.onStart&&e.onStart(),e.showIconWhileRecording&&e.showRecordingIcon(),e.window.document.body&&e.window.document.body.onload&&e.window.document.body.onload.toString().match(/scope.provider/i)||e.logToConsole("RootCause: Error monitoring started")))},stop:function(){var e=this;e.active&&(e.active=!1,e.removeErrorListeners(),e.unwrapConsole(),e.resetOnHistoryChange&&e.window.removeEventListener("popstate",e.onPageHistoryChange),e.togglePageListeners(!1),e.recorder&&e.recorder.stop(),e.onStop&&e.onStop(),e.hideRecordingIcon(),e.window.document.body&&e.window.document.body.onload&&e.window.document.body.onload.toString().match(/scope.provider/i)||e.logToConsole("RootCause: Error monitoring stopped"))},pause:function(){this.paused=!0},resume:function(){this.paused=!1},reset:function(){var e=this;e.recorder&&e.recorder.clear(),e.loggedErrors=[],e.logEntries=[],e.pageStartHref=e.window.location.href},isReplay:function(){return n},onError:function(e,t,n,r,i){if(!this.paused)if(this.debug)this.handleError.apply(this,arguments);else try{this.handleError.apply(this,arguments)}catch(e){this.logToConsole(e)}},logException:function(e,t){this.onError(e.message,"",0,0,e,t)},handleError:function(e,t,n,r,i,o){var a=this;if(o=o||{},Object.prototype.toString.call(e).match("Event")){var s=e;if(e.target===this.window)i="string"==typeof s.error?s:s.error,e=s.message,t=s.filename,n=s.lineno,r=s.colno,o.isJsError=!0;else{if(!this.treatResourceLoadFailureAsError&&!this.logResourceLoadFailures)return;var l=s.target;if(l){if(this.addLogEntry({type:"resourceloadfail",url:l.href||l.src,tag:l.outerHTML}),!this.treatResourceLoadFailureAsError)return;i=s.error,e="Failed to load "+l.nodeName+", URL: "+(l.href||l.src),t=l.href||l.src,o.isResourceLoadError=!0}}}else t=t||"",n=n||0,r=r||0;(i=i||{}).message||(i.message=e);var u=RC.trace.Tracer.processStack(i,t,n,r);u.stackFrames&&u.stackFrames.length>0&&(u.stackFrames=u.stackFrames.filter(function(e){return e.url&&0!==e.url.indexOf("ng:///")}),t=t||u.stackFrames[0].url),this.isReplay()?window.parent.postMessage({type:"targetpageerror",message:u.msg,stackFrames:u.stackFrames},"*"):this.shouldLogError(u.msg,u.file)?(a.recorder&&a.recorder.flushRemainingActions(),this.loggedErrors.length+1==this.maxNbrOfReportedErrors&&this.stop(),RC.apply(u,o),a.collectCrashData(u,a.onDataCollected)):this.logToConsole(u.msg,i)},shouldLogError:function(e,t){var n=this.loggedErrors.length<this.maxNbrOfReportedErrors,r=this.getLastError(),i=!r||r.msg!==e,o=this.ignoreUrlRe&&this.ignoreUrlRe.test(this.window.location.href),a=!e||this.ignoreErrorMessageRe&&this.ignoreErrorMessageRe.test(e),s=t&&this.ignoreFileRe&&this.ignoreFileRe.test(t);return(navigator.onLine||this.supportOffline)&&n&&i&&!o&&!s&&!a},addErrorListeners:function(){var e=this;!e.window.addEventListener||"IE"===platform.name&&"9.0"===platform.version?(e.oldOnErrorFn=e.window.onerror,e.window.onerror=function(){return e.onError.apply(this,arguments),e.oldOnErrorFn&&e.oldOnErrorFn.apply(this,arguments)}):(e.window.addEventListener("error",e.onError,!0),e.window.addEventListener("unhandledrejection",e.onUnhandledRejection))},removeErrorListeners:function(){var e=this;e.window.addEventListener?(e.window.removeEventListener("error",e.onError,!0),e.window.removeEventListener("unhandledrejection",e.onUnhandledRejection)):e.window.onerror=e.oldOnErrorFn},onDataCollected:function(e){var t=this.showErrorDialog;if(t){var n=this,r={};"object"==typeof t&&RC.apply(r,t),RC.apply(r,{recordUserActions:this.recordUserActions,screenshotSrc:e.screenshot,email:this.user&&this.user.email,onSendClick:function(t,r){t.info&&(e.user=JSON.parse(JSON.stringify(e.user||{})),e.user.message=t.info),t.email&&(e.user=JSON.parse(JSON.stringify(e.user||{})),e.user.email=t.email),t.userActions||(e.userActions=void 0,e.mayHaveVideo=!1),t.screenshot||(e.screenshot=void 0),t.cookieData||(e.cookieData=void 0),n.log(e,r)}}),new RC.ui.ConfirmationDialog(r).show()}else this.log(e)},log:function(e,t){var n=this;if(!navigator.onLine&&!n.supportOffline||n.isReplay()||n.onBeforeLog&&!1===n.onBeforeLog(e))t&&t.call(n,!1);else{"siesta-recorder"!==e.applicationId&&(e.isFeedback||(n.loggedErrors.push(e),n.showNotificationOnError&&n.showProgressUI())),delete e.isFailedAjax,delete e.isResourceLoadError,delete e.isJsError;RC.util.Ajax.request(n.logUrl,e,"POST",function(r){var i=!0;try{var o=JSON.parse(r);o&&"success"in o&&(i=o.success)}catch(e){if(n.debug)throw e;i=!1}i?n.onLogCompleted(r,e):n.onLogFailed(r,e),t&&t.call(n,i,r)},function(r){n.onLogFailed(r,e),t&&t.call(n,!1,r)});n.loggedErrors.length>=n.maxNbrOfReportedErrors&&n.stop()}},getLastError:function(){return this.loggedErrors[this.loggedErrors.length-1]},logToConsole:function(){"console"in window&&console.log&&console.log.apply(console,arguments)},getDocument:function(){return this.window.document},showProgressUI:function(){RC.ui.Toast.show(this.loggingErrorText,{duration:1e8,backgroundColor:this.notificationBackgroundColor,textColor:this.notificationTextColor})},onLogCompleted:function(e,t){if(this.showNotificationOnError&&!t.isFeedback){var n,r;try{r=JSON.parse(e)}catch(e){if(this.debug)throw e;this.logToConsole(e)}if(!r)return void RC.ui.Toast.hide();var i=r.hash,o=r.link;switch(r.status){case 0:case 2:n=this.newErrorText;break;case 1:n=this.fixedErrorText;break;case 3:n=this.reproducedErrorText}n&&RC.ui.Toast.show(n.replace(/{link}/g,o).replace(/{id}/g,i),{backgroundColor:this.notificationBackgroundColor,textColor:this.notificationTextColor})}try{this.onErrorLogged&&this.onErrorLogged(e,t)}catch(e){if(this.debug)throw e;this.logToConsole(e)}},onLogFailed:function(e,t){t.isFeedback||RC.ui.Toast.hide();try{var n=JSON.parse(e);n.message&&window.console&&window.console.log&&console.log("RootCause: "+n.message)}catch(t){if(this.debug)throw t;window.console&&window.console.log&&console.log("RootCause log failed",t,e)}try{this.onErrorLogFailed&&this.onErrorLogFailed(e,t)}catch(e){if(this.debug)throw e;this.logToConsole(e)}},initEventRecording:function(){var e=this,t=e.window.document,n=RC.recorder.ExtJSRecorder||RC.recorder.DomRecorder,r=e.recorderConfig||{};RC.apply(r,{window:e.window,dragPixelThreshold:1,debugMode:e.debug,swallowExceptions:!e.debug,ignoreSynthetic:!e.debug,warnAboutIframeMissingId:!1}),RC.applyIf(r,{recordMouseMovePath:!0,recordScroll:!0,recordOffsets:!0}),r.extractorConfig=r.extractorConfig||{},RC.apply(r.extractorConfig,{skipDomQuery:!0});var i=e.recorder=new n(r);"number"==typeof e.maxNbrOfRecordedUserActions&&i.on("actionadd",function(){this.actions.length>=e.maxNbrOfRecordedUserActions&&this.stop()}),t.body?i.start():t.addEventListener("DOMContentLoaded",function(e){i.start()}),e.logRecorderErrors&&i.on("exception",e.onRecorderError,e)},onRecorderError:function(e,t){var n=this;if(n.logRecorderErrors){var r={customData:{event:{}}};t="string"==typeof t?{message:t}:t,n.recorder.un("exception",n.onRecorderError,n),n.logRecorderErrors=!1;var i=n.applicationId,o=n.recorder.processingEvent;n.applicationId="siesta-recorder",window.Ext&&(r.customData.extVersions=Ext&&Ext.versions);for(var a in o||{})"string"!=typeof o[a]&&"number"!=typeof o[a]||(r.customData.event[a]=o[a]);o.target.cloneNode&&(r.customData.event.targetOuterHTML=o.target&&o.target.cloneNode().outerHTML),n.logException(t,r),n.applicationId=i}},collectCrashData:function(e,t){var n=this,r=n.window,i=(r.document,"siesta-recorder"===n.applicationId),o=(r.Ext,{windowHeight:n.windowHeight,windowWidth:n.windowWidth,cookieData:!i&&n.saveCookies&&n.cookieData||void 0,href:n.pageStartHref,applicationId:n.applicationId,browser:platform.name,browserVersion:platform.version,duration:Date.now()-n.logEntries[0].timestamp,host:r.location.host,language:navigator.language,logEntries:n.logEntries.length>0&&n.logEntries||void 0,os:platform.os.family,osVersion:platform.os.version,tags:n.tags,touch:RC.supportsTouch(),version:n.version,frameworkVersion:n.frameworkVersion,user:n.user,plugins:[].map.call(navigator.plugins||[],function(e){return{name:e.name,description:e.description||void 0,version:e.version||void 0}}),userAgent:navigator.userAgent,localDate:(new Date).toString(),errorHref:r.location.href,devicePixelRatio:r.devicePixelRatio,scrollbarWidth:RC.util.Dom.measureScrollBarWidth(),environment:n.environment});n.data&&(o.customData=n.data),RC.apply(o,e);var a=n.recorder,s="siesta-recorder"===o.applicationId&&!location.href.match("bryntum.com");if(o.feedbackType&&(o.type="bug"===o.feedbackType?1:2),a&&!s){var l=a.getRecordedActionsAsSteps();if(l.length>0){var u=a.getInitialCursorPosition();o.initialCursorPosition=u?u.toString():null,o.nbrActions=l.length,o.userActions=l}else n.addTag("PageLoadError",!0)}if(/^script error/i.test(o.msg)){for(var c=document.querySelectorAll("script[src]:not([crossorigin]):not([crossOrigin])"),d=[],h=0;h<c.length;h++){var p=c[h].getAttribute("src");if(/^(\/\/|http)/.test(p)&&p.indexOf(location.protocol+"//"+location.host)<0&&(!n.ignoreFileRe||!n.ignoreFileRe.test(p))&&(d.push(p),d.length>5))break}o.customData=o.customData||{},d.length>0?o.customData["Script tags missing crossOrigin attr"]=d:o.customData["No script tags found without crossOrigin attribute"]="Probably error came from eval code, or browser plugin/extension."}t.call(n,o)},sendFeedback:function(e){var t=this;if(t.isReplay())e.call(t);else{var n=this.feedbackButton.getName(),r=this.feedbackButton.getMessage(),i=this.feedbackButton.getType();this.collectCrashData({msg:r,isFeedback:!0,feedbackType:i},function(r){r.user=r.user||{name:n},t.log(r,e)})}},onStart:null,onStop:null,isActive:function(){return this.active},addTag:function(e,t){this.tags[e]=t},removeTag:function(e){delete this.tags[e]},clearTags:function(){this.tags={}},addLogEntry:function(e){e&&!this.paused&&("string"==typeof e&&(e={type:"info",message:e}),e.timestamp=Date.now(),this.logEntries.push(e))},wrapConsole:function(){var e=this,t=function(t){return function(){e.addLogEntry({type:"console",method:t,message:[].slice.apply(arguments).join(", ")})}};"console"in e.window&&e.logConsoleOutput instanceof e.window.Array&&e.logConsoleOutput.forEach(function(n){"function"==typeof e.window.console[n]&&RC.util.Function.intercept(e.window.console,n,t(n),e)})},unwrapConsole:function(){var e=this.window.console;e&&this.logConsoleOutput instanceof Array&&this.logConsoleOutput.forEach(function(t){RC.util.Function.removeInterceptor(e,t)})},togglePageListeners:function(e){var t=this,n=t.window,r=t.getDocument(),i=e?"addEventListener":"removeEventListener";n[i]("online",t.onOnlineStatusChanged),n[i]("offline",t.onOnlineStatusChanged),r[i]("visibilitychange",t.onVisibilityStatusChanged)},onUnhandledRejection:function(e){var t=e.reason&&e.reason.stack||void 0;this.addLogEntry({type:"unhandledrejection",message:"[PromiseRejectionEvent] "+e.reason,stack:t}),this.treatUnhandledPromiseRejectionAsError&&this.logException({message:"[PromiseRejectionEvent] "+e.reason,stack:t})},onVisibilityStatusChanged:function(){this.addLogEntry({type:"visibility",hidden:this.getDocument().hidden})},onOnlineStatusChanged:function(){this.addLogEntry({type:"connectivity",online:navigator.onLine})},loadArgumentsCaptureTargets:function(){RC.util.Ajax.request(this.overrideUrl+"?applicationToken="+this.applicationId,null,"GET",this.onArgumentsCaptureTargetsLoaded)},onArgumentsCaptureTargetsLoaded:function(e){try{e&&JSON.parse(e).forEach(function(e){RC.util.Function.tryCatchifySingle(e.target,e.methodName)})}catch(e){if(this.debug)throw e;this.logToConsole(e)}},onPageHistoryChange:function(){this.reset()},createFeedbackButton:function(){var e=this,t="object"==typeof e.showFeedbackButton?e.showFeedbackButton:{};t.userName=e.user&&e.user.name||"",t.send=e.sendFeedback.bind(e),e.feedbackButton=new RC.ui.FeedbackButton(t)},destroyFeedbackButton:function(){var e=this;e.feedbackButton&&e.feedbackButton.destroy(),e.feedbackButton=null},showRecordingIcon:function(){if(document.body&&document.head)try{var e=this.iconNode=document.createElement("div");e.className="rc-recording-indicator",e.title=this.showIconWhileRecording.tooltip||"";var t=this.styleNode=document.createElement("style");t.innerHTML=this.iconCSS,e.addEventListener("click",this.stop.bind(this)),document.body.appendChild(e),document.head.appendChild(t)}catch(e){}else window.addEventListener("load",this.showRecordingIcon.bind(this))},hideRecordingIcon:function(){this.iconNode&&(this.iconNode.parentNode.removeChild(this.iconNode),this.iconNode=null),this.styleNode&&(this.styleNode.parentNode.removeChild(this.styleNode),this.styleNode=null)}},RC.mixin&&RC.mixin.Screenshot&&RC.mix(RC.Logger.prototype,RC.mixin.Screenshot),RC.mixin&&RC.mixin.XhrLogger&&RC.mix(RC.Logger.prototype,RC.mixin.XhrLogger),RC.mixin&&RC.mixin.Offline&&RC.mix(RC.Logger.prototype,RC.mixin.Offline),RC.mixin&&RC.mixin.Electron&&RC.mix(RC.Logger.prototype,RC.mixin.Electron),RC.video&&RC.video.CanRecordVideo&&RC.mix(RC.Logger.prototype,RC.video.CanRecordVideo)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(){return void 0!==D?function(){D(i)}:r()}function r(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<I;e+=2)(0,W[e])(W[e+1]),W[e]=void 0,W[e+1]=void 0;I=0}function o(e,t){var n=arguments,r=this,i=new this.constructor(s);void 0===i[H]&&P(i);var o=r._state;return o?function(){var e=n[o-1];F(function(){return S(o,i,e,r._result)})}():b(r,i,e,t),i}function a(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(s);return m(n,e),n}function s(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function u(){return new TypeError("A promises callback cannot return that same promise.")}function c(e){try{return e.then}catch(e){return G.error=e,G}}function d(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function h(e,t,n){F(function(e){var r=!1,i=d(n,t,function(n){r||(r=!0,t!==n?m(e,n):v(e,n))},function(t){r||(r=!0,y(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,y(e,i))},e)}function p(e,t){t._state===J?v(e,t._result):t._state===X?y(e,t._result):b(t,void 0,function(t){return m(e,t)},function(t){return y(e,t)})}function f(e,n,r){n.constructor===e.constructor&&r===o&&n.constructor.resolve===a?p(e,n):r===G?y(e,G.error):void 0===r?v(e,n):t(r)?h(e,n,r):v(e,n)}function m(t,n){t===n?y(t,l()):e(n)?f(t,n,c(n)):v(t,n)}function g(e){e._onerror&&e._onerror(e._result),w(e)}function v(e,t){e._state===Q&&(e._result=t,e._state=J,0!==e._subscribers.length&&F(w,e))}function y(e,t){e._state===Q&&(e._state=X,e._result=t,F(g,e))}function b(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+J]=n,i[o+X]=r,0===o&&e._state&&F(w,e)}function w(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?S(n,r,i,o):i(o);e._subscribers.length=0}}function C(){this.error=null}function E(e,t){try{return e(t)}catch(e){return $.error=e,$}}function S(e,n,r,i){var o=t(r),a=void 0,s=void 0,l=void 0,c=void 0;if(o){if((a=E(r,i))===$?(c=!0,s=a.error,a=null):l=!0,n===a)return void y(n,u())}else a=i,l=!0;n._state!==Q||(o&&l?m(n,a):c?y(n,s):e===J?v(n,a):e===X&&y(n,a))}function x(e,t){try{t(function(t){m(e,t)},function(t){y(e,t)})}catch(t){y(e,t)}}function R(){return Y++}function P(e){e[H]=Y++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(s),this.promise[H]||P(this.promise),O(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&v(this.promise,this._result))):y(this.promise,T())}function T(){return new Error("Array Methods must be provided an Array")}function k(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function A(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(e){this[H]=R(),this._result=this._state=void 0,this._subscribers=[],s!==e&&("function"!=typeof e&&k(),this instanceof N?x(this,e):A())}var _=void 0,O=_=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},I=0,D=void 0,L=void 0,F=function(e,t){W[I]=e,W[I+1]=t,2===(I+=2)&&(L?L(i):j())},z="undefined"!=typeof window?window:void 0,B=z||{},U=B.MutationObserver||B.WebKitMutationObserver,q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),V="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,W=new Array(1e3),j=void 0;j=q?function(){return process.nextTick(i)}:U?function(){var e=0,t=new U(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():V?function(){var e=new MessageChannel;return e.port1.onmessage=i,function(){return e.port2.postMessage(0)}}():void 0===z&&"function"==typeof require?function(){try{var e=require("vertx");return D=e.runOnLoop||e.runOnContext,n()}catch(e){return r()}}():r();var H=Math.random().toString(36).substring(16),Q=void 0,J=1,X=2,G=new C,$=new C,Y=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===Q&&n<e;n++)this._eachEntry(t[n],n)},M.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===a){var i=c(e);if(i===o&&e._state!==Q)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===N){var l=new n(s);f(l,e,i),this._willSettleAt(l,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},M.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===Q&&(this._remaining--,e===X?y(r,n):this._result[t]=n),0===this._remaining&&v(r,this._result)},M.prototype._willSettleAt=function(e,t){var n=this;b(e,void 0,function(e){return n._settledAt(J,t,e)},function(e){return n._settledAt(X,t,e)})},N.all=function(e){return new M(this,e).promise},N.race=function(e){var t=this;return new t(O(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},N.resolve=a,N.reject=function(e){var t=new this(s);return y(t,e),t},N._setScheduler=function(e){L=e},N._setAsap=function(e){F=e},N._asap=F,N.prototype={constructor:N,then:o,catch:function(e){return this.then(null,e)}},N.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=N},N.Promise=N,void 0===window.Promise&&N.polyfill(),N}),"function"==typeof Object.create&&function(e){window.html2canvas=e()}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(e){!function(r){function i(e){throw RangeError(N[e])}function o(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function a(e,t){return o(e.split(A),t).join(".")}function s(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function l(e){return o(e,function(e){var t="";return e>65535&&(t+=I((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?O(e/x):e>>1,e+=O(e/t);e>_*E>>1;r+=w)e=O(e/_);return O(r+(_+1)*e/(e+S))}function h(e){var t,n,r,o,a,s,c,h,p,f,m=[],g=e.length,v=0,y=P,S=R;for((n=e.lastIndexOf(M))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(a=v,s=1,c=w;o>=g&&i("invalid-input"),((h=u(e.charCodeAt(o++)))>=w||h>O((b-v)/s))&&i("overflow"),v+=h*s,p=c<=S?C:c>=S+E?E:c-S,!(h<p);c+=w)s>O(b/(f=w-p))&&i("overflow"),s*=f;S=d(v-a,t=m.length+1,0==a),O(v/t)>b-y&&i("overflow"),y+=O(v/t),v%=t,m.splice(v++,0,y)}return l(m)}function p(e){var t,n,r,o,a,l,u,h,p,f,m,g,v,y,S,x=[];for(g=(e=s(e)).length,t=P,n=0,a=R,l=0;l<g;++l)(m=e[l])<128&&x.push(I(m));for(r=o=x.length,o&&x.push(M);r<g;){for(u=b,l=0;l<g;++l)(m=e[l])>=t&&m<u&&(u=m);for(u-t>O((b-n)/(v=r+1))&&i("overflow"),n+=(u-t)*v,t=u,l=0;l<g;++l)if((m=e[l])<t&&++n>b&&i("overflow"),m==t){for(h=n,p=w;f=p<=a?C:p>=a+E?E:p-a,!(h<f);p+=w)S=h-f,y=w-f,x.push(I(c(f+S%y,0))),h=O(S/y);x.push(I(c(h,0))),a=d(n,v,r==o),n=0,++r}++n,++t}return x.join("")}var f="object"==typeof n&&n,m="object"==typeof t&&t&&t.exports==f&&t,g="object"==typeof e&&e;g.global!==g&&g.window!==g||(r=g);var v,y,b=2147483647,w=36,C=1,E=26,S=38,x=700,R=72,P=128,M="-",T=/^xn--/,k=/[^ -~]/,A=/\x2E|\u3002|\uFF0E|\uFF61/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=w-C,O=Math.floor,I=String.fromCharCode;if(v={version:"1.2.4",ucs2:{decode:s,encode:l},decode:h,encode:p,toASCII:function(e){return a(e,function(e){return k.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return a(e,function(e){return T.test(e)?h(e.slice(4).toLowerCase()):e})}},f&&!f.nodeType)if(m)m.exports=v;else for(y in v)v.hasOwnProperty(y)&&(f[y]=v[y]);else r.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){function r(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}function i(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){s("Unable to copy canvas content from",e,t)}}function o(e,t){for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;)!0!==t&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(o(r,t)),r=r.nextSibling;return 1===e.nodeType&&(n._scrollTop=e.scrollTop,n._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?i(e,n):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value)),n}function a(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)a(t),t=t.nextSibling}}var s=e("./log");t.exports=function(e,t,n,i,s,l,u){var c=o(e.documentElement,s.javascriptEnabled),d=t.createElement("iframe");return d.className="html2canvas-container",d.style.visibility="hidden",d.style.position="fixed",d.style.left="-10000px",d.style.top="0px",d.style.border="0",d.width=n,d.height=i,d.scrolling="no",t.body.appendChild(d),new Promise(function(t){var n=d.contentWindow.document;d.contentWindow.onload=d.onload=function(){var e=setInterval(function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(e),"view"===s.type&&(d.contentWindow.scrollTo(l,u),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||d.contentWindow.scrollY===u&&d.contentWindow.scrollX===l||(n.documentElement.style.top=-u+"px",n.documentElement.style.left=-l+"px",n.documentElement.style.position="absolute")),t(d))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),r(e,l,u),n.replaceChild(n.adoptNode(c),n.documentElement),n.close()})}},{"./log":13}],3:[function(e,t,n){function r(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}r.prototype.darken=function(e){var t=1-e;return new r([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var i=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(e){var t=null;return null!==(t=e.match(i))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var o=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(e){var t=null;return null!==(t=e.match(s))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(e){e=e.toLowerCase();var t=l[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},r.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=r},{}],4:[function(e,t,n){function r(e,t){var n=E++;if((t=t||{}).logging&&(g.options.logging=!0,g.options.start=Date.now()),t.async=void 0===t.async||t.async,t.allowTaint=void 0!==t.allowTaint&&t.allowTaint,t.removeContainer=void 0===t.removeContainer||t.removeContainer,t.javascriptEnabled=void 0!==t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout=void 0===t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:h,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var r=null!=t.width?t.width:window.innerWidth,a=null!=t.height?t.height:window.innerHeight;return b(c(e),t.proxy,document,r,a,t).then(function(e){return o(e.contentWindow.document.documentElement,e,t,r,a)})}var s=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return s.setAttribute(C+n,n),i(s.ownerDocument,t,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(e){return"function"==typeof t.onrendered&&(g("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}function i(e,t,n,r,i){return y(e,e,n,r,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(a){g("Document cloned");var s=C+i,l="["+s+"='"+i+"']";e.querySelector(l).removeAttribute(s);var u=a.contentWindow,c=u.document.querySelector(l);return("function"==typeof t.onclone?Promise.resolve(t.onclone(u.document)):Promise.resolve(!0)).then(function(){return o(c,a,t,n,r)})})}function o(e,t,n,r,i){var o=t.contentWindow,c=new d(o.document),h=new p(n,c),m=w(e),v="view"===n.type?r:l(o.document),y="view"===n.type?i:u(o.document),b=new n.renderer(v,y,h,n,document);return new f(e,b,c,h,n).ready.then(function(){g("Finished rendering");var r;return r="view"===n.type?s(b.canvas,{width:b.canvas.width,height:b.canvas.height,top:0,left:0,x:0,y:0}):e===o.document.body||e===o.document.documentElement||null!=n.canvas?b.canvas:s(b.canvas,{width:null!=n.width?n.width:m.width,height:null!=n.height?n.height:m.height,top:m.top,left:m.left,x:0,y:0}),a(t,n),r})}function a(e,t){t.removeContainer&&(e.parentNode.removeChild(e),g("Cleaned up container"))}function s(e,t){var n=document.createElement("canvas"),r=Math.min(e.width-1,Math.max(0,t.left)),i=Math.min(e.width,Math.max(1,t.left+t.width)),o=Math.min(e.height-1,Math.max(0,t.top)),a=Math.min(e.height,Math.max(1,t.top+t.height));n.width=t.width,n.height=t.height;var s=i-r,l=a-o;return g("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",s,"height:",l),g("Resulting crop with width",t.width,"and height",t.height,"with x",r,"and y",o),n.getContext("2d").drawImage(e,r,o,s,l,t.x,t.y,s,l),n}function l(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function u(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function c(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}var d=e("./support"),h=e("./renderers/canvas"),p=e("./imageloader"),f=e("./nodeparser"),m=e("./nodecontainer"),g=e("./log"),v=e("./utils"),y=e("./clone"),b=e("./proxy").loadUrlDocument,w=v.getBounds,C="data-html2canvas-node",E=0;r.CanvasRenderer=h,r.NodeContainer=m,r.log=g,r.utils=v;var S="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;t.exports=S},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,t,n){function r(e){if(this.src=e,i("DummyImageContainer for",e),!this.promise||!this.image){i("Initiating DummyImageContainer"),r.prototype.image=new Image;var t=this.image;r.prototype.promise=new Promise(function(e,n){t.onload=e,t.onerror=n,t.src=o(),!0===t.complete&&e(t)})}}var i=e("./log"),o=e("./utils").smallImage;t.exports=r},{"./log":13,"./utils":26}],6:[function(e,t,n){var r=e("./utils").smallImage;t.exports=function(e,t){var n,i,o=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span");o.style.visibility="hidden",o.style.fontFamily=e,o.style.fontSize=t,o.style.margin=0,o.style.padding=0,document.body.appendChild(o),a.src=r(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),o.appendChild(s),o.appendChild(a),n=a.offsetTop-s.offsetTop+1,o.removeChild(s),o.appendChild(document.createTextNode("Hidden Text")),o.style.lineHeight="normal",a.style.verticalAlign="super",i=a.offsetTop-o.offsetTop+1,document.body.removeChild(o),this.baseline=n,this.lineWidth=1,this.middle=i}},{"./utils":26}],7:[function(e,t,n){function r(){this.data={}}var i=e("./font");r.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new i(e,t)),this.data[e+"-"+t]},t.exports=r},{"./font":6}],8:[function(e,t,n){function r(t,n,r){this.image=null,this.src=t;var o=this,a=i(t);this.promise=(n?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(r.proxy,a,r)).then(function(t){return e("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(e){return o.image=e})}var i=e("./utils").getBounds,o=e("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(e,t,n){var r=this.src;return o(r.src,e,r.ownerDocument,t.width,t.height,n)},t.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,t,n){function r(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,t.exports=r},{}],10:[function(e,t,n){t.exports=function(e,t){this.src=e,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(r,i){n.image.onload=r,n.image.onerror=i,t&&(n.image.crossOrigin="anonymous"),n.image.src=e,!0===n.image.complete&&r(n.image)})}},{}],11:[function(e,t,n){function r(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var i=e("./log"),o=e("./imagecontainer"),a=e("./dummyimagecontainer"),s=e("./proxyimagecontainer"),l=(e("./framecontainer"),e("./svgcontainer")),u=e("./svgnodecontainer"),c=e("./lineargradientcontainer"),d=e("./webkitgradientcontainer"),h=e("./utils").bind;r.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},r.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},r.prototype.addImage=function(e,t){return function(n){n.args.forEach(function(r){this.imageExists(e,r)||(e.splice(0,0,t.call(this,n)),i("Added image #"+e.length,"string"==typeof r?r.substring(0,100):r))},this)}},r.prototype.hasImageBackground=function(e){return"none"!==e.method},r.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new o(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new o(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(t,!0):this.options.proxy?new s(t,this.options.proxy):new a(t):new l(t)}return"linear-gradient"===e.method?new c(e):"gradient"===e.method?new d(e):"svg"===e.method?new u(e.args[0],this.support.svg):new a(e)},r.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||l.prototype.isInline(e)},r.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},r.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},r.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},r.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new a(e.src).promise.then(function(t){e.image=t})})},r.prototype.get=function(e){var t=null;return this.images.some(function(n){return(t=n).src===e})?t:null},r.prototype.fetch=function(e){return this.images=e.reduce(h(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){i("Succesfully loaded image #"+(t+1),e)},function(n){i("Failed loading image #"+(t+1),e,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),i("Finished searching images"),this},r.prototype.timeout=function(e,t){var n,r=Promise.race([e.promise,new Promise(function(r,o){n=setTimeout(function(){i("Timed out loading image",e),o(e)},t)})]).then(function(e){return clearTimeout(n),e});return r.catch(function(){clearTimeout(n)}),r},t.exports=r},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,t,n){function r(e){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var t=r.REGEXP_DIRECTION.test(e.args[0])||!i.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=n;break;case"center":break;default:var i=.01*parseFloat(e,10);if(isNaN(i))break;0===t?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(i.REGEXP_COLORSTOP),n=+t[2],r=0===n?"%":t[3];return{color:new o(t[1]),stop:"%"===r?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(n,r){return null!==n.stop&&(e.stop=(n.stop-this.colorStops[t-1].stop)/(r+1)+this.colorStops[t-1].stop,!0)},this)},this)}var i=e("./gradientcontainer"),o=e("./color");r.prototype=Object.create(i.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,t.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(e,t,n){var r=function(){r.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-r.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},t.exports=r},{}],14:[function(e,t,n){function r(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function i(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function o(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function a(e){return-1!==e.toString().indexOf("%")}function s(e){return e.replace("px","")}function l(e){return parseFloat(e)}var u=e("./color"),c=e("./utils"),d=c.getBounds,h=c.parseBackgrounds,p=c.offsetBounds;r.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},r.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},r.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},r.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},r.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},r.prototype.prefixedCss=function(e){var t=["webkit","moz","ms","o"],n=this.css(e);return void 0===n&&t.some(function(t){return void 0!==(n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===n?null:n},r.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},r.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},r.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new u(this.css(e)))},r.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},r.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},r.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},r.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=h(this.css("backgroundImage")))},r.prototype.cssList=function(e,t){var n=(this.css(e)||"").split(",");return n=n[t||0]||n[0]||"auto",1===(n=n.trim().split(" ")).length&&(n=[n[0],a(n[0])?"auto":n[0]]),n},r.prototype.parseBackgroundSize=function(e,t,n){var r,i,o=this.cssList("backgroundSize",n);if(a(o[0]))r=e.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=e.width/e.height,l=t.width/t.height;return s<l^"contain"===o[0]?{width:e.height*l,height:e.height}:{width:e.width,height:e.width/l}}r=parseInt(o[0],10)}return i="auto"===o[0]&&"auto"===o[1]?t.height:"auto"===o[1]?r/t.width*t.height:a(o[1])?e.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(r=i/t.height*t.width),{width:r,height:i}},r.prototype.parseBackgroundPosition=function(e,t,n,r){var i,o,s=this.cssList("backgroundPosition",n);return i=a(s[0])?(e.width-(r||t).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?i/t.width*t.height:a(s[1])?(e.height-(r||t).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(i=o/t.height*t.width),{left:i,top:o}},r.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},r.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var n=e.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);t.push({color:new u(i[0]),offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return t},r.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(s).map(l);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},r.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?o(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t||[1,0,0,1,0,0]}return this.transformMatrix},r.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?p(this.node):d(this.node))},r.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},r.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=i(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("")),0===e.length?this.node.placeholder||"":e},r.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,r.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,r.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,r.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=r},{"./color":3,"./utils":26}],15:[function(e,t,n){function r(e,t,n,r,i){U("Starting NodeParser"),this.renderer=t,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new J(!0,1,e.ownerDocument,null);var o=new V(e,null);if(i.background&&t.rectangle(0,0,t.width,t.height,new Q(i.background)),e===e.ownerDocument.documentElement){var a=new V(o.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,a.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=D([o].concat(this.getChildren(o)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new H,U("Fetched nodes, total:",this.nodes.length),U("Calculate overflow clips"),this.calculateOverflowClips(),U("Start fetching images"),this.images=r.fetch(this.nodes.filter(M)),this.ready=this.images.ready.then(G(function(){return U("Images loaded, starting parsing"),U("Creating stacking contexts"),this.createStackingContexts(),U("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),U("Render queue created with "+this.renderQueue.length+" items"),new Promise(G(function(e){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function i(e){return e.parent&&e.parent.clip.length}function o(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function a(){}function s(e,t,n,r){return e.map(function(i,o){if(i.width>0){var a=t.left,s=t.top,l=t.width,u=t.height-e[2].width;switch(o){case 0:u=e[0].width,i.args=d({c1:[a,s],c2:[a+l,s],c3:[a+l-e[1].width,s+u],c4:[a+e[3].width,s+u]},r[0],r[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:a=t.left+t.width-e[1].width,l=e[1].width,i.args=d({c1:[a+l,s],c2:[a+l,s+u+e[2].width],c3:[a,s+u],c4:[a,s+e[0].width]},r[1],r[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+t.height-e[2].width,u=e[2].width,i.args=d({c1:[a+l,s+u],c2:[a,s+u],c3:[a+e[3].width,s],c4:[a+l-e[3].width,s]},r[2],r[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:l=e[3].width,i.args=d({c1:[a,s+u+e[2].width],c2:[a,s],c3:[a+l,s+e[0].width],c4:[a+l,s+u]},r[3],r[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return i})}function l(e,t,n,r){var i=(Math.sqrt(2)-1)/3*4,o=n*i,a=r*i,s=e+n,l=t+r;return{topLeft:c({x:e,y:l},{x:e,y:l-a},{x:s-o,y:t},{x:s,y:t}),topRight:c({x:e,y:t},{x:e+o,y:t},{x:s,y:l-a},{x:s,y:l}),bottomRight:c({x:s,y:t},{x:s,y:t+a},{x:e+o,y:l},{x:e,y:l}),bottomLeft:c({x:s,y:l},{x:s-o,y:l},{x:e,y:t+a},{x:e,y:t})}}function u(e,t,n){var r=e.left,i=e.top,o=e.width,a=e.height,s=t[0][0]<o/2?t[0][0]:o/2,u=t[0][1]<a/2?t[0][1]:a/2,c=t[1][0]<o/2?t[1][0]:o/2,d=t[1][1]<a/2?t[1][1]:a/2,h=t[2][0]<o/2?t[2][0]:o/2,p=t[2][1]<a/2?t[2][1]:a/2,f=t[3][0]<o/2?t[3][0]:o/2,m=t[3][1]<a/2?t[3][1]:a/2,g=o-c,v=a-p,y=o-h,b=a-m;return{topLeftOuter:l(r,i,s,u).topLeft.subdivide(.5),topLeftInner:l(r+n[3].width,i+n[0].width,Math.max(0,s-n[3].width),Math.max(0,u-n[0].width)).topLeft.subdivide(.5),topRightOuter:l(r+g,i,c,d).topRight.subdivide(.5),topRightInner:l(r+Math.min(g,o+n[3].width),i+n[0].width,g>o+n[3].width?0:c-n[3].width,d-n[0].width).topRight.subdivide(.5),bottomRightOuter:l(r+y,i+v,h,p).bottomRight.subdivide(.5),bottomRightInner:l(r+Math.min(y,o-n[3].width),i+Math.min(v,a+n[0].width),Math.max(0,h-n[1].width),p-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(r,i+b,f,m).bottomLeft.subdivide(.5),bottomLeftInner:l(r+n[3].width,i+b,Math.max(0,f-n[3].width),m-n[2].width).bottomLeft.subdivide(.5)}}function c(e,t,n,r){var i=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:r,subdivide:function(o){var a=i(e,t,o),s=i(t,n,o),l=i(n,r,o),u=i(a,s,o),d=i(s,l,o),h=i(u,d,o);return[c(e,a,u,h),c(h,d,l,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function d(e,t,n,r,i,o,a){var s=[];return t[0]>0||t[1]>0?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function h(e,t,n,r,i,o,a){t[0]>0||t[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",o,a]),(n[0]>0||n[1]>0)&&e.push(["line",i[0].start.x,i[0].start.y])}function p(e){return e.cssInt("zIndex")<0}function f(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function g(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function v(e){return e instanceof J}function y(e){return e.node.data.trim().length>0}function b(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function w(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var n=e.css("border"+t+"Radius").split(" ");return n.length<=1&&(n[1]=n[0]),n.map(_)})}function C(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function E(e){var t=e.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(t)?e.css("zIndex"):"auto")}function S(e){return"static"!==e.css("position")}function x(e){return"none"!==e.css("float")}function R(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}function P(e){var t=this;return function(){return!e.apply(t,arguments)}}function M(e){return e.node.nodeType===Node.ELEMENT_NODE}function T(e){return!0===e.isPseudoElement}function k(e){return e.node.nodeType===Node.TEXT_NODE}function A(e){return function(t,n){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(n.cssInt("zIndex")+e.indexOf(n)/e.length)}}function N(e){return e.getOpacity()<1}function _(e){return parseInt(e,10)}function O(e){return e.width}function I(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function D(e){return[].concat.apply([],e)}function L(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function F(e){for(var t,n=[],r=0,i=!1;e.length;)z(e[r])===i?((t=e.splice(0,r)).length&&n.push(q.ucs2.encode(t)),i=!i,r=0):r++,r>=e.length&&(t=e.splice(0,r)).length&&n.push(q.ucs2.encode(t));return n}function z(e){return-1!==[32,13,10,9,45].indexOf(e)}function B(e){return/[^\u0000-\u00ff]/.test(e)}var U=e("./log"),q=e("punycode"),V=e("./nodecontainer"),W=e("./textcontainer"),j=e("./pseudoelementcontainer"),H=e("./fontmetrics"),Q=e("./color"),J=e("./stackingcontext"),X=e("./utils"),G=X.bind,$=X.getBounds,Y=X.parseBackgrounds,K=X.offsetBounds;r.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(M(e)){T(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],n=e.parseClip();n&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&t.push([["rect",e.bounds.left+n.left,e.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),e.clip=i(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,T(e)&&e.cleanDOM()}else k(e)&&(e.clip=i(e)?e.parent.clip:[]);T(e)||(e.bounds=null)},this)},r.prototype.asyncRenderer=function(e,t,n){n=n||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():n+20>Date.now()?this.asyncRenderer(e,t,n):setTimeout(G(function(){this.asyncRenderer(e,t)},this),0)},r.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},r.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},r.prototype.createStyles=function(e,t){var n=e.createElement("style");n.innerHTML=t,e.body.appendChild(n)},r.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(e,":before"),r=this.getPseudoElement(e,":after");n&&t.push(n),r&&t.push(r)}return D(t)},r.prototype.getPseudoElement=function(e,t){var n=e.computedStyle(t);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r=L(n.content),i="url"===r.substr(0,3),a=document.createElement(i?"img":"html2canvaspseudoelement"),s=new j(a,e,t),l=n.length-1;l>=0;l--){var u=o(n.item(l));a.style[u]=n[u]}if(a.className=j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,i)return a.src=Y(r)[0].args[0],[s];var c=document.createTextNode(r);return a.appendChild(c),[s,new W(c,s)]},r.prototype.getChildren=function(e){return D([].filter.call(e.node.childNodes,C).map(function(t){var n=[t.nodeType===Node.TEXT_NODE?new W(t,e):new V(t,e)].filter(I);return t.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==t.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},r.prototype.newStackingContext=function(e,t){var n=new J(t,e.getOpacity(),e.node,e.parent);e.cloneTo(n),(t?n.getParentStack(this):n.parent.stack).contexts.push(n),e.stack=n},r.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){M(e)&&(this.isRootElement(e)||N(e)||E(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):M(e)&&(S(e)&&m(e)||R(e)||x(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},r.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},r.prototype.isRootElement=function(e){return null===e.parent},r.prototype.sortStackingContexts=function(e){e.contexts.sort(A(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},r.prototype.parseTextBounds=function(e){return function(t,n,r){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var i=r.slice(0,n).join("").length;return this.getRangeBounds(e.node,i,t.length)}if(e.node&&"string"==typeof e.node.data){var o=e.node.splitText(t.length),a=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=o,a}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(t.length));return{}}},r.prototype.getWrapperBounds=function(e,t){var n=e.ownerDocument.createElement("html2canvaswrapper"),r=e.parentNode,i=e.cloneNode(!0);n.appendChild(e.cloneNode(!0)),r.replaceChild(n,e);var o=t?K(n):$(n);return r.replaceChild(i,n),o},r.prototype.getRangeBounds=function(e,t,n){var r=this.range||(this.range=e.ownerDocument.createRange());return r.setStart(e,t),r.setEnd(e,t+n),r.getBoundingClientRect()},r.prototype.parse=function(e){var t=e.contexts.filter(p),n=e.children.filter(M),r=n.filter(P(x)),i=r.filter(P(S)).filter(P(g)),o=n.filter(P(S)).filter(x),s=r.filter(P(S)).filter(g),l=e.contexts.concat(r.filter(S)).filter(m),u=e.children.filter(k).filter(y),c=e.contexts.filter(f);t.concat(i).concat(o).concat(s).concat(l).concat(u).concat(c).forEach(function(e){this.renderQueue.push(e),v(e)&&(this.parse(e),this.renderQueue.push(new a))},this)},r.prototype.paint=function(e){try{e instanceof a?this.renderer.ctx.restore():k(e)?(T(e.parent)&&e.parent.appendToDOM(),this.paintText(e),T(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(U(e),this.options.strict)throw e}},r.prototype.paintNode=function(e){v(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},r.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(O))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(e.node);n?this.renderer.renderImage(e,t,e.borders,n):U("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var r=this.images.get(e.node.src);r?this.renderer.renderImage(e,t,e.borders,r):U("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},r.prototype.paintCheckbox=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height),r={width:n-1,height:n-1,top:t.top,left:t.left},i=[3,3],o=[i,i,i,i],a=[1,1,1,1].map(function(e){return{color:new Q("#A5A5A5"),width:e}}),l=u(r,o,a);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new Q("#DEDEDE")),this.renderer.renderBorders(s(a,r,l,o)),e.node.checked&&(this.renderer.font(new Q("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("",r.left+n/6,r.top+n-1))},this)},r.prototype.paintRadio=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,n,new Q("#DEDEDE"),1,new Q("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+n/4)+1,Math.ceil(t.top+n/4)+1,Math.floor(n/2),new Q("#424242"))},this)},r.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var n=e.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{r.style[t]=e.css(t)}catch(e){U("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var i=e.parseBounds();r.style.position="fixed",r.style.left=i.left+"px",r.style.top=i.top+"px",r.textContent=t,n.body.appendChild(r),this.paintText(new W(r.firstChild,e)),n.body.removeChild(r)}},r.prototype.paintText=function(e){e.applyTextTransform();var t=q.ucs2.decode(e.node.data),n=this.options.letterRendering&&!b(e)||B(e.node.data)?t.map(function(e){return q.ucs2.encode([e])}):F(t),r=e.parent.fontWeight(),i=e.parent.css("fontSize"),o=e.parent.css("fontFamily"),a=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),r,i,o),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){n.map(this.parseTextBounds(e),this).forEach(function(t,r){t&&(this.renderer.text(n[r],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(o,i)))},this)},this)},r.prototype.renderTextDecoration=function(e,t,n){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+n.baseline+n.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+n.middle+n.lineWidth),t.width,1,e.color("color"))}};var Z={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};r.prototype.parseBorders=function(e){var t=e.parseBounds(),n=w(e),r=["Top","Right","Bottom","Left"].map(function(t,n){var r=e.css("border"+t+"Style"),i=e.color("border"+t+"Color");"inset"===r&&i.isBlack()&&(i=new Q([255,255,255,i.a]));var o=Z[r]?Z[r][n]:null;return{width:e.cssInt("border"+t+"Width"),color:o?i[o[0]](o[1]):i,args:null}}),i=u(t,n,r);return{clip:this.parseBackgroundClip(e,i,r,n,t),borders:s(r,t,i,n)}},r.prototype.parseBackgroundClip=function(e,t,n,r,i){var o=[];switch(e.css("backgroundClip")){case"content-box":case"padding-box":h(o,r[0],r[1],t.topLeftInner,t.topRightInner,i.left+n[3].width,i.top+n[0].width),h(o,r[1],r[2],t.topRightInner,t.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),h(o,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),h(o,r[3],r[0],t.bottomLeftInner,t.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:h(o,r[0],r[1],t.topLeftOuter,t.topRightOuter,i.left,i.top),h(o,r[1],r[2],t.topRightOuter,t.bottomRightOuter,i.left+i.width,i.top),h(o,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,i.left+i.width,i.top+i.height),h(o,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,i.left,i.top+i.height)}return o},t.exports=r},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,t,n){function r(e,t,n){var r="withCredentials"in new XMLHttpRequest;if(!t)return Promise.reject("No proxy configured");var s=o(r),u=a(t,e,s);return r?l(u):i(n,u,s).then(function(e){return h(e.content)})}function i(e,t,n){return new Promise(function(r,i){var o=e.createElement("script"),a=function(){delete window.html2canvas.proxy[n],e.body.removeChild(o)};window.html2canvas.proxy[n]=function(e){a(),r(e)},o.src=t,o.onerror=function(e){a(),i(e)},e.body.appendChild(o)})}function o(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++p+"_"+Math.round(1e5*Math.random())}function a(e,t,n){return e+"?url="+encodeURIComponent(t)+(n.length?"&callback=html2canvas.proxy."+n:"")}function s(e){return function(t){var n,r=new DOMParser;try{n=r.parseFromString(t,"text/html")}catch(e){c("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(t),n.close()}catch(e){c("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=t}}var i=n.querySelector("base");if(!i||!i.href.host){var o=n.createElement("base");o.href=e,n.head.insertBefore(o,n.head.firstChild)}return n}}var l=e("./xhr"),u=e("./utils"),c=e("./log"),d=e("./clone"),h=u.decode64,p=0;n.Proxy=r,n.ProxyURL=function(e,t,n){var r="crossOrigin"in new Image,s=o(r),l=a(t,e,s);return r?Promise.resolve(l):i(n,l,s).then(function(e){return"data:"+e.type+";base64,"+e.content})},n.loadUrlDocument=function(e,t,n,i,o,a){return new r(e,t,window.document).then(s(e)).then(function(e){return d(e,n,i,o,a,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,t,n){var r=e("./proxy").ProxyURL;t.exports=function(e,t){var n=document.createElement("a");n.href=e,e=n.href,this.src=e,this.image=new Image;var i=this;this.promise=new Promise(function(n,o){i.image.crossOrigin="Anonymous",i.image.onload=n,i.image.onerror=o,new r(e,t,document).then(function(e){i.image.src=e}).catch(o)})}},{"./proxy":16}],18:[function(e,t,n){function r(e,t,n){i.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===n}var i=e("./nodecontainer");r.prototype.cloneTo=function(e){r.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},(r.prototype=Object.create(i.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=r},{"./nodecontainer":14}],19:[function(e,t,n){function r(e,t,n,r,i){this.width=e,this.height=t,this.images=n,this.options=r,this.document=i}var i=e("./log");r.prototype.renderImage=function(e,t,n,r){var i=e.cssInt("paddingLeft"),o=e.cssInt("paddingTop"),a=e.cssInt("paddingRight"),s=e.cssInt("paddingBottom"),l=n.borders,u=t.width-(l[1].width+l[3].width+i+a),c=t.height-(l[0].width+l[2].width+o+s);this.drawImage(r,0,0,r.image.width||u,r.image.height||c,t.left+i+l[3].width,t.top+o+l[0].width,u,c)},r.prototype.renderBackground=function(e,t,n){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,n))},r.prototype.renderBackgroundColor=function(e,t){var n=e.color("backgroundColor");n.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,n)},r.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},r.prototype.renderBackgroundImage=function(e,t,n){e.parseBackgroundImages().reverse().forEach(function(r,o,a){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(e,t,s,a.length-(o+1),n):i("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(r.value);l?this.renderBackgroundGradient(l,t,n):i("Error loading background-image",r.args[0]);break;case"none":break;default:i("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(e,t,n,r,i){var o=e.parseBackgroundSize(t,n.image,r),a=e.parseBackgroundPosition(t,n.image,r,o);switch(e.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,o,t,t.left+i[3],t.top+a.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,o,t,t.left+a.left+i[3],t.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,a,o,t,t.left+a.left+i[3],t.top+a.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,a,o,{top:t.top,left:t.left},i[3],i[0])}},t.exports=r},{"./log":13}],20:[function(e,t,n){function r(e,t){o.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",e,"x",t)}function i(e){return e.length>0}var o=e("../renderer"),a=e("../lineargradientcontainer"),s=e("../log");(r.prototype=Object.create(o.prototype)).setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},r.prototype.rectangle=function(e,t,n,r,i){this.setFillStyle(i).fillRect(e,t,n,r)},r.prototype.circle=function(e,t,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(e+n/2,t+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},r.prototype.circleStroke=function(e,t,n,r,i,o){this.circle(e,t,n,r),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},r.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},r.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},r.prototype.drawImage=function(e,t,n,r,i,o,a,s,l){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,n,r,i,o,a,s,l)},r.prototype.clip=function(e,t,n){this.ctx.save(),e.filter(i).forEach(function(e){this.shape(e).clip()},this),t.call(n),this.ctx.restore()},r.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},r.prototype.font=function(e,t,n,r,i,o){this.setFillStyle(e).font=[t,n,r,i,o].join(" ").split(",")[0]},r.prototype.fontShadow=function(e,t,n,r){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},r.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},r.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},r.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},r.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},r.prototype.text=function(e,t,n){this.ctx.fillText(e,t,n)},r.prototype.backgroundRepeatShape=function(e,t,n,r,i,o,a,s,l){var u=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+a),Math.round(o)],["line",Math.round(i+a),Math.round(s+o)],["line",Math.round(i),Math.round(s+o)]];this.clip([u],function(){this.renderBackgroundRepeat(e,t,n,r,l[3],l[0])},this)},r.prototype.renderBackgroundRepeat=function(e,t,n,r,i,o){var a=Math.round(r.left+t.left+i),s=Math.round(r.top+t.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},r.prototype.renderBackgroundGradient=function(e,t){if(e instanceof a){var n=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){n.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,n)}},r.prototype.resizeImage=function(e,t){var n=e.image;if(n.width===t.width&&n.height===t.height)return n;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),r},t.exports=r},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,t,n){function r(e,t,n,r){i.call(this,n,r),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var i=e("./nodecontainer");(r.prototype=Object.create(i.prototype)).getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=r},{"./nodecontainer":14}],22:[function(e,t,n){function r(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(e){var t,n,r=!1;return e.createRange&&(t=e.createRange()).getBoundingClientRect&&((n=e.createElement("boundtest")).style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),123===t.getBoundingClientRect().height&&(r=!0),e.body.removeChild(n)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),n=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},t.exports=r},{}],23:[function(e,t,n){function r(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?Promise.resolve(t.inlineFormatting(e)):i(e)}).then(function(e){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,n))})})}var i=e("./xhr"),o=e("./utils").decode64;r.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},r.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},r.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},r.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},r.prototype.createCanvas=function(e){var t=this;return function(n,r){var i=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=i.lowerCanvasEl,i.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,r)).renderAll(),e(i.lowerCanvasEl)}},r.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):o(e)},t.exports=r},{"./utils":26,"./xhr":28}],24:[function(e,t,n){function r(e,t){this.src=e,this.image=null;var n=this;this.promise=t?new Promise(function(t,r){n.image=new Image,n.image.onload=t,n.image.onerror=r,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),!0===n.image.complete&&t(n.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,n.createCanvas.call(n,t))})})}var i=e("./svgcontainer");r.prototype=Object.create(i.prototype),t.exports=r},{"./svgcontainer":23}],25:[function(e,t,n){function r(e,t){o.call(this,e,t)}function i(e,t,n){if(e.length>0)return t+n.toUpperCase()}var o=e("./nodecontainer");(r.prototype=Object.create(o.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return t.toUpperCase();default:return t}},t.exports=r},{"./nodecontainer":14}],26:[function(e,t,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(e,t){return function(){return e.apply(t,arguments)}},n.decode64=function(e){var t,n,r,i,o,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=e.length,c="";for(t=0;t<u;t+=4)o=l.indexOf(e[t])<<2|(n=l.indexOf(e[t+1]))>>4,a=(15&n)<<4|(r=l.indexOf(e[t+2]))>>2,s=(3&r)<<6|(i=l.indexOf(e[t+3])),c+=64===r?String.fromCharCode(o):64===i||-1===i?String.fromCharCode(o,a):String.fromCharCode(o,a,s);return c},n.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+n,left:t.left,width:n,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},n.offsetBounds=function(e){var t=e.offsetParent?n.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},n.parseBackgrounds=function(e){var t,n,r,i,o,a,s,l=[],u=0,c=0,d=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===t.substr(0,1)&&(i=t.indexOf("-",1)+1)>0&&(r=t.substr(0,i),t=t.substr(i)),l.push({prefix:r,method:t.toLowerCase(),value:o,args:s,image:null})),s=[],t=r=n=o=""};return s=[],t=r=n=o="",e.split("").forEach(function(e){if(!(0===u&&" \r\n\t".indexOf(e)>-1)){switch(e){case'"':a?a===e&&(a=null):a=e;break;case"(":if(a)break;if(0===u)return u=1,void(o+=e);c++;break;case")":if(a)break;if(1===u){if(0===c)return u=0,o+=e,void d();c--}break;case",":if(a)break;if(0===u)return void d();if(1===u&&0===c&&!t.match(/^url$/i))return s.push(n),n="",void(o+=e)}o+=e,0===u?t+=e:n+=e}}),d(),l}},{}],27:[function(e,t,n){function r(e){i.apply(this,arguments),this.type="linear"===e.args[0]?i.TYPES.LINEAR:i.TYPES.RADIAL}var i=e("./gradientcontainer");r.prototype=Object.create(i.prototype),t.exports=r},{"./gradientcontainer":9}],28:[function(e,t,n){t.exports=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?t(r.responseText):n(new Error(r.statusText))},r.onerror=function(){n(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4)}),"undefined"==typeof Joose&&function(){var e={};e.C="undefined"!=typeof JOOSE_CFG?JOOSE_CFG:{},e.is_IE=!1,e.is_NodeJS=Boolean("undefined"!=typeof process&&process.pid),e.top=e.is_NodeJS&&global||this,e.stub=function(){return function(){throw new Error("Modules can not be instantiated")}},e.VERSION={VERSION:"3.50.1"}.VERSION,"undefined"!=typeof module&&(module.exports=e),this.Joose=e,e.A={each:function(e,t,n){n=n||this;for(var r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r))return!1},eachR:function(e,t,n){n=n||this;for(var r=e.length-1;r>=0;r--)if(!1===t.call(n,e[r],r))return!1},exists:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return!0;return!1},map:function(e,t,n){n=n||this;for(var r=[],i=0,o=e.length;i<o;i++)r.push(t.call(n,e[i],i));return r},grep:function(t,n){var r=[];return e.A.each(t,function(e){n(e)&&r.push(e)}),r},remove:function(t,n){var r=[];return e.A.each(t,function(e){e!==n&&r.push(e)}),r}},e.S={saneSplit:function(e,t){var n=(e||"").split(t);return 1!=n.length||n[0]||n.shift(),n},uppercaseFirst:function(e){return e.substr(0,1).toUpperCase()+e.substr(1,e.length-1)},strToClass:function(t,n){var r=n||e.top;return e.A.each(t.split("."),function(e){if(!r)return!1;r=r[e]}),r}};var t=function(){},n=["hasOwnProperty","valueOf","toString","constructor"],r=!0;for(var i in{toString:1})r=!1;e.O={each:function(t,i,o){o=o||this;for(var a in t)if(!1===i.call(o,t[a],a))return!1;if(r)return e.A.each(n,function(e){if(t.hasOwnProperty(e))return i.call(o,t[e],e)})},eachOwn:function(t,n,r){return r=r||this,e.O.each(t,function(e,i){if(t.hasOwnProperty(i))return n.call(r,e,i)},r)},copy:function(t,n){return n=n||{},e.O.each(t,function(e,t){n[t]=e}),n},copyOwn:function(t,n){return n=n||{},e.O.eachOwn(t,function(e,t){n[t]=e}),n},getMutableCopy:function(e){return t.prototype=e,new t},extend:function(t,n){return e.O.copy(n,t)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isInstance:function(e){return e&&e.meta&&e.constructor==e.meta.c},isClass:function(e){return e&&e.meta&&e.meta.c==e},wantArray:function(e){return e instanceof Array?e:[e]},isFunction:function(e){return"function"==typeof e&&e.constructor!=/ /.constructor}},e.I={Array:function(){return[]},Object:function(){return{}},Function:function(){return arguments.callee},Now:function(){return new Date}},e.Proto=e.stub(),e.Proto.Empty=e.stub(),e.Proto.Empty.meta={},function(){e.Proto.Object=e.stub();var t=function(){var e=t.caller;if(e==n&&(e=e.caller),!e.SUPER)throw"Invalid call to SUPER";return e.SUPER[e.methodName].apply(this,arguments)},n=function(){return this.SUPER.apply(this,arguments[0])};e.Proto.Object.prototype={SUPERARG:n,SUPER:t,INNER:function(){throw"Invalid call to INNER"},BUILD:function(e){return 1==arguments.length&&"object"==typeof e&&e||{}},initialize:function(){},toString:function(){return"a "+this.meta.name}},e.Proto.Object.meta={constructor:e.Proto.Object,methods:e.O.copy(e.Proto.Object.prototype),attributes:{}},e.Proto.Object.prototype.meta=e.Proto.Object.meta}(),function(){e.Proto.Class=function(){return this.initialize(this.BUILD.apply(this,arguments))||this};var t={VERSION:null,AUTHORITY:null,constructor:e.Proto.Class,superClass:null,name:null,attributes:null,methods:null,meta:null,c:null,defaultSuperClass:e.Proto.Object,BUILD:function(e,t){return this.name=e,{__extend__:t||{}}},initialize:function(e){var t=e.__extend__;this.VERSION=t.VERSION,this.AUTHORITY=t.AUTHORITY,delete t.VERSION,delete t.AUTHORITY,this.c=this.extractConstructor(t),this.adaptConstructor(this.c),t.constructorOnly?delete t.constructorOnly:this.construct(t)},construct:function(e){if(this.prepareProps(e)){var t=this.superClass=this.extractSuperClass(e);this.processSuperClass(t),this.adaptPrototype(this.c.prototype),this.finalize(e)}},finalize:function(e){this.processStem(e),this.extend(e)},prepareProps:function(e){return!0},extractConstructor:function(e){var t=e.hasOwnProperty("constructor")?e.constructor:this.defaultConstructor();return delete e.constructor,t},extractSuperClass:function(e){if(e.hasOwnProperty("isa")&&!e.isa)throw new Error("Attempt to inherit from undefined superclass ["+this.name+"]");var t=e.isa||this.defaultSuperClass;return delete e.isa,t},processStem:function(){var t=this.superClass.meta;this.methods=e.O.getMutableCopy(t.methods||{}),this.attributes=e.O.getMutableCopy(t.attributes||{})},initInstance:function(t,n){e.O.copyOwn(n,t)},defaultConstructor:function(){return function(e){var t=this.BUILD,n=t&&t.apply(this,arguments)||e||{},r=this.meta;return r.initInstance(this,n),r.hasMethod("initialize")&&this.initialize(n)||this}},processSuperClass:function(t){var n=t.prototype;if(!t.meta){var r=e.O.copy(n);r.isa=e.Proto.Empty,delete r.constructor;var i=new this.defaultSuperClass.meta.constructor(null,r);t.meta=n.meta=i,i.c=t}this.c.prototype=e.O.getMutableCopy(n),this.c.superClass=n},adaptConstructor:function(e){e.meta=this,e.hasOwnProperty("toString")||(e.toString=function(){return this.meta.name})},adaptPrototype:function(e){e.constructor=this.c,e.meta=this},addMethod:function(e,t){t.SUPER=this.superClass.prototype,t.methodName=e,this.methods[e]=t,this.c.prototype[e]=t},addAttribute:function(e,t){this.attributes[e]=t,this.c.prototype[e]=t},removeMethod:function(e){delete this.methods[e],delete this.c.prototype[e]},removeAttribute:function(e){delete this.attributes[e],delete this.c.prototype[e]},hasMethod:function(e){return Boolean(this.methods[e])},hasAttribute:function(e){return void 0!==this.attributes[e]},hasOwnMethod:function(e){return this.hasMethod(e)&&this.methods.hasOwnProperty(e)},hasOwnAttribute:function(e){return this.hasAttribute(e)&&this.attributes.hasOwnProperty(e)},extend:function(t){e.O.eachOwn(t,function(t,n){"meta"!=n&&"constructor"!=n&&(e.O.isFunction(t)&&!t.meta?this.addMethod(n,t):this.addAttribute(n,t))},this)},subClassOf:function(e,t){return this.subClass(t,null,e)},subClass:function(e,t,n){return e=e||{},e.isa=n||this.c,new this.constructor(t,e).c},instantiate:function(){var e=function(){};e.prototype=this.c.prototype;var t=new e;return this.c.apply(t,arguments)||t}};e.Proto.Class.prototype=e.O.getMutableCopy(e.Proto.Object.prototype),e.O.extend(e.Proto.Class.prototype,t),e.Proto.Class.prototype.meta=new e.Proto.Class("Joose.Proto.Class",t),e.Proto.Class.meta.addMethod("isa",function(e){var t=function(){};return t.prototype=this.c.prototype,new t instanceof e})}(),e.Managed=e.stub(),e.Managed.Property=new e.Proto.Class("Joose.Managed.Property",{name:null,init:null,value:null,definedIn:null,initialize:function(t){e.Managed.Property.superClass.initialize.call(this,t),this.computeValue()},computeValue:function(){this.value=this.init},preApply:function(e){},postUnApply:function(e){},apply:function(e){e[this.name]=this.value},isAppliedTo:function(e){return e[this.name]==this.value},unapply:function(e){if(!this.isAppliedTo(e))throw"Unapply of property ["+this.name+"] from ["+e+"] failed";delete e[this.name]},cloneProps:function(){return{name:this.name,init:this.init,definedIn:this.definedIn}},clone:function(e){var t=this.cloneProps();return t.name=e||t.name,new this.constructor(t)}}).c,e.Managed.Property.ConflictMarker=new e.Proto.Class("Joose.Managed.Property.ConflictMarker",{isa:e.Managed.Property,apply:function(e){throw new Error("Attempt to apply ConflictMarker ["+this.name+"] to ["+e+"]")}}).c,e.Managed.Property.Requirement=new e.Proto.Class("Joose.Managed.Property.Requirement",{isa:e.Managed.Property,apply:function(e){if(!e.meta.hasMethod(this.name))throw new Error("Requirement ["+this.name+"], defined in ["+this.definedIn.definedIn.name+"] is not satisfied for class ["+e+"]")},unapply:function(e){}}).c,e.Managed.Property.Attribute=new e.Proto.Class("Joose.Managed.Property.Attribute",{isa:e.Managed.Property,slot:null,initialize:function(){e.Managed.Property.Attribute.superClass.initialize.apply(this,arguments),this.slot=this.name},apply:function(e){e.prototype[this.slot]=this.value},isAppliedTo:function(e){return e.prototype[this.slot]==this.value},unapply:function(e){if(!this.isAppliedTo(e))throw"Unapply of property ["+this.name+"] from ["+e+"] failed";delete e.prototype[this.slot]},clearValue:function(e){delete e[this.slot]},hasValue:function(e){return e.hasOwnProperty(this.slot)},getRawValueFrom:function(e){return e[this.slot]},setRawValueTo:function(e,t){return e[this.slot]=t,this}}).c,e.Managed.Property.MethodModifier=new e.Proto.Class("Joose.Managed.Property.MethodModifier",{isa:e.Managed.Property,prepareWrapper:function(){throw"Abstract method [prepareWrapper] of "+this+" was called"},apply:function(e){var t=this.name,n=e.prototype,r=n.hasOwnProperty(t),i=n[t],o=e.meta.superClass.prototype,a=r?i:function(){return o[t].apply(this,arguments)},s=this.prepareWrapper({name:t,modifier:this.value,isOwn:r,originalCall:a,superProto:o,target:e});r&&(s.__ORIGINAL__=i),s.__CONTAIN__=this.value,s.__METHOD__=this,this.value.displayName=this.getDisplayName(e),s.displayName="internal wrapper",n[t]=s},getDisplayName:function(e){return e.meta.name+"["+this.name+"]"},isAppliedTo:function(e){var t=e.prototype[this.name];return t&&t.__CONTAIN__==this.value},unapply:function(e){var t=this.name,n=e.prototype,r=n[t].__ORIGINAL__;if(!this.isAppliedTo(e))throw"Unapply of method ["+t+"] from class ["+e+"] failed";r?n[t]=r:delete n[t]}}).c,e.Managed.Property.MethodModifier.Override=new e.Proto.Class("Joose.Managed.Property.MethodModifier.Override",{isa:e.Managed.Property.MethodModifier,prepareWrapper:function(t){var n=t.modifier,r=t.originalCall,i=t.superProto,o=i.meta.constructor,a=!(o!=e.Proto.Class&&o!=e.Proto.Object||t.isOwn&&r.IS_OVERRIDE),s=r;a&&(s=function(){var e=this.SUPER;this.SUPER=i.SUPER;var t=r.apply(this,arguments);return this.SUPER=e,t});var l=function(){var e=this.SUPER;this.SUPER=s;var t=n.apply(this,arguments);return this.SUPER=e,t};return l.IS_OVERRIDE=!0,l},getDisplayName:function(e){return e.meta.name+"[override "+this.name+"]"}}).c,e.Managed.Property.MethodModifier.Put=new e.Proto.Class("Joose.Managed.Property.MethodModifier.Put",{isa:e.Managed.Property.MethodModifier.Override,prepareWrapper:function(t){if(t.isOwn)throw"Method ["+t.name+"] is applying over something ["+t.originalCall+"] in class ["+t.target+"]";return e.Managed.Property.MethodModifier.Put.superClass.prepareWrapper.call(this,t)},getDisplayName:function(e){return e.meta.name+"["+this.name+"]"}}).c,e.Managed.Property.MethodModifier.After=new e.Proto.Class("Joose.Managed.Property.MethodModifier.After",{isa:e.Managed.Property.MethodModifier,prepareWrapper:function(e){var t=e.modifier,n=e.originalCall;return function(){var e=n.apply(this,arguments);return t.apply(this,arguments),e}},getDisplayName:function(e){return e.meta.name+"[after "+this.name+"]"}}).c,e.Managed.Property.MethodModifier.Before=new e.Proto.Class("Joose.Managed.Property.MethodModifier.Before",{isa:e.Managed.Property.MethodModifier,prepareWrapper:function(e){var t=e.modifier,n=e.originalCall;return function(){return t.apply(this,arguments),n.apply(this,arguments)}},getDisplayName:function(e){return e.meta.name+"[before "+this.name+"]"}}).c,e.Managed.Property.MethodModifier.Around=new e.Proto.Class("Joose.Managed.Property.MethodModifier.Around",{isa:e.Managed.Property.MethodModifier,prepareWrapper:function(e){var t,n=e.modifier,r=e.originalCall,i=function(){return r.apply(t,arguments)};return function(){t=this;var e=[i];return e.push.apply(e,arguments),n.apply(this,e)}},getDisplayName:function(e){return e.meta.name+"[around "+this.name+"]"}}).c,e.Managed.Property.MethodModifier.Augment=new e.Proto.Class("Joose.Managed.Property.MethodModifier.Augment",{isa:e.Managed.Property.MethodModifier,prepareWrapper:function(e){var t=function(){var e=[],n=t;do{e.push(n.IS_AUGMENT?n.__CONTAIN__:n),n=n.IS_AUGMENT&&(n.__ORIGINAL__||n.SUPER[n.methodName])}while(n);var r=this.INNER;this.INNER=function(){var t=e.pop();return t?t.apply(this,arguments):void 0};var i=this.INNER.apply(this,arguments);return this.INNER=r,i};return t.methodName=e.name,t.SUPER=e.superProto,t.IS_AUGMENT=!0,t},getDisplayName:function(e){return e.meta.name+"[augment "+this.name+"]"}}).c,e.Managed.PropertySet=new e.Proto.Class("Joose.Managed.PropertySet",{isa:e.Managed.Property,properties:null,propertyMetaClass:e.Managed.Property,initialize:function(t){e.Managed.PropertySet.superClass.initialize.call(this,t),this.properties=t.properties||{}},addProperty:function(e,t){var n=t.meta||this.propertyMetaClass;return delete t.meta,t.definedIn=this,t.name=e,this.properties[e]=new n(t)},addPropertyObject:function(e){return this.properties[e.name]=e},removeProperty:function(e){var t=this.properties[e];return delete this.properties[e],t},haveProperty:function(e){return null!=this.properties[e]},haveOwnProperty:function(e){return this.haveProperty(e)&&this.properties.hasOwnProperty(e)},getProperty:function(e){return this.properties[e]},each:function(t,n){e.O.each(this.properties,t,n||this)},eachOwn:function(t,n){e.O.eachOwn(this.properties,t,n||this)},eachAll:function(e,t){this.each(e,t)},cloneProps:function(){var t=e.Managed.PropertySet.superClass.cloneProps.call(this);return t.propertyMetaClass=this.propertyMetaClass,t},clone:function(t){var n=this.cleanClone(t);return n.properties=e.O.copyOwn(this.properties),n},cleanClone:function(e){var t=this.cloneProps();return t.name=e||t.name,new this.constructor(t)},alias:function(t){var n=this.properties;e.O.each(t,function(e,t){var r=n[t];r&&this.addPropertyObject(r.clone(e))},this)},exclude:function(t){var n=this.properties;e.A.each(t,function(e){delete n[e]})},beforeConsumedBy:function(){},flattenTo:function(t){var n=t.properties;this.eachOwn(function(r,i){var o=n[i];o instanceof e.Managed.Property.ConflictMarker||(n.hasOwnProperty(i)&&null!=o?o!=r&&(t.removeProperty(i),t.addProperty(i,{meta:e.Managed.Property.ConflictMarker})):t.addPropertyObject(r))},this)},composeTo:function(e){this.eachOwn(function(t,n){e.haveOwnProperty(n)||e.addPropertyObject(t)})},composeFrom:function(){if(arguments.length){var t=this.cleanClone();e.A.each(arguments,function(n){var r=!(n instanceof e.Managed.PropertySet),i=r?n.propertySet:n;i.beforeConsumedBy(this,t),r&&((n.alias||n.exclude)&&(i=i.clone()),n.alias&&i.alias(n.alias),n.exclude&&i.exclude(n.exclude)),i.flattenTo(t)},this),t.composeTo(this)}},preApply:function(e){this.eachOwn(function(t){t.preApply(e)})},apply:function(e){this.eachOwn(function(t){t.apply(e)})},unapply:function(e){this.eachOwn(function(t){t.unapply(e)})},postUnApply:function(e){this.eachOwn(function(t){t.postUnApply(e)})}}).c;var o=1;e.Managed.PropertySet.Mutable=new e.Proto.Class("Joose.Managed.PropertySet.Mutable",{isa:e.Managed.PropertySet,ID:null,derivatives:null,opened:null,composedFrom:null,initialize:function(t){e.Managed.PropertySet.Mutable.superClass.initialize.call(this,t),this.opened=1,this.derivatives={},this.ID=o++,this.composedFrom=[]},addComposeInfo:function(){this.ensureOpen(),e.A.each(arguments,function(t){this.composedFrom.push(t),(t instanceof e.Managed.PropertySet?t:t.propertySet).derivatives[this.ID]=this},this)},removeComposeInfo:function(){this.ensureOpen(),e.A.each(arguments,function(t){for(var n=0;n<this.composedFrom.length;){var r=this.composedFrom[n];t==(r=r instanceof e.Managed.PropertySet?r:r.propertySet)?(delete r.derivatives[this.ID],this.composedFrom.splice(n,1)):n++}},this)},ensureOpen:function(){if(!this.opened)throw"Mutation of closed property set: ["+this.name+"]"},addProperty:function(t,n){return this.ensureOpen(),e.Managed.PropertySet.Mutable.superClass.addProperty.call(this,t,n)},addPropertyObject:function(t){return this.ensureOpen(),e.Managed.PropertySet.Mutable.superClass.addPropertyObject.call(this,t)},removeProperty:function(t){return this.ensureOpen(),e.Managed.PropertySet.Mutable.superClass.removeProperty.call(this,t)},composeFrom:function(){return this.ensureOpen(),e.Managed.PropertySet.Mutable.superClass.composeFrom.apply(this,this.composedFrom)},open:function(){this.opened++,1==this.opened&&(e.O.each(this.derivatives,function(e){e.open()}),this.deCompose())},close:function(){if(!this.opened)throw"Unmatched 'close' operation on property set: ["+this.name+"]";1==this.opened&&(this.reCompose(),e.O.each(this.derivatives,function(e){e.close()})),this.opened--},reCompose:function(){this.composeFrom()},deCompose:function(){this.eachOwn(function(e,t){e.definedIn!=this&&this.removeProperty(t)},this)}}).c,e.Managed.StemElement=function(){throw"Modules may not be instantiated."},e.Managed.StemElement.Attributes=new e.Proto.Class("Joose.Managed.StemElement.Attributes",{isa:e.Managed.PropertySet.Mutable,propertyMetaClass:e.Managed.Property.Attribute}).c,e.Managed.StemElement.Methods=new e.Proto.Class("Joose.Managed.StemElement.Methods",{isa:e.Managed.PropertySet.Mutable,propertyMetaClass:e.Managed.Property.MethodModifier.Put,preApply:function(){},postUnApply:function(){}}).c,e.Managed.StemElement.Requirements=new e.Proto.Class("Joose.Managed.StemElement.Requirements",{isa:e.Managed.PropertySet.Mutable,propertyMetaClass:e.Managed.Property.Requirement,alias:function(){},exclude:function(){},flattenTo:function(e){this.each(function(t,n){e.haveProperty(n)||e.addPropertyObject(t)})},composeTo:function(e){this.flattenTo(e)},preApply:function(){},postUnApply:function(){}}).c,e.Managed.StemElement.MethodModifiers=new e.Proto.Class("Joose.Managed.StemElement.MethodModifiers",{isa:e.Managed.PropertySet.Mutable,propertyMetaClass:null,addProperty:function(e,t){var n=t.meta;delete t.meta,t.definedIn=this,t.name=e;var r=new n(t),i=this.properties;return i[e]||(i[e]=[]),i[e].push(r),r},addPropertyObject:function(e){var t=e.name,n=this.properties;return n[t]||(n[t]=[]),n[t].push(e),e},removeProperty:function(t){if(this.haveProperty(t)){var n=this.properties,r=n[t].pop();return n[t].length||e.Managed.StemElement.MethodModifiers.superClass.removeProperty.call(this,t),r}},alias:function(){},exclude:function(){},flattenTo:function(t){var n=t.properties;this.each(function(t,r){var i=n[r];null==i&&(i=n[r]=[]),e.A.each(t,function(t){e.A.exists(i,t)||i.push(t)})})},composeTo:function(e){this.flattenTo(e)},deCompose:function(){this.each(function(e,t){for(var n=0;n<e.length;)e[n].definedIn!=this?e.splice(n,1):n++})},preApply:function(e){},postUnApply:function(e){},apply:function(t){this.each(function(n,r){e.A.each(n,function(e){e.apply(t)})})},unapply:function(e){this.each(function(t,n){for(var r=t.length-1;r>=0;r--)t[r].unapply(e)})}}).c,e.Managed.PropertySet.Composition=new e.Proto.Class("Joose.Managed.PropertySet.Composition",{isa:e.Managed.PropertySet.Mutable,propertyMetaClass:e.Managed.PropertySet.Mutable,processOrder:null,each:function(t,n){var r=this.properties,n=n||this;e.A.each(this.processOrder,function(e){t.call(n,r[e],e)})},eachR:function(t,n){var r=this.properties,n=n||this;e.A.eachR(this.processOrder,function(e){t.call(n,r[e],e)})},clone:function(e){var t=this.cleanClone(e);return this.each(function(e){t.addPropertyObject(e.clone())}),t},alias:function(e){this.each(function(t){t.alias(e)})},exclude:function(e){this.each(function(t){t.exclude(e)})},flattenTo:function(e){var t=e.properties;this.each(function(n,r){var i=t[r]||e.addProperty(r,{meta:n.constructor});n.flattenTo(i)})},composeTo:function(e){var t=e.properties;this.each(function(n,r){var i=t[r]||e.addProperty(r,{meta:n.constructor});n.composeTo(i)})},deCompose:function(){this.eachR(function(e){e.open()}),e.Managed.PropertySet.Composition.superClass.deCompose.call(this)},reCompose:function(){e.Managed.PropertySet.Composition.superClass.reCompose.call(this),this.each(function(e){e.close()})},unapply:function(e){this.eachR(function(t){t.unapply(e)})}}).c,e.Managed.Stem=new e.Proto.Class("Joose.Managed.Stem",{isa:e.Managed.PropertySet.Composition,targetMeta:null,attributesMC:e.Managed.StemElement.Attributes,methodsMC:e.Managed.StemElement.Methods,requirementsMC:e.Managed.StemElement.Requirements,methodsModifiersMC:e.Managed.StemElement.MethodModifiers,processOrder:["attributes","methods","requirements","methodsModifiers"],initialize:function(t){e.Managed.Stem.superClass.initialize.call(this,t);var n=this.targetMeta;this.addProperty("attributes",{meta:this.attributesMC,properties:n?n.attributes:{}}),this.addProperty("methods",{meta:this.methodsMC,properties:n?n.methods:{}}),this.addProperty("requirements",{meta:this.requirementsMC}),this.addProperty("methodsModifiers",{meta:this.methodsModifiersMC})},reCompose:function(){var t=this.targetMeta.c;this.preApply(t),e.Managed.Stem.superClass.reCompose.call(this),this.apply(t)},deCompose:function(){var t=this.targetMeta.c;this.unapply(t),e.Managed.Stem.superClass.deCompose.call(this),this.postUnApply(t)}}).c,e.Managed.Builder=new e.Proto.Class("Joose.Managed.Builder",{targetMeta:null,_buildStart:function(t,n){t.stem.open(),e.A.each(["trait","traits","removeTrait","removeTraits","does","doesnot","doesnt"],function(e){n[e]&&(this[e](t,n[e]),delete n[e])},this)},_extend:function(t){if(!e.O.isEmpty(t)){var n=this.targetMeta;this._buildStart(n,t),e.O.eachOwn(t,function(e,t){var r=this[t];if(!r)throw new Error("Unknown builder ["+t+"] was used during extending of ["+n.c+"]");r.call(this,n,e)},this),this._buildComplete(n,t)}},_buildComplete:function(e,t){e.stem.close()},methods:function(t,n){e.O.eachOwn(n,function(e,n){t.addMethod(n,e)})},removeMethods:function(t,n){e.A.each(n,function(e){t.removeMethod(e)})},have:function(t,n){e.O.eachOwn(n,function(e,n){t.addAttribute(n,e)})},havenot:function(t,n){e.A.each(n,function(e){t.removeAttribute(e)})},havent:function(e,t){this.havenot(e,t)},after:function(t,n){e.O.each(n,function(n,r){t.addMethodModifier(r,n,e.Managed.Property.MethodModifier.After)})},before:function(t,n){e.O.each(n,function(n,r){t.addMethodModifier(r,n,e.Managed.Property.MethodModifier.Before)})},override:function(t,n){e.O.each(n,function(n,r){t.addMethodModifier(r,n,e.Managed.Property.MethodModifier.Override)})},around:function(t,n){e.O.each(n,function(n,r){t.addMethodModifier(r,n,e.Managed.Property.MethodModifier.Around)})},augment:function(t,n){e.O.each(n,function(n,r){t.addMethodModifier(r,n,e.Managed.Property.MethodModifier.Augment)})},removeModifier:function(t,n){e.A.each(n,function(e){t.removeMethodModifier(e)})},does:function(t,n){e.A.each(e.O.wantArray(n),function(e){t.addRole(e)})},doesnot:function(t,n){e.A.each(e.O.wantArray(n),function(e){t.removeRole(e)})},doesnt:function(e,t){this.doesnot(e,t)},trait:function(){this.traits.apply(this,arguments)},traits:function(e,t){if(!e.firstPass){if(!e.meta.isDetached)throw"Can't apply trait to not detached class";e.meta.extend({does:t})}},removeTrait:function(){this.removeTraits.apply(this,arguments)},removeTraits:function(e,t){if(!e.meta.isDetached)throw"Can't remove trait from not detached class";e.meta.extend({doesnot:t})},name:function(e,t){e.name=t}}).c,e.Managed.Class=new e.Proto.Class("Joose.Managed.Class",{isa:e.Proto.Class,stem:null,stemClass:e.Managed.Stem,stemClassCreated:!1,builder:null,builderClass:e.Managed.Builder,builderClassCreated:!1,isDetached:!1,firstPass:!0,skipTraitsAnchor:{},BUILD:function(){var t=e.Managed.Class.superClass.BUILD.apply(this,arguments),n=t.__extend__,r=e.O.wantArray(n.trait||n.traits||[]);return delete n.trait,delete n.traits,e.A.each(e.O.wantArray(n.does||[]),function(t){var n=t.meta instanceof e.Managed.Class?t:t.role;n.meta.meta.isDetached&&r.push(n.meta.constructor)}),r.length&&(n.traits=r),t},initInstance:function(t,n){e.O.each(this.attributes,function(r,i){r instanceof e.Managed.Attribute?r.initFromConfig(t,n):n.hasOwnProperty(i)&&(t[i]=n[i])})},defaultConstructor:function(){return function(e,t){var n=this.meta,r=e==n.skipTraitsAnchor,i=this.BUILD,o=i&&i.apply(this,r?t:arguments)||(r?t[0]:e)||{},a=o.__extend__||o,s=a.trait||a.traits;if((s||a.detached)&&(delete a.trait,delete a.traits,delete a.detached,!r)){var l=n.subClass({does:s||[]},n.name).meta;return l.isDetached=!0,l.instantiate(n.skipTraitsAnchor,arguments)}return n.initInstance(this,o),n.hasMethod("initialize")&&this.initialize(o)||this}},finalize:function(t){e.Managed.Class.superClass.finalize.call(this,t),this.stem.close(),this.afterMutate()},processStem:function(){e.Managed.Class.superClass.processStem.call(this),this.builder=new this.builderClass({targetMeta:this}),this.stem=new this.stemClass({name:this.name,targetMeta:this});var t=this.getClassInAttribute("builderClass");t&&(this.builderClassCreated=!0,this.addAttribute("builderClass",this.subClassOf(t)));var n=this.getClassInAttribute("stemClass");n&&(this.stemClassCreated=!0,this.addAttribute("stemClass",this.subClassOf(n)))},extend:function(e){e.builder&&(this.getBuilderTarget().meta.extend(e.builder),delete e.builder),e.stem&&(this.getStemTarget().meta.extend(e.stem),delete e.stem),this.builder._extend(e),this.firstPass=!1,this.stem.opened||this.afterMutate()},getBuilderTarget:function(){var e=this.getClassInAttribute("builderClass");if(!e)throw"Attempt to extend a builder on non-meta class";return e},getStemTarget:function(){var e=this.getClassInAttribute("stemClass");if(!e)throw"Attempt to extend a stem on non-meta class";return e},getClassInAttribute:function(t){var n=this.getAttribute(t);return n instanceof e.Managed.Property.Attribute&&(n=n.value),n},addMethodModifier:function(e,t,n){var r={};return r.init=t,r.meta=n,this.stem.properties.methodsModifiers.addProperty(e,r)},removeMethodModifier:function(e){return this.stem.properties.methodsModifiers.removeProperty(e)},addMethod:function(e,t,n){return n=n||{},n.init=t,this.stem.properties.methods.addProperty(e,n)},addAttribute:function(e,t,n){return n=n||{},n.init=t,this.stem.properties.attributes.addProperty(e,n)},removeMethod:function(e){return this.stem.properties.methods.removeProperty(e)},removeAttribute:function(e){return this.stem.properties.attributes.removeProperty(e)},hasMethod:function(e){return this.stem.properties.methods.haveProperty(e)},hasAttribute:function(e){return this.stem.properties.attributes.haveProperty(e)},hasMethodModifiersFor:function(e){return this.stem.properties.methodsModifiers.haveProperty(e)},hasOwnMethod:function(e){return this.stem.properties.methods.haveOwnProperty(e)},hasOwnAttribute:function(e){return this.stem.properties.attributes.haveOwnProperty(e)},getMethod:function(e){return this.stem.properties.methods.getProperty(e)},getAttribute:function(e){return this.stem.properties.attributes.getProperty(e)},eachRole:function(t,n,r){e.A.each(t,function(t,i){var o=t.meta instanceof e.Managed.Class?t:t.role;n.call(r||this,t,o,i)},this)},addRole:function(){this.eachRole(arguments,function(e,t){this.beforeRoleAdd(t);var n=e;t!=e?(n.propertySet=t.meta.stem,delete n.role):n=n.meta.stem,this.stem.addComposeInfo(n)},this)},beforeRoleAdd:function(e){var t=e.meta;t.builderClassCreated&&this.getBuilderTarget().meta.extend({does:[t.getBuilderTarget()]}),t.stemClassCreated&&this.getStemTarget().meta.extend({does:[t.getStemTarget()]}),t.meta.isDetached&&!this.firstPass&&this.builder.traits(this,t.constructor)},beforeRoleRemove:function(e){var t=e.meta;t.builderClassCreated&&this.getBuilderTarget().meta.extend({doesnt:[t.getBuilderTarget()]}),t.stemClassCreated&&this.getStemTarget().meta.extend({doesnt:[t.getStemTarget()]}),t.meta.isDetached&&!this.firstPass&&this.builder.removeTraits(this,t.constructor)},removeRole:function(){this.eachRole(arguments,function(e,t){this.beforeRoleRemove(t),this.stem.removeComposeInfo(t.meta.stem)},this)},getRoles:function(){return e.A.map(this.stem.composedFrom,function(t){return t instanceof e.Managed.PropertySet?t.targetMeta.c:t.propertySet})},does:function(t){for(var n=this.getRoles(),r=0;r<n.length;r++)if(t==n[r])return!0;for(r=0;r<n.length;r++)if(n[r].meta.does(t))return!0;var i=this.superClass.meta;return!!(this.superClass!=e.Proto.Empty&&i&&i.meta&&i.meta.hasMethod("does"))&&i.does(t)},getMethods:function(){return this.stem.properties.methods},getAttributes:function(){return this.stem.properties.attributes},afterMutate:function(){},getCurrentMethod:function(){for(var e=arguments.callee.caller,t=0;e&&t<5;e=e.caller,t++)if(e.__METHOD__)return e.__METHOD__;return null}}).c,e.Managed.Role=new e.Managed.Class("Joose.Managed.Role",{isa:e.Managed.Class,have:{defaultSuperClass:e.Proto.Empty,builderRole:null,stemRole:null},methods:{defaultConstructor:function(){return function(){throw new Error("Roles cant be instantiated")}},processSuperClass:function(){if(this.superClass!=this.defaultSuperClass)throw new Error("Roles can't inherit from anything")},getBuilderTarget:function(){return this.builderRole||(this.builderRole=(new this.constructor).c,this.builderClassCreated=!0),this.builderRole},getStemTarget:function(){return this.stemRole||(this.stemRole=(new this.constructor).c,this.stemClassCreated=!0),this.stemRole},addRequirement:function(e){this.stem.properties.requirements.addProperty(e,{})}},stem:{methods:{apply:function(){},unapply:function(){}}},builder:{methods:{requires:function(t,n){e.A.each(e.O.wantArray(n),function(e){t.addRequirement(e)},this)}}}}).c,e.Managed.Attribute=new e.Managed.Class("Joose.Managed.Attribute",{isa:e.Managed.Property.Attribute,have:{is:null,builder:null,isPrivate:!1,role:null,publicName:null,setterName:null,getterName:null,readable:!1,writeable:!1,hasGetter:!1,hasSetter:!1,required:!1,canInlineSetRaw:!0,canInlineGetRaw:!0},after:{initialize:function(){var e=this.name;this.publicName=e.replace(/^_+/,""),this.slot=this.isPrivate?"$"+e:e,this.setterName=this.setterName||this.getSetterName(),this.getterName=this.getterName||this.getGetterName(),this.readable=this.hasGetter=/^r/i.test(this.is),this.writeable=this.hasSetter=/^.w/i.test(this.is)}},override:{computeValue:function(){var t=this.init;!e.O.isClass(t)&&e.O.isFunction(t)||this.SUPER()},preApply:function(e){e.meta.extend({methods:this.getAccessorsFor(e)})},postUnApply:function(e){e.meta.extend({removeMethods:this.getAccessorsFrom(e)})}},methods:{getAccessorsFor:function(e){var t=e.meta,n=this.setterName,r=this.getterName,i={};return this.hasSetter&&!t.hasMethod(n)&&(i[n]=this.getSetter(),i[n].ACCESSOR_FROM=this),this.hasGetter&&!t.hasMethod(r)&&(i[r]=this.getGetter(),i[r].ACCESSOR_FROM=this),i},getAccessorsFrom:function(e){var t=e.meta,n=this.setterName,r=this.getterName,i=this.hasSetter&&t.getMethod(n),o=this.hasGetter&&t.getMethod(r),a=[];return i&&i.value.ACCESSOR_FROM==this&&a.push(n),o&&o.value.ACCESSOR_FROM==this&&a.push(r),a},getGetterName:function(){return"get"+e.S.uppercaseFirst(this.publicName)},getSetterName:function(){return"set"+e.S.uppercaseFirst(this.publicName)},getSetter:function(){var e=this,t=e.slot;return e.canInlineSetRaw?function(e){return this[t]=e,this}:function(){return e.setRawValueTo.apply(this,arguments)}},getGetter:function(){var e=this,t=e.slot;return e.canInlineGetRaw?function(e){return this[t]}:function(){return e.getRawValueFrom.apply(this,arguments)}},getValueFrom:function(e){var t=this.getterName;return this.readable&&e.meta.hasMethod(t)?e[t]():this.getRawValueFrom(e)},setValueTo:function(e,t){var n=this.setterName;this.writeable&&e.meta.hasMethod(n)?e[n](t):this.setRawValueTo(e,t)},initFromConfig:function(t,n){var r,i=this.name,o=!1;if(n.hasOwnProperty(i))r=n[i],o=!0;else{var a=this.init;e.O.isFunction(a)&&!e.O.isClass(a)?(r=a.call(t,n,i),o=!0):this.builder&&(r=t[this.builder.replace(/^this\./,"")](n,i),o=!0)}if(o)this.setRawValueTo(t,r);else if(this.required)throw new Error("Required attribute ["+i+"] is missed during initialization of "+t)}}}).c,e.Managed.Attribute.Builder=new e.Managed.Role("Joose.Managed.Attribute.Builder",{have:{defaultAttributeClass:e.Managed.Attribute},builder:{methods:{has:function(t,n){e.O.eachOwn(n,function(e,n){"object"==typeof e&&null!=e&&e.constructor!=/ /.constructor||(e={init:e}),e.meta=e.meta||t.defaultAttributeClass,/^__/.test(n)&&(n=n.replace(/^_+/,""),e.isPrivate=!0),t.addAttribute(n,e.init,e)},this)},hasnot:function(e,t){this.havenot(e,t)},hasnt:function(e,t){this.hasnot(e,t)}}}}).c,e.Managed.My=new e.Managed.Role("Joose.Managed.My",{have:{myClass:null,needToReAlias:!1},methods:{createMy:function(t){this.meta;var n=this instanceof e.Managed.Role,r=t.my||{};delete t.my;var i=this.superClass.meta.myClass;n||r.isa||!i||(r.isa=i),r.meta||r.isa||(r.meta=this.constructor),r.name=this.name+".my";var o=this.myClass=a(r),s=this.c;s.prototype.my=s.my=n?o:new o({HOST:s}),this.needToReAlias=!0},aliasStaticMethods:function(){this.needToReAlias=!1;var t=this.c,n=this.myClass.prototype;e.O.eachOwn(t,function(e,n){e.IS_ALIAS&&delete t[n]}),this.myClass.meta.stem.properties.methods.each(function(e,r){t[r]||((t[r]=function(){return n[r].apply(t.my,arguments)}).IS_ALIAS=!0)})}},override:{extend:function(t){var n=this.myClass;!n&&this.superClass.meta.myClass&&this.createMy(t),t.my&&(n?(this.needToReAlias=!0,n.meta.extend(t.my),delete t.my):this.createMy(t)),this.SUPER(t),!this.needToReAlias||this instanceof e.Managed.Role||this.aliasStaticMethods()}},before:{addRole:function(){var t;e.A.each(arguments,function(n){if(!n)throw new Error("Attempt to consume an undefined Role into ["+this.name+"]");var r=n.meta instanceof e.Managed.Class?n:n.role;if(r.meta.meta.hasAttribute("myClass")&&r.meta.myClass){if(!this.myClass)return void this.createMy({my:{does:r.meta.myClass}});(t=this.myClass.meta.stem).opened||t.open(),t.addComposeInfo(r.my.meta.stem)}},this),t&&(t.close(),this.needToReAlias=!0)},removeRole:function(){if(this.myClass){var t=this.myClass.meta.stem;t.open(),e.A.each(arguments,function(e){e.meta.meta.hasAttribute("myClass")&&e.meta.myClass&&(t.removeComposeInfo(e.my.meta.stem),this.needToReAlias=!0)},this),t.close()}}}}).c,e.Namespace=e.stub(),e.Namespace.Able=new e.Managed.Role("Joose.Namespace.Able",{have:{bodyFunc:null},before:{extend:function(e){e.body&&(this.bodyFunc=e.body,delete e.body)}},after:{afterMutate:function(){var t=this.bodyFunc;delete this.bodyFunc,t&&e.Namespace.Manager.my.executeIn(this.c,t)}}}).c,e.Managed.Bootstrap=new e.Managed.Role("Joose.Managed.Bootstrap",{does:[e.Namespace.Able,e.Managed.My,e.Managed.Attribute.Builder]}).c,e.Meta=e.stub(),e.Meta.Object=new e.Proto.Class("Joose.Meta.Object",{isa:e.Proto.Object}).c,e.Meta.Class=new e.Managed.Class("Joose.Meta.Class",{isa:e.Managed.Class,does:e.Managed.Bootstrap,have:{defaultSuperClass:e.Meta.Object}}).c,e.Meta.Role=new e.Meta.Class("Joose.Meta.Role",{isa:e.Managed.Role,does:e.Managed.Bootstrap}).c,e.Namespace.Keeper=new e.Meta.Class("Joose.Namespace.Keeper",{isa:e.Meta.Class,have:{externalConstructor:null},methods:{defaultConstructor:function(){return function(){var t=arguments.callee.meta;if(t instanceof e.Namespace.Keeper)throw new Error("Module ["+t.c+"] may not be instantiated. Forgot to 'use' the class with the same name?");var n=t.externalConstructor;if("function"==typeof n)return n.meta=t,n.apply(this,arguments);throw"NamespaceKeeper of ["+t.name+"] was planted incorrectly."}},plant:function(e){var t=this.c;t.meta=e.meta,t.meta.c=t,t.meta.externalConstructor=e}}}).c,e.Namespace.Manager=new e.Managed.Class("Joose.Namespace.Manager",{have:{current:null},methods:{initialize:function(){this.current=[e.top]},getCurrent:function(){return this.current[0]},executeIn:function(e,t){var n=this.current;n.unshift(e);var r=t.call(e,e);return n.shift(),r},earlyCreate:function(e,t,n){return n.constructorOnly=!0,new t(e,n).c},create:function(t,n,r){if(!t)return new n(t,r).c;var i=this;if(/^\./.test(t))return this.executeIn(e.top,function(){return i.create(t.replace(/^\./,""),n,r)});for(var o=r||{},a=e.S.saneSplit(t,"."),s=this.getCurrent(),l=s==e.top?[]:e.S.saneSplit(s.meta.name,"."),u=0;u<a.length;u++){var c=a[u],d=u==a.length-1;if("meta"==c||"my"==c||!c)throw"Module name ["+t+"] may not include a part called 'meta' or 'my' or empty part.";var h=s[c];l.push(c);var p,f=l.join("."),m=!1;if(void 0===h)d?(p=this.earlyCreate(f,n,o),m=!0):p=new e.Namespace.Keeper(f).c,s[c]=p,h=p;else if(d&&h&&h.meta){var g=h.meta;if(n==e.Namespace.Keeper)g.extend(o);else if(g instanceof e.Namespace.Keeper)g.plant(this.earlyCreate(f,n,o)),m=!0;else if(!e.C.ignoreRepeatedDeclarations)throw new Error("Double declaration of ["+f+"]")}else if(d&&!(h&&h.meta&&h.meta.meta))throw"Trying to setup module "+f+" failed. There is already something: "+h;d&&this.prepareMeta(h.meta),m&&h.meta.construct(o),s=h}return s},prepareMeta:function(){},prepareProperties:function(e,t,n,r){e&&"string"!=typeof e&&(t=e,e=null);var i;return t&&t.meta&&(i=t.meta,delete t.meta),i||(i=t&&"function"==typeof t.isa&&t.isa.meta?t.isa.meta.constructor:n),r.call(this,e,i,t)},getDefaultHelperFor:function(e){var t=this;return function(n,r){return t.prepareProperties(n,r,e,function(e,n,r){return t.create(e,n,r)})}},register:function(t,n,r){var i=this;if(this.meta.hasMethod(t)){var o=function(){return i[t].apply(i,arguments)};e.top[t]||(e.top[t]=o),e[t]||(e[t]=o),e.is_NodeJS&&"undefined"!=typeof exports&&(exports[t]=o)}else{var a={};a[t]=r||this.getDefaultHelperFor(n),this.meta.extend({methods:a}),this.register(t)}},Module:function(t,n){return this.prepareProperties(t,n,e.Namespace.Keeper,function(e,t,n){return"function"==typeof n&&(n={body:n}),this.create(e,t,n)})}}}).c,e.Namespace.Manager.my=new e.Namespace.Manager,e.Namespace.Manager.my.register("Class",e.Meta.Class),e.Namespace.Manager.my.register("Role",e.Meta.Role),e.Namespace.Manager.my.register("Module");var a=e.Class,s=e.Role;s("Joose.Attribute.Delegate",{have:{handles:null},override:{eachDelegate:function(t,n,r){return"string"==typeof t?n.call(r,t,t):t instanceof Array?e.A.each(t,function(e){n.call(r,e,e)}):void(t===Object(t)&&e.O.eachOwn(t,function(e,t){n.call(r,t,e)}))},getAccessorsFor:function(e){var t=e.meta,n=this.SUPER(e),r=this;return this.eachDelegate(this.handles,function(e,i){t.hasMethod(e)||((n[e]=function(){var e=r.getValueFrom(this);return e[i].apply(e,arguments)}).ACCESSOR_FROM=r)}),n},getAccessorsFrom:function(e){var t=this.SUPER(e),n=this,r=e.meta;return this.eachDelegate(this.handles,function(e){var i=r.getMethod(e);i&&i.value.ACCESSOR_FROM==n&&t.push(e)}),t}}}),s("Joose.Attribute.Trigger",{have:{trigger:null},after:{initialize:function(){if(this.trigger){if(!this.writeable)throw new Error("Can't use `trigger` for read-only attributes");this.hasSetter=!0}}},override:{getSetter:function(){var t=this.SUPER(),n=this.trigger;if(!n)return t;var r=this,i=e.O.isFunction(r.init)?null:r.init;return function(){var e=r.hasValue(this)?r.getValueFrom(this):i,o=t.apply(this,arguments);return n.call(this,r.getValueFrom(this),e),o}}}}),s("Joose.Attribute.Lazy",{have:{lazy:null},before:{computeValue:function(){"function"==typeof this.init&&this.lazy&&(this.lazy=this.init,delete this.init)}},after:{initialize:function(){this.lazy&&(this.readable=this.hasGetter=!0)}},override:{getGetter:function(){var e=this.SUPER(),t=this.lazy;if(!t)return e;var n=this;return function(){if(!n.hasValue(this)){var r="function"==typeof t?t:this[t.replace(/^this\./,"")];n.setValueTo(this,r.apply(this,arguments))}return e.call(this)}}}}),s("Joose.Attribute.Accessor.Combined",{have:{isCombined:!1},after:{initialize:function(){this.isCombined=this.isCombined||/..c/i.test(this.is),this.isCombined&&(this.slot="$$"+this.name,this.hasGetter=!0,this.hasSetter=!1,this.setterName=this.getterName=this.publicName)}},override:{getGetter:function(){var e=this.SUPER();if(!this.isCombined)return e;var t=this.getSetter(),n=this;return function(){if(!arguments.length){if(n.readable)return e.call(this);throw new Error("Call to getter of unreadable attribute: ["+n.name+"]")}if(n.writeable)return t.apply(this,arguments);throw new Error("Call to setter of read-only attribute: ["+n.name+"]")}}}}),e.Managed.Attribute.meta.extend({does:[e.Attribute.Delegate,e.Attribute.Trigger,e.Attribute.Lazy,e.Attribute.Accessor.Combined]}),s("Joose.Meta.Singleton",{has:{forceInstance:e.I.Object,instance:null},override:{defaultConstructor:function(){var e=this,t=this.SUPER();return this.adaptConstructor(t),function(n,r){if(n==e.forceInstance)return t.apply(this,r)||this;var i=e.instance;return i||(i=e.instance=new e.c(e.forceInstance,arguments)),e.hasMethod("configure")&&i.configure.apply(i,arguments),i}}}}),e.Namespace.Manager.my.register("Singleton",a({isa:e.Meta.Class,meta:e.Meta.Class,does:e.Meta.Singleton}))}(),Joose.C.ignoreRepeatedDeclarations=!0,Class("JooseX.Observable.Event",{has:{name:{required:!0},args:{required:!0},source:{required:!0},splat:null,current:null,bubbling:!0},methods:{stopPropagation:function(){this.bubbling=!1}}}),Class("JooseX.Observable.Listener",{has:{channel:{required:!0},eventName:{required:!0},func:{required:!0},scope:null,single:!1,buffer:null,bufferMax:null,bufferStartedAt:null,bufferTimeout:null,delayTimeout:null,delay:null},methods:{activate:function(e,t){var n=this;if(null!=n.buffer){if(null!=n.bufferMax)if(n.bufferStartedAt){if(new Date-n.bufferStartedAt>n.bufferMax)return}else n.bufferStartedAt=new Date;return n.bufferTimeout&&clearTimeout(n.bufferTimeout),void(n.bufferTimeout=setTimeout(function(){delete n.bufferStartedAt,delete n.bufferTimeout,n.doActivate(e,t)},n.buffer))}{if(null==n.delay)return n.doActivate(e,t);n.delayTimeout=setTimeout(function(){delete n.delayTimeout,n.doActivate(e,t)},n.delay)}},doActivate:function(e,t){return this.single&&this.remove(),!1!==this.func.apply(this.scope||e.source,[e].concat(t))},cancel:function(){this.buffer&&(clearTimeout(this.bufferTimeout),delete this.bufferTimeout,delete this.bufferStartedAt),this.delay&&clearTimeout(this.delayTimeout)},remove:function(){this.channel.removeListener(this)}}}),Class("JooseX.Observable.Channel",{has:{channels:Joose.I.Object,listeners:Joose.I.Object},methods:{destroy:function(){Joose.O.each(this.channels,function(e,t){e.purgeListeners()}),this.channels=null,Joose.O.each(this.listeners,function(e,t){this.listeners[t]=null},this),this.listeners=null},getListenersFor:function(e,t,n){var r=this.listeners;if(r["**"]){var i=e.concat(t);Joose.A.each(r["**"],function(e){n.push({listener:e,splat:i})})}if(e.length){var o=this.getSingleChannel(e.shift(),!0);o&&o.getListenersFor(e,t,n)}else r["*"]&&Joose.A.each(r["*"],function(e){n.push({listener:e,splat:t})}),r[t]&&Joose.A.each(r[t],function(e){n.push({listener:e})})},hasListenerFor:function(e,t){var n=this.listeners;if(n["**"]&&n["**"].length)return!0;if(e.length){var r=this.getSingleChannel(e.shift(),!0);if(r)return r.hasListenerFor(e,t)}else{if(n["*"]&&n["*"].length)return!0;if(n[t]&&n[t].length)return!0}return!1},addListener:function(e){var t=e.eventName,n=this.listeners;n[t]=n[t]||[],n[t].push(e)},removeListener:function(e){if(this.listeners){var t=this.listeners[e.eventName];t&&Joose.A.each(t,function(n,r){if(n==e)return t.splice(r,1),!1})}},removeListenerByHandler:function(e,t,n){var r=this.listeners[e];r&&Joose.A.each(r,function(e,i){if(e.func==t&&e.scope==n)return r.splice(i,1),!1})},getSingleChannel:function(e,t){var n=this.channels;return n[e]?n[e]:t?null:n[e]=new JooseX.Observable.Channel},getChannel:function(e,t){if(!e.length)return this;var n=this.getSingleChannel(e.shift(),t);return t&&!n?null:n.getChannel(e,t)}}}),Role("JooseX.Observable",{VERSION:.04,has:{rootChannel:{is:"rw",init:function(){return new JooseX.Observable.Channel}},suspendCounter:0},methods:{getBubbleTarget:function(){},parseEventPath:function(e){var t=e.split("/"),n=t.pop();return t.length&&!t[0]&&t.shift(),{channels:t,eventName:n}},on:function(e,t,n,r){if(!t)throw"Not valid listener function provided when subsribing on event: "+e;var i=this.parseEventPath(e),o=this.getRootChannel().getChannel(i.channels),a=new JooseX.Observable.Listener(Joose.O.extend(r||{},{channel:o,eventName:i.eventName,func:t,scope:n}));return o.addListener(a),a},un:function(e,t,n){if(e instanceof JooseX.Observable.Listener)e.remove();else{var r=this.parseEventPath(e),i=this.getRootChannel().getChannel(r.channels,!0);i&&i.removeListenerByHandler(r.eventName,t,n)}},emit:function(){return this.fireEvent.apply(this,arguments)},fireEvent:function(e){if(!this.suspendCounter){var t=Array.prototype.slice.call(arguments,1),n=new JooseX.Observable.Event({name:e,args:t,source:this});return this.propagateEvent(n,e,t)}},propagateEvent:function(e,t,n){if(!this.suspendCounter){var r=this.parseEventPath(t),i=r.eventName;if("*"==!i||"**"==i)throw new Error("Can't fire an empty event or event with `*`, `**` names ");var o=[];this.getRootChannel().getListenersFor(r.channels,i,o);var a=!0;if(e.current=this,o.length&&Joose.A.each(o,function(t){e.splat=t.splat,a=!1!==t.listener.activate(e,n)&&a}),e.bubbling){var s=this.getBubbleTarget();s&&(a=!1!==s.propagateEvent(e,t,n)&&a)}return a}},hasListenerFor:function(e){var t=this.parseEventPath(e);return this.getRootChannel().hasListenerFor(t.channels,t.eventName)},purgeListeners:function(){this.rootChannel.destroy(),this.rootChannel=new JooseX.Observable.Channel},suspendEvents:function(){this.suspendCounter++},resumeEvents:function(){this.suspendCounter--,this.suspendCounter<0&&(this.suspendCounter=0)}}}),"undefined"==typeof bowser&&function(e,t,n){("undefined"!=typeof window?window:e).bowser=n()}(this,0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var n,r=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=!/like android/i.test(e)&&/android/i.test(e),a=/nexus\s*[0-6]\s*/i.test(e),s=!a&&/nexus\s*[0-9]+/i.test(e),l=/CrOS/.test(e),u=/silk/i.test(e),c=/sailfish/i.test(e),d=/tizen/i.test(e),h=/(web|hpw)os/i.test(e),p=/windows phone/i.test(e),f=(/SamsungBrowser/i.test(e),!p&&/windows/i.test(e)),m=!r&&!u&&/macintosh/i.test(e),g=!i&&!c&&!d&&!h&&/linux/i.test(e),v=t(/edge\/(\d+(\.\d+)?)/i),y=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e),w=!b&&/[^-]mobi/i.test(e),C=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:o,version:y||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:o,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:o,version:y||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:o,version:y||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:o,version:y||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:o,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:o,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:o,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:o,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:o,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:o,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(n={name:"Windows Phone",windowsphone:o},v?(n.msedge=o,n.version=v):(n.msie=o,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:o,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?n={name:"Chrome",chromeos:o,chromeBook:o,chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:o,version:v}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:o,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||y}:c?n={name:"Sailfish",sailfish:o,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:o,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:o,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=o)):u?n={name:"Amazon Silk",silk:o,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:o,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:o,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:o,version:y||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(n={name:"WebOS",webos:o,version:y||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=o)):/bada/i.test(e)?n={name:"Bada",bada:o,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:d?n={name:"Tizen",tizen:o,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:o,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(e)?n={name:"Chromium",chromium:o,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?n={name:"Android",version:y}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:o},y&&(n.version=y)):r?(n={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},y&&(n.version=y)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:o,version:t(/googlebot\/(\d+(\.\d+))/i)||y}:{name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=o):(n.name=n.name||"Webkit",n.webkit=o),!n.version&&y&&(n.version=y)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=o,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||n.msedge||!i&&!n.silk?n.windowsphone||n.msedge||!r?m?n.mac=o:C?n.xbox=o:f?n.windows=o:g&&(n.linux=o):(n[r]=o,n.ios=o):n.android=o;var E="";n.windowsphone?E=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r?E=(E=t(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):i?E=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?E=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?E=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?E=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(E=t(/tizen[\/\s](\d+(\.\d+)*)/i)),E&&(n.osversion=E);var S=E.split(".")[0];return b||s||"ipad"==r||i&&(3==S||S>=4&&!w)||n.silk?n.tablet=o:(w||"iphone"==r||"ipod"==r||i||a||n.blackberry||n.webos||n.bada)&&(n.mobile=o),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=o:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=o:n.x=o,n}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),i=n(e,function(e){var i=r-t(e);return e+=new Array(i+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(t,n,i){var o=a;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=e(i));var s=""+o.version;for(var l in t)if(t.hasOwnProperty(l)&&o[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return r([s,t[l]])<0}return n}var o=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=i,a.compareVersions=r,a.check=function(e,t,n){return!i(e,t,n)},a._detect=e,a}),Singleton("Siesta.Test.UserAgent.KeyCodes",{methods:{isNav:function(e){var t=this.keys;return e>=33&&e<=40||e==t.RETURN||e==t.TAB||e==t.ESCAPE},isSpecial:function(e){return e===this.keys.BACKSPACE||e>=16&&e<=20||e>=44&&e<=46||e>=112&&e<=123||91===e},isModifier:function(e){return e===this.keys.SHIFT||e===this.keys.CTRL||e===this.keys.ALT||e===this.keys.CMD},fromCharCode:function(e,t){var n=this.keys;for(var r in n)if(n[r]===e&&(!t||r.length>1))return r}},has:{keys:{init:{"\b":8,BACKSPACE:8,"\t":9,TAB:9,"\r":13,RETURN:13,ENTER:13,SPACE:32,SHIFT:16,CTRL:17,ALT:18,CMD:91,"PAUSE-BREAK":19,CAPS:20,ESCAPE:27,ESC:27,"NUM-LOCK":144,"SCROLL-LOCK":145,PRINT:44,"PAGE-UP":33,PAGEUP:33,"PAGE-DOWN":34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,ARROWLEFT:37,UP:38,ARROWUP:38,RIGHT:39,ARROWRIGHT:39,DOWN:40,ARROWDOWN:40,INSERT:45,DELETE:46," ":32,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}},keyNameMap:{init:{8:"Backspace",9:"Tab",13:"Enter",32:"Space",16:"Shift",17:"Control",18:"Alt",91:"Meta",20:"CapsLock",27:"Escape",144:"NumLock",145:"ScrollLock",44:"Print",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",106:"Multiply",107:"Add",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"}}}}),function(){var e=1;Role("Siesta.Util.Role.HasUniqueGeneratedId",{has:{id:{is:"ro",init:function(){return e++}}}})}(),function(e){function t(e,t,n,r){var i,o,a,s,l,c,h,p=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!r&&((t?t.ownerDocument||t:B)!==N&&A(t),t=t||N,O)){if(11!==f&&(l=me.exec(e)))if(i=l[1]){if(9===f){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&F(t,a)&&a.id===i)return n.push(a),n}else{if(l[2])return $.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return $.apply(n,t.getElementsByClassName(i)),n}if(w.qsa&&!j[e+" "]&&(!I||!I.test(e))){if(1!==f)p=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,we):t.setAttribute("id",s=z),o=(c=x(e)).length;o--;)c[o]="#"+s+" "+d(c[o]);h=c.join(","),p=ge.test(e)&&u(t.parentNode)||t}if(h)try{if(!bowser.msie&&!bowser.msedge||!/:nth-of-type\(\d/i.test(h))return $.apply(n,p.querySelectorAll(h)),n}catch(e){}finally{s===z&&t.removeAttribute("id")}}}return P(e.replace(oe,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[z]=!0,e}function i(e){var t=N.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ee(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function d(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=q++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,d,h=[U,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(d=t[z]||(t[z]={}),c=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===U&&u[1]===s)return h[2]=u[2];if(c[o]=h,h[2]=e(t,n,l))return!0}return!1}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function f(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function g(e,t,n,i,o,a){return i&&!i[z]&&(i=g(i)),o&&!o[z]&&(o=g(o,a)),r(function(r,a,s,l){var u,c,d,h=[],p=[],g=a.length,v=r||f(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:m(v,h,e,s,l),b=n?o||(r?e:g||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(u=m(b,p),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[p[c]]=!(y[p[c]]=d));if(r){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?K(r,d):h[c])>-1&&(r[u]=!(a[u]=d))}}else b=m(b===a?b.splice(g,b.length):b),o?o(null,a,b,l):$.apply(a,b)})}function v(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=h(function(e){return e===t},a,!0),u=h(function(e){return K(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==M)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];s<i;s++)if(n=C.relative[e[s].type])c=[h(p(c),n)];else{if((n=C.filter[e[s].type].apply(null,e[s].matches))[z]){for(r=++s;r<i&&!C.relative[e[r].type];r++);return g(s>1&&p(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),n,s<r&&v(e.slice(s,r)),r<i&&v(e=e.slice(r)),r<i&&d(e))}c.push(n)}return p(c)}function y(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,d,h,p=0,f="0",g=r&&[],v=[],y=M,b=r||o&&C.find.TAG("*",u),w=U+=null==y?1:Math.random()||.1,E=b.length;for(u&&(M=a===N||a||u);f!==E&&null!=(c=b[f]);f++){if(o&&c){for(d=0,a||c.ownerDocument===N||(A(c),s=!O);h=e[d++];)if(h(c,a||N,s)){l.push(c);break}u&&(U=w)}i&&((c=!h&&c)&&p--,r&&g.push(c))}if(p+=f,i&&f!==p){for(d=0;h=n[d++];)h(g,v,a,s);if(r){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=X.call(l));v=m(v)}$.apply(l,v),u&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(U=w,M=y),g};return i?r(a):a}var b,w,C,E,S,x,R,P,M,T,k,A,N,_,O,I,D,L,F,z="sizzle"+1*new Date,B=e.document,U=0,q=0,V=n(),W=n(),j=n(),H=function(e,t){return e===t&&(k=!0),0},Q={}.hasOwnProperty,J=[],X=J.pop,G=J.push,$=J.push,Y=J.slice,K=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),ce=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){A()},Ee=h(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{$.apply(J=Y.call(B.childNodes),B.childNodes),J[B.childNodes.length].nodeType}catch(e){$={apply:J.length?function(e,t){G.apply(e,Y.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:B;return r!==N&&9===r.nodeType&&r.documentElement?(N=r,_=N.documentElement,O=!S(N),B!==N&&(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=fe.test(N.getElementsByClassName),w.getById=i(function(e){return _.appendChild(e).id=z,!N.getElementsByName||!N.getElementsByName(z).length}),w.getById?(C.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}}):(C.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},C.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),C.find.TAG=w.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=w.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&O)return t.getElementsByClassName(e)},D=[],I=[],(w.qsa=fe.test(N.querySelectorAll))&&(i(function(e){_.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+z+"-]").length||I.push("~="),e.querySelectorAll(":checked").length||I.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||I.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=N.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),_.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=fe.test(L=_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.oMatchesSelector||_.msMatchesSelector))&&i(function(e){w.disconnectedMatch=L.call(e,"*"),L.call(e,"[s!='']:x"),D.push("!=",re)}),I=I.length&&new RegExp(I.join("|")),D=D.length&&new RegExp(D.join("|")),t=fe.test(_.compareDocumentPosition),F=t||fe.test(_.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=t?function(e,t){if(e===t)return k=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===N||e.ownerDocument===B&&F(B,e)?-1:t===N||t.ownerDocument===B&&F(B,t)?1:T?K(T,e)-K(T,t):0:4&n?-1:1)}:function(e,t){if(e===t)return k=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!i||!o)return e===N?-1:t===N?1:i?-1:o?1:T?K(T,e)-K(T,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===B?-1:l[r]===B?1:0},N):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&A(e),n=n.replace(le,"='$1']"),w.matchesSelector&&O&&!j[n+" "]&&(!D||!D.test(n))&&(!I||!I.test(n)))try{var r=L.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&A(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&A(e);var n=C.attrHandle[t.toLowerCase()],r=n&&Q.call(C.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(be,we)},t.unescape=function(e){return(e+"").replace(ve,ye)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(k=!w.detectDuplicates,T=!w.sortStable&&e.slice(0),e.sort(H),k){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return T=null,e},E=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=E(t);return n},(C=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=x(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ie," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,p,f,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(b=(p=(u=(c=(d=(h=g)[z]||(h[z]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===U&&u[1])&&u[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[U,p,b];break}}else if(y&&(b=p=(u=(c=(d=(h=t)[z]||(h[z]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===U&&u[1]),!1===b)for(;(h=++p&&h&&h[m]||(b=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&((c=(d=h[z]||(h[z]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[U,b]),h!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[z]?o(n):o.length>1?(i=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)e[r=K(e,i[a])]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=R(e.replace(oe,"$1"));return i[z]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ve,ye),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,ye).toLowerCase(),function(t){var n;do{if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===_},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=C.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);c.prototype=C.filters=C.pseudos,C.setFilters=new c,x=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=W[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=C.preFilter;s;){r&&!(i=ae.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=se.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(oe," ")}),s=s.slice(r.length));for(a in C.filter)!(i=de[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):W(e,l).slice(0)},R=t.compile=function(e,t){var n,r=[],i=[],o=j[e+" "];if(!o){for(t||(t=x(e)),n=t.length;n--;)(o=v(t[n]))[z]?r.push(o):i.push(o);(o=j(e,y(i,r))).selector=e}return o},P=t.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,h=!r&&x(e=c.selector||e);if(n=n||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&O&&C.relative[o[1].type]){if(!(t=(C.find.ID(a.matches[0].replace(ve,ye),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((l=C.find[s])&&(r=l(a.matches[0].replace(ve,ye),ge.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&d(o)))return $.apply(n,r),n;break}}return(c||R(e,h))(r,t,!O,n,!t||ge.test(e)&&u(t.parentNode)||t),n},w.sortStable=z.split("").sort(H).join("")===z,w.detectDuplicates=!!k,A(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(N.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null});var Se=e.Sizzle;if(t.noConflict=function(){return e.Sizzle===t&&(e.Sizzle=Se),t},"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.Sizzle=t,e.Sizzle=t,t.siesta=!0,t.selectors.pseudos.textEquals=function(e,n,r){var i=t.unescape(r[3]);return t.getText([e]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===i},e.jQuery&&e.jQuery.siesta){var xe=jQuery.expr;jQuery.find=t,jQuery.expr=t.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=t.uniqueSort,jQuery.text=t.getText,jQuery.isXMLDoc=t.isXML,jQuery.contains=t.contains,jQuery.expr.filters.hidden=xe.filters.hidden,jQuery.expr.filters.visible=xe.filters.visible}}(window),Siesta.Sizzle=Sizzle,Sizzle.noConflict(),Class("Siesta.Util.Throttler",{has:{lastActivationTime:null,func:{required:!0},scope:{required:!0},buffer:null,throttle:null,bufferTimeoutId:null,args:null},methods:{tick:function(){var e=new Date-0;if(this.args=arguments,null!=this.throttle&&(this.lastActivationTime||(this.lastActivationTime=e),e-this.lastActivationTime>this.throttle&&this.activate()),null!=this.buffer){var t=this;this.bufferTimeoutId&&clearTimeout(this.bufferTimeoutId),this.bufferTimeoutId=setTimeout(function(){t.activate()},this.buffer)}},activate:function(){this.lastActivationTime=new Date-0,this.bufferTimeoutId&&clearTimeout(this.bufferTimeoutId),this.bufferTimeoutId=null;var e=this.args;this.args=null,this.func.apply(this.scope,e)},cancel:function(){this.bufferTimeoutId&&clearTimeout(this.bufferTimeoutId),this.bufferTimeoutId=null,this.args=null},flush:function(){null!=this.bufferTimeoutId&&this.activate()}}}),Role("Siesta.Util.Role.CanCalculatePageScroll",{methods:{getElForPageScroll:function(e){var t=(e=e||this.global).document;return t.scrollingElement||(bowser.webkit||bowser.blink||bowser.msedge?t.body:t.documentElement)},getPageScrollX:function(e){(e=e||this.global).document;if(null!=window.pageXOffset)return e.pageXOffset;var t=this.getElForPageScroll();return t?t.scrollLeft:0},getPageScrollY:function(e){(e=e||this.global).document;if(null!=window.pageYOffset)return e.pageYOffset;var t=this.getElForPageScroll();return t?t.scrollTop:0},viewportXtoPageX:function(e,t){var n=(t=t||this.global).document.documentElement;return e+this.getPageScrollX(t)-n.clientLeft},viewportYtoPageY:function(e,t){var n=(t=t||this.global).document.documentElement;return e+this.getPageScrollY(t)-n.clientTop},pageXtoViewportX:function(e,t){var n=(t=t||this.global).document.documentElement;return e-this.getPageScrollX(t)+n.clientLeft},pageYtoViewportY:function(e,t){var n=(t=t||this.global).document.documentElement;return e-this.getPageScrollY(t)+n.clientTop},maintainScrollPositionDuring:function(e,t){var n=window.parent,r=Boolean(n),i=r&&this.getPageScrollX(n),o=r&&this.getPageScrollY(n);if(e.call(t||this),r){var a=this.getElForPageScroll(n);i!==this.getPageScrollX(n)&&(a.scrollLeft=i),o!==this.getPageScrollY(n)&&(a.scrollTop=o)}}}}),Role("Siesta.Util.Role.Dom",{does:[Siesta.Util.Role.CanCalculatePageScroll],has:{doesNotIncludeMarginInBodyOffset:!1},methods:{isCrossOriginWindow:function(e){try{var t=e.document}catch(e){return!0}return!t},closest:function(e,t,n){n=n||Number.MAX_VALUE;for(var r=e.ownerDocument.documentElement,i=0;i<n&&e&&e!==r;e=e.parentNode){if(Siesta.Sizzle.matchesSelector(e,t))return e;i++}return!1},contains:function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||Boolean(16&e.compareDocumentPosition(t));throw new Error("Can't determine `contains` status")},matches:function(e,t){return Siesta.Sizzle.matchesSelector(e,t)},offset:function(e){if(!e)return null;var t=e.ownerDocument;if(!t)return null;if(e===t.body)return this.bodyOffset(e);var n=this.getBoundingClientRect(e),r=t.defaultView||t.parentWindow;return n?{left:this.viewportXtoPageX(Math.floor(n.left),r),top:this.viewportYtoPageY(Math.floor(n.top),r)}:{left:0,top:0}},bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;if(this.initializeOffset(),this.doesNotIncludeMarginInBodyOffset){var r=getComputedStyle(e);t+=parseFloat(r.marginTop)||0,n+=parseFloat(r.marginLeft)||0}return{top:t,left:n}},initializeOffset:function(){var e=document.body,t=document.createElement("div"),n=parseFloat(getComputedStyle(e).marginTop)||0,r={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(var i in r)t.style[i]=r[i];t.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",e.insertBefore(t,e.firstChild);var o=t.firstChild,a=o.firstChild;o.nextSibling.firstChild.firstChild;a.style.position="fixed",a.style.top="20px",a.style.position=a.style.top="",o.style.overflow="hidden",o.style.position="relative",this.doesNotIncludeMarginInBodyOffset=e.offsetTop!==n,e.removeChild(t),this.initializeOffset=function(){}},getElementWidth:function(e){return this.getBoundingClientRect(e).width},getElementHeight:function(e){return this.getBoundingClientRect(e).height},getWindowSize:function(e){var t=e.document;return{width:e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,height:e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}},isPointWithinElement:function(e,t,n){var r=this.getBoundingClientRect(n);return e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom},isElementReachableAt:function(e,t,n,r){r=!1!==r;var i=e.ownerDocument,o=i.defaultView||i.parentWindow,a=i.elementFromPoint(this.pageXtoViewportX(t,o),this.pageYtoViewportY(n,o));return a&&(a===e||r&&this.contains(e,a))},isElementReachableAtCenter:function(e,t){t=!1!==t;var n=this.offset(e);return this.isElementReachableAt(e,n.left+this.getElementWidth(e)/2,n.top+this.getElementHeight(e)/2,t)},getBoundingClientRect:function(e){var t=e.ownerSVGElement;if(t&&(bowser.msie||bowser.msedge||bowser.gecko)){var n=e.getBBox(),r=t.getBoundingClientRect(),i=r.left+n.x,o=r.top+n.y;n.width;return{x:i,y:o,left:i,top:o,bottom:o+n.height,height:n.height,width:n.width}}return e.getBoundingClientRect()},nodeIsUnloaded:function(e){try{e&&e.tagName;var t=e.ownerDocument,n=t&&(t.defaultView||t.parentWindow);return!Boolean(n)}catch(t){return e=null,!0}},nodeIsOrphan:function(e){var t=e.ownerDocument;return!(t&&t.body&&e.parentNode&&(e===t.body||$.contains(t.body,e)))},getNodeParents:function(e){e.ownerDocument;for(var t=[];e&&e.parentNode;e=e.parentNode)t.unshift(e);return t},getCommonAncestor:function(e,t){var n=this.getNodeParents(e),r=this.getNodeParents(t);if(n[0]!=r[0])return null;for(var i=0;i<n.length;i++)if(n[i]!==r[i])return n[i-1]}}}),Role("Siesta.Util.Role.CanParseOs",{methods:{parseOS:function(e){return/Win/i.test(e)?"Windows":/Mac/.test(e)||/darwin/i.test(e)?"MacOS":/Linux/i.test(e)?"Linux":"unknown"}}}),Role("Siesta.Util.Role.CanGetType",{methods:{typeOf:function(e){return Object.prototype.toString.call(e).slice(8,-1)}}}),Role("Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy",{methods:{mergeArrayAttributeFromClassHierarchy:function(e,t){for(var n=[],r=this.meta;r.hasAttribute(e);r=r.superClass.meta)n.push(r.getAttribute(e).init());t.hasOwnProperty(e)&&this[e]&&n.unshift(this[e]);var i=[];return n.forEach(function(e){i.push.apply(i,e)}),i}}}),Role("Siesta.Recorder.Role.CanSwallowException",{does:[JooseX.Observable],has:{swallowExceptions:!1},methods:{safeBind:function(e,t){var n=this;return t=t||n,n.swallowExceptions?function(){try{return e.apply(t,arguments)}catch(e){n.fireEvent("exception",e)}}:e.bind(t)}}}),Class("Siesta.Recorder.Target",{has:{targets:Joose.I.Array,activeTarget:null},methods:{initialize:function(){this.targets||(this.targets=[]);var e=this.targets[0];e&&!this.activeTarget&&(this.activeTarget=e.type)},clear:function(){this.targets=[]},getTargets:function(){var e=this.getTarget();return e&&e.targets||null},getTargetAsQueryString:function(){var e=this.getTarget();return"xy"==e.type?e.target:("cq"==e.type?">>":"")+e.target},getTarget:function(){return this.getTargetByType(this.activeTarget)},clearOffset:function(){this.setOffset(null)},setOffset:function(e){var t=this.getTarget();t&&(e?t.offset=e:delete t.offset)},getOffset:function(){var e=this.getTarget();if(e)return e.offset},getTargetByType:function(e){var t;return Joose.A.each(this.targets,function(n){if(n.type==e)return t=n,!1}),t},setUserTarget:function(e,t){var n=this.getTargetByType("user");if(n)n.target=e,t?n.offset=t:delete n.offset;else{var r={type:"user",target:e};t&&(r.offset=t),this.targets.unshift(r)}this.activeTarget="user"},isTooGeneric:function(){var e=this.targets;if(!e||0===e.length)return!0;if(1===e.length&&"xy"==e[0].type)return!0;if(2===e.length){var t=this.getTargetByType("xy"),n=this.getTargetByType("css");if(t&&n&&"body"==n.target)return!0}return!1}}}),function(){var e=1;Class("Siesta.Recorder.Event",{has:{id:function(){return e++},type:null,timestamp:function(){return Date.now()},options:null,x:null,y:null,target:null,charCode:null,keyCode:null,button:null,rawEvent:null},methods:{},my:{has:{HOST:null},methods:{fromDomEvent:function(e){var t={};["altKey","ctrlKey","metaKey","shiftKey"].forEach(function(n){e[n]&&(t[n]=!0)});var n=e.target,r={type:e.type,target:n,options:t,rawEvent:e};if(e.type.match(/^key/))r.charCode=e.charCode||e.keyCode,r.keyCode=e.keyCode;else if("number"==typeof e.clientX){var i=n&&n.ownerDocument,o=i&&i.documentElement,a=i&&i.body,s=a?e.clientX+(a.scrollLeft||o.scrollLeft):e.pageX,l=a?e.clientY+(a.scrollTop||o.scrollTop):e.pageY;r.x=s,r.y=l,r.button=e.button}return new this.HOST(r)}}}})}(),function(){var ID=1;Class("Siesta.Recorder.Action",{has:{id:function(){return ID++},action:null,value:null,target:null,toTarget:null,by:null,waitForPageLoad:!1,options:null,sourceEvent:null,sourceEventTargetReachableAtCenter:!1,timestamp:function(){return(new Date).getTime()}},methods:{initialize:function(){var e=this.target;!e||e instanceof Siesta.Recorder.Target||(this.target=new Siesta.Recorder.Target({targets:e}));var t=this.toTarget;!t||t instanceof Siesta.Recorder.Target||(this.toTarget=new Siesta.Recorder.Target({targets:t}))},setAction:function(e){this.action=e,this.hasTarget()||(this.target&&this.target.clear(),this.toTarget&&this.toTarget.clear())},hasTarget:function(){var e=this.action||"";return this.isMouseAction()||"selectText"==e},getTarget:function(e){var t=this.target;return e?t:t&&t.getTarget()},getTimestamp:function(){return this.sourceEvent&&this.sourceEvent.timestamp||this.timestamp},isMouseAction:function(){return(this.action||"").toLowerCase()in{click:1,contextmenu:1,dblclick:1,drag:1,mousedown:1,mouseup:1,movecursorto:1}},resetValues:function(){this.target=null,this.value=null,this.toTarget=null,this.by=null,this.options=null,this.sourceEvent=null,this.waitForPageLoad=!1},parseOffset:function(e){var t=e.split(",");if(!(t.length<2)&&(t[0].match("%")||(t[0]=parseInt(t[0],10),!isNaN(t[0])))&&(t[1].match("%")||(t[1]=parseInt(t[1],10),!isNaN(t[1]))))return t},clearTargetOffset:function(e){this.setTargetOffset(null,e)},restoreTargetOffset:function(){var e=this.target;e&&e.__SAVED_OFFSET__&&(e.setOffset(e.__SAVED_OFFSET__),delete e.__SAVED_OFFSET__)},setTargetOffset:function(e,t){var n=this.target;if(n){if(t){var r=n.getTarget();n.__SAVED_OFFSET__=r.offset}n.setOffset(e)}},getTargetOffset:function(){var e=this.target;if(e)return e.getOffset()},objectToSource:function(e){var t,n=this,r="",i=function(t,r){return(r=r||e[t])instanceof Array?t+" : "+JSON.stringify(r):r&&"object"==typeof r?t+" : "+n.objectToSource(r):t+" : "+("string"==typeof r?'"'+r+'"':r)};"type"==e.action?(r=i("type",e.text),t=!0,delete e.action,delete e.text):e.target&&(r=i(e.action,e.target),t=!0,delete e.target,delete e.action);var o=Object.keys(e);return o.length>0&&(r=r+(t?", ":"")+o.map(function(e){return i(e)}).join(", ")),"{ "+r+" }"},asCode:function(){var e=this.asStep();return e?"function"==typeof e?e:this.objectToSource(e):null},asStep:function(test){var actionName=this.action;if(!actionName)return null;var step={action:this.action},target=this.getTarget(),value=this.value,hasTarget=this.hasTarget();if(hasTarget||"type"==actionName||"scrollTo"==actionName){if(target)if("cq"==target.type){var splitPos=target.target.indexOf("->");step.target=splitPos>0?target.target.split("->").splice(1,0,">>").join():">>"+target.target}else step.target=target.target;else step.target="";target&&target.offset&&(step.offset=target.offset.slice())}if(this.options&&!Joose.O.isEmpty(this.options)&&(step.options=this.options),actionName.match(/^waitFor/))switch(actionName){case"waitForFn":if(test)var t=test;return{waitFor:eval("(function() {\n        "+value.replace(/\n/g,"\n        ")+"\n    })")};case"waitForMs":var val=parseInt(value,10);return{waitForMs:val};default:var obj={};return obj[actionName]=value||[],obj}else switch(actionName){case"click":case"dblclick":case"contextmenu":case"mousedown":case"mouseup":case"moveCursorTo":break;case"scrollTo":return{scrollTo:[step.target,value[0],value[1]]};case"moveCursorAlongPath":case"moveMouseAlongPath":var step={};return step[actionName]=[value],step;case"screenshot":step={screenshot:value};break;case"moveCursorBy":var by=this.value.split(",");by[0]=parseInt(by[0],10),by[1]=parseInt(by[1],10),step={action:"moveCursor",by:by};break;case"type":step.text=value;break;case"drag":var toTarget=this.toTarget;if(toTarget&&!toTarget.isTooGeneric()){step.to=toTarget.target,toTarget.offset&&(step.toOffset=toTarget.offset);break}step.by=this.by;break;case"fn":if(test)var t=test;return eval("(function(next) {\n        "+value.replace(/\n/g,"\n        ")+"\n        next();\n    })");default:var step={};return step[actionName]=value,step}return this.waitForPageLoad?{waitForPageLoad:[],trigger:step}:step}}})}(),Role("Ariadne.QueryFinder.TreeWalker",{methods:{getParent:function(e){throw new Error("Abstract method called: `getParent`")},contains:function(e,t){throw new Error("Abstract method called: `contains`")}}}),Class("Ariadne.QueryFinder.Identifier",{does:Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy,has:{finder:{required:!0},priority:100},methods:{identify:function(e,t,n){return[]}}}),Class("Ariadne.QueryFinder.Combinator",{has:{elements:{required:!0},currentCombLen:null,combination:null},methods:{forAllCombinations:function(e){for(var t=this.elements.length,n=this.combination,r=n?n.length:1;r<=t;r++)if(n=this.forAllCombinationsOfLength(r,e,n),this.combination=n,n)return!1},forAllCombinationsOfLength:function(e,t,n){var r=this.elements,i=r.length;if(!(e>i)){if(!n){n=new Array(e);for(l=0;l<e;l++)n[l]={current:l,max:i-e+l}}if(n.length!=e)throw new Error("Wrong combination state");var o;do{for(var a=[],s=0;s<e;s++)a.push(r[n[s].current]);if(!1===t(a))return n;o=!0;for(var l=e-1;l>=0;l--){var u=n[l];if(u.current<u.max){u.current++,o=!1;for(var c=l+1;c<e;c++)n[c].current=n[c-1].current+1;break}}}while(!o)}}}}),Role("Ariadne.QueryFinder.PathFinder",{has:{weightOptions:Joose.I.Array,weightOptionsByWeight:Joose.I.Object},methods:{extendPathVariants:function(e,t,n){0==e.length&&(e=[{segmentsById:{},hash:"",weight:0,ids:[]}]);for(var r=e.length,i=t.length,o=[],a={},s=0;s<r;s++)for(var l=e[s],u=0;u<i;u++){var c=t[u];if(null==n||c.indicies[n]){for(var d=c.variant,h=l,p=!1,f=0;f<d.length;f++){var m=d[f];h.segmentsById[m.id]||(p||(p=!0,h=this.clonePathVariant(l)),h.segmentsById[m.id]=m,h.weight+=m.weight,h.ids.push(m.id))}p&&(h.ids.sort(function(e,t){return e-t}),h.hash=h.ids.join("")),a[h.hash]||(a[h.hash]=!0,o.push(h))}}return o},clonePathVariant:function(e){var t=Object.assign?Object.assign({},e):Joose.O.copy(e);return t.segmentsById=Object.assign?Object.assign({},t.segmentsById):Joose.O.copy(t.segmentsById),t.ids=t.ids.slice(),t},collectAllSimplePathsOfWeight:function(e,t,n){for(var r=(t=t?t.slice():[""]).length,i=0;i<r;i++)t[i]+=(n?"_+":"_")+this.index;var o=this.weightOptionsByWeight[e];if(!o)throw new Error("Incorrect path weight");var a=o.minFromEdgesById;if(Joose.O.isEmpty(a))return t;var s=[];for(var l in a){var u=a[l];s.push.apply(s,u.fromNode.collectAllSimplePathsOfWeight(e-u.weight,t,u.isDirectChild))}return s},collectFullSimplePathCollection:function(){for(var e=[],t=0;t<this.weightOptions.length;t++){var n=this.weightOptions[t];e.push({weight:n.weight,simplePaths:this.collectAllSimplePathsOfWeight(n.weight)})}return e}}}),Class("Ariadne.QueryFinder.Edge",{does:Siesta.Util.Role.HasUniqueGeneratedId,has:{finder:{required:!0},maze:{required:!0},fromNode:{required:!0},toNode:{required:!0},segmentVariants:Joose.I.Array,segmentVariantsHashes:Joose.I.Object,isDirectChild:!1,weight:1/0},methods:{register:function(){var e=this.fromNode,t=this.toNode;if(e.edgesToByIndex[t.index])throw new Error("Edge already exists");if(t.edgesFromByIndex[e.index])throw new Error("Edge already exists");e.edgesToByIndex[t.index]=this,t.edgesFromByIndex[e.index]=this},consumeVariant:function(e,t){1==arguments.length&&(t=this.finder.combineSegments(e));var n=t.weight,r=t.hash;if(this.weight>n&&(this.weight=n,this.segmentVariants=[],this.segmentVariantsHashes={}),this.weight==n&&!this.segmentVariantsHashes[r]){var i={};return i[e[0].index]=!0,this.segmentVariantsHashes[r]=!0,this.segmentVariants.push({variant:e,hash:r,indicies:i}),!0}},relax:function(){var e=this.fromNode,t=this.toNode;if(e.isReachedWithDirectChildEdge()){for(var n=e.index,r=this.segmentVariants,i=!1,o=0;o<r.length;o++)if(r[o].indicies[n]){i=!0;break}if(!i)return!1}var a=this.weight+e.weightOptions[0].weight,s=t.weightOptionsByWeight[a];if(s&&!s.minFromEdgesById[this.id])return s.minFromEdgesById[this.id]=this,!0;if(!s){var l={};l[this.id]=this;var u={weight:a,minFromEdgesById:l};t.weightOptionsByWeight[a]=u;for(var c=t.weightOptions,o=0;o<c.length;o++)if(a<c[o].weight)return c.splice(o,0,u),!0;return c.push(u),!0}}}}),Class("Ariadne.QueryFinder.Node",{does:[Siesta.Util.Role.HasUniqueGeneratedId,Ariadne.QueryFinder.PathFinder],has:{finder:{required:!0},maze:{required:!0},el:{required:!0},index:null,segments:null,combinator:null,upNode:null,downNode:null,queryCache:Joose.I.Object,edgesToByIndex:Joose.I.Object,edgesFromByIndex:Joose.I.Object,directChildUpEdge:null},methods:{contains:function(e){return this.finder.contains(this.el,e.el)},setSegments:function(e){var t=this;e.sort(function(e,t){return e.weight-t.weight}),e.forEach(function(e){t.adoptSegment(e)}),this.segments=e,this.combinator=new Ariadne.QueryFinder.Combinator({elements:e})},adoptSegment:function(e){e.index=this.index,e.id=this.maze.segmentsIdGen++},isReachedWithDirectChildEdge:function(){var e=this.weightOptions[0].minFromEdgesById;for(var t in e)if(e[t].isDirectChild)return!0;return!1},addEdgeTo:function(e,t,n){2==arguments.length&&(n=this.finder.combineSegments(t));var r=this.edgesToByIndex[e.index];if(r||(r=new Ariadne.QueryFinder.Edge({finder:this.finder,maze:this.maze,fromNode:this,toNode:e})).register(),r.weight>=n.weight)return r.consumeVariant(t,n)},addAllEdgesTo:function(e,t,n){if(e==this||this.contains(e))throw new Error("Invalid nodes for edge");2==arguments.length&&(n=this.finder.combineSegments(t));for(var r=this;r&&r!=e;r=r.upNode)for(var i=r.upNode;i&&i!=e.upNode;i=i.upNode)r.addEdgeTo(i,t,n)},buildEdges3:function(e){var t=this,n=this.el,r=this.finder,i=this.maze,o=i.getRoot(),a=!1;return this.combinator.forAllCombinationsOfLength(e,function(e){var s=r.combineSegments(e);if(s)for(var l=s.query,u=o;u&&u!=t;){var c=t.edgesToByIndex[u.index];if(c&&s.weight>c.weight)u=u.downNode;else{var d=i.doQuery(l,u);if(1==d.length&&d[0]==n){if(t.addAllEdgesTo(u,e,s),u==o&&s.hasId)return a=!0,!1;break}if(d.length>0){for(var h=u.downNode,p=null;h&&h!=t;){for(var f=!0,m=0;m<d.length;m++)if(h.el==d[m]||!r.contains(h.el,d[m])){f=!1;break}if(!f)break;p=h,h=h.downNode}p&&(p.addAllEdgesTo(u,e,s),u=p)}u=u.downNode}}}),!a}}}),Class("Ariadne.QueryFinder.Maze",{does:[Siesta.Util.Role.CanGetType],has:{finder:{required:!0},nodes:Joose.I.Array,segmentsIdGen:1,encounteredMandatoryId:!1},methods:{getRoot:function(){return this.nodes[this.nodes.length-1]},doQuery:function(e,t){var n=t.queryCache;return n[e]?n[e]:n[e]=this.finder.doQuery(e,t.el)},buildVertices:function(e,t){for(var n,r=this.nodes=[],i=e,o=this.finder,a=o.identifiers,s=o.directChildIdentifier;i;){var l=new Ariadne.QueryFinder.Node({finder:o,maze:this,el:i,index:r.length});if(n&&(n.upNode=l,l.downNode=n,s)){var u=s.identify(n.el,t,this);if(u){u=this.normalizeIdentifierResult(u)[0];var c=new Ariadne.QueryFinder.Edge({finder:o,maze:this,isDirectChild:!0,fromNode:n,toNode:l});n.directChildUpEdge=c,n.adoptSegment(u),c.consumeVariant([u],o.combineSegments([u],!0))}}if(n=l,r.push(l),i==t)break;for(var d=[],h=0;h<a.length;h++){var p=a[h].identify(i,t,this);p&&d.push.apply(d,this.normalizeIdentifierResult(p))}l.setSegments(d),i=o.getParent(i)}r[0].weightOptions=[{weight:0,minFromEdgesById:{}}],r[0].weightOptionsByWeight[0]=r[0].weightOptions[0]},normalizeIdentifierResult:function(e){var t=this;return"Array"!=this.typeOf(e)&&(e=[e]),e.map(function(e){return"String"==t.typeOf(e)?{query:e,weight:1e3}:(e.hasOwnProperty("weight")||(e.weight=1e3),e)})},computePath:function(e){var t=this.nodes,n=(this.getRoot(),0);e||((e={})[t[0].id]=t[0]);do{n++;var r={},i=!1;for(var o in e){var a=e[o];if(0!==a.weightOptions.length){for(var s in a.edgesToByIndex){var l=a.edgesToByIndex[s],u=l.toNode;l.relax()&&(r[u.id]=u,i=!0)}var c=a.directChildUpEdge;c&&c.relax()&&(r[(u=c.toNode).id]=u,i=!0)}}e=r}while(i&&n<t.length)},buildEdges:function(){for(var e=this.finder.recognizers,t=0;t<e.length;t++)e[t].recognize(this);for(var n=this.nodes,r=0;r<n.length-1&&!1!==n[r].buildEdges3(1);r++)n[r].buildEdges3(2),n[r].buildEdges3(3)},expandSimplePaths:function(e){for(var t=this.nodes,n={},r=[],i=0;i<e.length;i++){for(var o=e[i].split("_"),a=[],s=o.length-1;s>1;s--){var l="+"==o[s][0],u=s<o.length-1&&"+"==o[s+1][0],c=t[Number(o[s])],d=l?c.directChildUpEdge:c.edgesToByIndex[Number(o[s-1])];a=c.extendPathVariants(a,d.segmentVariants,u?c.index:null)}for(var h=0;h<a.length;h++){var p=a[h];n[p.hash]||(r.push(p),n[p.hash]=!0)}}return r.sort(function(e,t){return e.weight-t.weight}),r},findAllPaths:function(e){this.computePath();for(var t=this.getRoot().collectFullSimplePathCollection(),n=0;n<t.length;n++){var r=t[n].simplePaths,i=this.verifySimplePathGroup(r,e);if(i.length)return e&&e.detailed?i:i.map(function(e){return e.query})}return[]},verifySimplePathGroup:function(e,t){for(var n=this.getRoot(),r=this.finder,i=this.expandSimplePaths(e),o=[],a=this.nodes[0].el,s=n.el,l=0;l<i.length;l++){var u=i[l],c=[];for(var d in u.segmentsById)c.push(u.segmentsById[d]);var h=r.combineSegments(c);if(h&&r.verifyQuery(h.query,a,s)&&(o.push(h),t&&t.singleOnly))return o}return o},countEdges:function(e){var t=0;return this.nodes.forEach(function(n){for(var r in n.edgesToByIndex){var i=n.edgesToByIndex[r];t+=i.segmentVariants.length,e&&i.segmentVariants.forEach(function(e){console.log("Edge from: "+i.fromNode.index+"["+i.fromNode.el.tagName+"] to "+i.toNode.index+"["+i.toNode.el.tagName+"] query: "+i.finder.combineSegments(e.variant).query)})}}),t}}}),Class("Ariadne.QueryFinder",{does:[Ariadne.QueryFinder.TreeWalker],has:{recognizers:Joose.I.Array,identifiers:Joose.I.Array,directChildIdentifier:null,enableMandatoryId:!0},methods:{initialize:function(){this.initRecognizers(),this.initIdentifiers(),this.recognizers.sort(function(e,t){return t.priority-e.priority}),this.identifiers.sort(function(e,t){return t.priority-e.priority})},addRecognizer:function(e){return this.recognizers.push(e),e},addIdentifier:function(e){return this.identifiers.push(e),e},initRecognizers:function(){},initIdentifiers:function(){},findQuery:function(e,t){return this.findQueries(e,t,{singleOnly:!0})[0]},findQueries:function(e,t,n){if(!e)throw new Error("No target");if(!t)throw new Error("No root");if(e==t)throw new Error("Can't find query - target and root are the same");if(this.contains(e,t))throw new Error("Can't find query - root is contained within target, need to swap the arguments?");var r=new Ariadne.QueryFinder.Maze({finder:this});return r.buildVertices(e,t),r.buildEdges(),r.findAllPaths(n)},forAllCombinations:function(e,t){return new Ariadne.QueryFinder.Combinator({elements:e}).forAllCombinations(t)},bisect:function(e,t,n){for(;e<=t;){var r=Math.round((e+t)/2),i=n(r);if(!1===i)return!1;if(e==t)return;if(null==i)throw new Error("Unknown bisect direction");i<0&&(t=r-1),i>0&&(e=r+1)}},combineSegments:function(e,t){for(var n=[],r=0,i=[],o={},a=!1,s=0;s<e.length;s++){var l=e[s],u=l.id;if(!o[u]){o[u]=!0,i.push(u);var c=l.index;if((h=n[c])||(h=n[c]={segments:[],hasLeading:!1,child:!1}),r+=l.weight,l.leading){if(h.hasLeading)return null;h.hasLeading=!0,h.segments.unshift(l.query)}else h.segments.push(l.query);l.child&&(h.child=!0),l.isId&&(a=!0)}}for(var d="",s=n.length-1;s>=0;s--){var h=n[s];if(h){if(!t&&h.child&&(s==n.length-1||!n[s+1]))throw new Error("Invalid direct child component");var p=h.segments.join("");d?d+=(h.child?" > ":" ")+p:d=p}}return i.sort(function(e,t){return e-t}),{query:d,weight:r,hasId:a,hash:i.join("")}},doQuery:function(e,t){throw new Error("Abstract method called: `doQuery`")},verifyQuery:function(e,t,n){var r=this.doQuery(e,n);return 1==r.length&&r[0]==t}}}),Role("Ariadne.DomQueryFinder.Role.DomHelper",{does:[Siesta.Util.Role.CanGetType],methods:{ignoreCssClass:function(e,t){return!1},getCssClasses:function(e){var t="String"==this.typeOf(e.className)?e.className.trim():"",n=[],r={};t=t&&t.split(/\s+/)||[];for(var i=0;i<t.length;i++){var o=t[i];r[o]||(this.ignoreCssClass(o,e)||n.push(o),r[o]=!0)}return n},escapeDomSelector:function(e,t){return t?Siesta.Sizzle.escape(e):Siesta.Sizzle.escape("L"+e).substring(1).replace(/\\ /g," ")},unEscapeDomSelector:function(e){return Siesta.Sizzle.unescape(e)}}}),Role("Ariadne.DomQueryFinder.TreeWalker",{methods:{getParent:function(e){return e.parentNode},contains:function(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||Boolean(16&e.compareDocumentPosition(t));throw new Error("Can't determine `contains` status")}}}),Class("Ariadne.DomQueryFinder.Identifier.AttributeValue",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{attributes:function(){return["name","title"]}},methods:{initialize:function(e){this.attributes=this.mergeArrayAttributeFromClassHierarchy("attributes",e)},ignoreAttribute:function(e,t){return!1},identify:function(e,t,n){for(var r=this.attributes,i=[],o=0;o<r.length;o++){var a=r[o];e.hasAttribute(a)&&!this.ignoreAttribute(e,a)&&i.push("["+a+"='"+this.escapeDomSelector(e.getAttribute(a))+"']")}return i}}}),Class("Ariadne.DomQueryFinder.Identifier.TagName",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,methods:{identify:function(e,t,n){var r=e.ownerDocument,i=!(n.nodes.length&&e!=n.nodes[0].el||e!=r.body&&e!=r.documentElement);return{query:this.escapeDomSelector(e.tagName.toLowerCase()),leading:!0,weight:i?900:1e3}}}}),Class("Ariadne.DomQueryFinder.Identifier.Contains",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{maxCharsForContainsSelector:30},methods:{identify:function(e,t,n){this.attributes;var r=e.children||e.childNodes;if(0==r.length||1==r.length&&!r[0].innerHTML){var i=e.textContent.trim();if(i.length>1)return i.length<=this.maxCharsForContainsSelector?{query:":textEquals("+this.escapeDomSelector(i)+")"}:{query:":contains("+this.escapeDomSelector(i.substr(0,this.maxCharsForContainsSelector))+")"}}return null}}}),Class("Ariadne.DomQueryFinder.Identifier.CssClass",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{ignoreCssClasses:function(){return["^null$","^undefined$"]},ignoreCssClassesRegExp:null},methods:{initialize:function(e){var t=this.mergeArrayAttributeFromClassHierarchy("ignoreCssClasses",e);this.ignoreCssClassesRegExp=t.length?new RegExp(t.join("|")):/\0/},identify:function(e,t,n){for(var r=this.processCssClasses(this.getCssClasses(e),e),i=[],o=0;o<r.length;o++)i.push({query:"."+this.escapeDomSelector(r[o],!0),weight:this.getWeightForCssClass(r[o],e)});return i},getWeightForCssClass:function(e,t){return 1e3},ignoreCssClass:function(e,t){return this.ignoreCssClassesRegExp.test(e)},processCssClasses:function(e,t){return e}}}),Class("Ariadne.DomQueryFinder.Identifier.Id",{isa:Ariadne.QueryFinder.Identifier,does:Ariadne.DomQueryFinder.Role.DomHelper,has:{uniqueDomNodeProperty:null,shouldIgnoreDomElementId:null},methods:{identify:function(e,t,n){var r=this.uniqueDomNodeProperty||"id",i=e.getAttribute(r),o=this.shouldIgnoreDomElementId;if(!i||this.ignoreDomId(i,e)||o&&o(i,e))return null;var a=n.encounteredMandatoryId||!this.finder.enableMandatoryId?1e3:-1e5;return n.encounteredMandatoryId=!0,{query:"id"==r?"#"+this.escapeDomSelector(i,!0):"["+r+"='"+this.escapeDomSelector(i)+"']",weight:a,isId:!0}},ignoreDomId:function(){return!1}}}),Class("Ariadne.DomQueryFinder.Identifier.NthOfType",{isa:Ariadne.QueryFinder.Identifier,methods:{identify:function(e,t,n){var r=e.parentElement;if(!r)return null;for(var i=r.children||r.childNodes,o=0,a=e.tagName.toLowerCase(),s=0;s<i.length&&(i[s].tagName.toLowerCase()!=a||(o++,i[s]!=e));s++);return{query:":nth-of-type("+o+")",weight:1e6}}}}),Class("Ariadne.DomQueryFinder.Identifier.DirectChild",{isa:Ariadne.DomQueryFinder.Identifier.NthOfType,methods:{identify:function(e,t,n){if(!e.parentElement||e.parentElement==t)return null;var r=this.SUPERARG(arguments);return r.query=e.tagName.toLowerCase()+r.query,r.leading=!0,r.child=!0,r.weight*=10,r}}}),Class("Ariadne.DomQueryFinder",{isa:Ariadne.QueryFinder,does:Ariadne.DomQueryFinder.TreeWalker,has:{uniqueDomNodeProperty:null,shouldIgnoreDomElementId:null,ignoreCssClasses:null},methods:{initRecognizers:function(){},initIdentifiers:function(){this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Id({uniqueDomNodeProperty:this.uniqueDomNodeProperty,shouldIgnoreDomElementId:this.shouldIgnoreDomElementId,finder:this,priority:1e4})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.CssClass({ignoreCssClasses:this.ignoreCssClasses,finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Contains({finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.AttributeValue({finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.TagName({finder:this,priority:100})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.NthOfType({finder:this,priority:10})),this.directChildIdentifier=new Ariadne.DomQueryFinder.Identifier.DirectChild({finder:this})},doQuery:function(e,t){return/:contains\(/.test(e)||/:textEquals\(/.test(e)||/:nth-of-type\(\d/.test(e)?Siesta.Sizzle(e,t):(t||document).querySelectorAll(e)},findQueries:function(e,t,n){if(!e)throw new Error("No target");return t||(t=e.ownerDocument),this.SUPER(e,t,n)}}}),Class("Siesta.Recorder.TargetExtractor",{does:[Siesta.Util.Role.Dom,Siesta.Recorder.Role.CanSwallowException],has:{ariadneDomFinder:null,shouldIgnoreDomElementId:null,ignoreCssClasses:null,uniqueDomNodeProperty:"id",recorder:null},methods:{initialize:function(){this.ariadneDomFinder=new Ariadne.DomQueryFinder({uniqueDomNodeProperty:this.uniqueDomNodeProperty,shouldIgnoreDomElementId:this.shouldIgnoreDomElementId,ignoreCssClasses:this.ignoreCssClasses}),this.swallowExceptions&&(this.findDomQueryFor=this.safeBind(this.findDomQueryFor))},getBubbleTarget:function(){return this.recorder},findOffset:function(e,t,n){var r=this.offset(n);return r.left=r.left,r.top=r.top,[e-r.left,t-r.top]},findDomQueryFor:function(e,t){return this.ariadneDomFinder.findQuery(e,t)},getTargets:function(e,t,n,r){var i,o=[],a=n||e.target,s=null!=e.x&&null!=e.y;return r&&!s?o:(r||a==a.ownerDocument.body&&s||(i=this.findDomQueryFor(a))&&o.push({type:"css",target:i,offset:!s||!t&&this.isElementReachableAtCenter(a,!1)?null:this.findOffset(e.x,e.y,a)}),s&&o.push({type:"xy",target:[e.x,e.y]}),o)}}}),Role("Siesta.Recorder.Role.CanRecordMouseMove",{does:[Siesta.Util.Role.CanCalculatePageScroll,Siesta.Recorder.Role.CanSwallowException],has:{recordMouseMove:!0,cursorPosition:Joose.I.Array,lastMoveTimestamp:null,lastMouseMoveEvent:null},override:{initialize:function(){this.SUPERARG(arguments),this.onBodyMouseMove=this.safeBind(this.onBodyMouseMove),this.onBodyMouseOver=this.safeBind(this.onBodyMouseOver),this.onBodyMouseOut=this.safeBind(this.onBodyMouseOut)},onStart:function(){this.SUPERARG(arguments);var e=this.window.document.body;this.recordMouseMove&&(e.addEventListener("mouseover",this.onBodyMouseOver,!0),e.addEventListener("mouseout",this.onBodyMouseOut,!0),e.addEventListener("mousemove",this.onBodyMouseMove,!0))},onStop:function(){this.SUPERARG(arguments);var e=this.window.document.body;this.recordMouseMove&&(e.removeEventListener("mouseover",this.onBodyMouseOver,!0),e.removeEventListener("mouseout",this.onBodyMouseOut,!0),e.removeEventListener("mousemove",this.onBodyMouseMove,!0),this.lastMouseMoveEvent=null)}},methods:{saveMouseMoveData:function(e){var t=this;t.lastMoveTimestamp=new Date-0,t.cursorPosition[0]=t.viewportXtoPageX(e.clientX,t.window),t.cursorPosition[1]=t.viewportYtoPageY(e.clientY,t.window),t.lastMouseMoveEvent=e},onBodyMouseMove:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.saveMouseMoveData(e),this.processBodyMouseMove(e))},processBodyMouseMove:function(e){},onBodyMouseOver:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.saveMouseMoveData(e),this.processBodyMouseOver(e))},processBodyMouseOver:function(e){},onBodyMouseOut:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.saveMouseMoveData(e),this.processBodyMouseOut(e))},processBodyMouseOut:function(e){},targetToPathPoint:function(e){var t=[e.getTargetAsQueryString()];return e.getTarget().offset&&t.push.apply(t,e.getTarget().offset),t.xy=e.getTargetByType("xy").target,t},addPathPoint:function(e,t){if(3!==t.length){var n=e[e.length-1];if(1===t.length&&"Array"==this.typeOf(t[0])){var r=[t[0][0]-n.xy[0],t[0][1]-n.xy[1]];if(0===r[0]&&0===r[1])return;r.xy=t[0],e.push(r)}else e.push(t)}else e.push(t)},addMoveCursorAction:function(e,t,n){e instanceof Siesta.Recorder.Event||(e=Siesta.Recorder.Event.fromDomEvent(e));var r=this.getLastAction(),i=r&&("moveCursorTo"==r.action||"moveCursorAlongPath"==r.action);if(r&&i&&this.recordMouseMovePath){var o=new Siesta.Recorder.Target({targets:this.getPossibleTargets(e,!0,t,n)});"moveCursorTo"==r.action&&(r.action="moveCursorAlongPath",r.value=[this.targetToPathPoint(r.target)],r.target=null),this.addPathPoint(r.value,this.targetToPathPoint(o)),this.fireEvent("actionupdate",r)}else{if(r&&r.hasTarget()&&r.target){var a=r.target.getTargetByType("xy");if(a&&(a=a.target,e.x==a[0]&&e.y==a[1]))return}var s=this.getPossibleTargets(e,!0,t,n);this.addAction({action:"moveCursorTo",target:s,sourceEvent:e,options:e.options})}}}}),Role("Siesta.Recorder.Role.CanRecordMouseMoveOnIdle",{has:{idleTimeout:3e3,recordMouseMoveOnIdle:!0,idleMouseMoveThrottler:null},override:{initialize:function(){this.recordMouseMoveOnIdle&&(this.recordMouseMove=!0),this.SUPERARG(arguments),this.recordMouseMoveOnIdle&&(this.idleMouseMoveThrottler=new Siesta.Util.Throttler({func:this.onBodyMouseMoveIdle,scope:this,buffer:this.idleTimeout}),this.resetMouseMoveListener=this.resetMouseMoveListener.bind(this))},onDomEvent:function(e){this.SUPERARG(arguments),this.resetMouseMoveListener()},clear:function(){this.recordMouseMoveOnIdle&&this.resetMouseMoveListener(),this.SUPERARG(arguments)},onStart:function(){this.SUPERARG(arguments);var e=this.window.document.body;this.recordMouseMoveOnIdle&&e.addEventListener("mouseleave",this.resetMouseMoveListener)},onStop:function(){this.SUPERARG(arguments);var e=this.window.document.body;this.recordMouseMoveOnIdle&&(e.removeEventListener("mouseleave",this.resetMouseMoveListener),this.resetMouseMoveListener())},processBodyMouseMove:function(e){this.SUPERARG(arguments),this.recordMouseMoveOnIdle&&this.idleMouseMoveThrottler.tick(e)}},methods:{resetMouseMoveListener:function(){this.idleMouseMoveThrottler&&this.idleMouseMoveThrottler.cancel()},onBodyMouseMoveIdle:function(e){this.addMoveCursorAction(e)}}}),Role("Siesta.Recorder.Role.CanRecordPointOfInterest",{does:Siesta.Util.Role.CanMergeArrayAttributeFromClassHierarchy,has:{moveCursorToSelectors:Joose.I.Array,pointOfInterestSelector:null,recordPointsOfInterest:!0,lastPointOfInterestEl:null},override:{initialize:function(e){this.moveCursorToSelectors=this.mergeArrayAttributeFromClassHierarchy("moveCursorToSelectors",e),this.pointOfInterestSelector=this.recordPointsOfInterest?this.moveCursorToSelectors.join(","):null,this.pointOfInterestSelector&&(this.recordMouseMove=!0),this.SUPERARG(arguments)},onStart:function(){this.SUPERARG(arguments),this.pointOfInterestSelector&&(this.lastPointOfInterestEl=null)},onStop:function(){this.SUPERARG(arguments),this.pointOfInterestSelector&&(this.lastPointOfInterestEl=null)},processBodyMouseOver:function(e){this.SUPERARG(arguments);var t=this.pointOfInterestSelector;if(t){var n=e.target;(this.matches(n,t)||(n=this.closest(e.target,t,10)))&&n!==this.lastPointOfInterestEl&&(this.lastPointOfInterestEl=n,this.addMoveCursorAction(e))}},processBodyMouseOut:function(e){this.SUPERARG(arguments),this.pointOfInterestSelector&&this.lastPointOfInterestEl&&(this.contains(this.lastPointOfInterestEl,e.target)||(this.lastPointOfInterestEl=null))}}}),Role("Siesta.Recorder.Role.CanRecordWindowResize",{requires:["getWindowSize"],does:[Siesta.Recorder.Role.CanSwallowException],has:{recordWindowResize:!0,recordInitialWindowSize:!1},override:{initialize:function(){this.SUPERARG(arguments),this.onWindowResize=this.safeBind(this.onWindowResize)},onStart:function(){this.SUPERARG(arguments);var e=this.window;if(this.recordWindowResize&&e.addEventListener("resize",this.onWindowResize),this.recordInitialWindowSize){this.recordInitialWindowSize=!1;var t=this.getWindowSize(this.window);this.addAction({action:"setWindowSize",value:[t.width,t.height]})}},onStop:function(){this.SUPERARG(arguments);var e=this.window;this.recordWindowResize&&e.removeEventListener("resize",this.onWindowResize)}},methods:{onWindowResize:function(e){var t=this.getWindowSize(this.window),n=this.getLastAction();n&&"setWindowSize"==n.action?(n.value=[t.width,t.height],this.fireEvent("actionupdate",n)):this.addAction({action:"setWindowSize",value:[t.width,t.height],sourceEvent:Siesta.Recorder.Event.fromDomEvent(e)})}}}),Role("Siesta.Recorder.Role.CanRecordMouseMovePath",{has:{recordMouseMovePath:!1,lastMouseOutTarget:null},after:{onStart:function(){this.lastMouseOutTarget=null},onStop:function(){this.lastMouseOutTarget=null}},override:{initialize:function(){this.recordMouseMovePath&&(this.recordPointsOfInterest=!1,this.recordMouseMoveOnIdle=!1),this.SUPERARG(arguments),!0===this.recordMouseMovePath&&(this.recordMouseMovePath="coordinate")},processBodyMouseOver:function(e){this.SUPERARG(arguments),this.recordMouseMovePath&&e.target!=this.lastMouseOutTarget&&this.addMoveCursorAction(e,null,"coordinate"==this.recordMouseMovePath||"down"==this.mouseState),this.lastMouseOutTarget=null},processBodyMouseOut:function(e){this.SUPERARG(arguments),this.lastMouseOutTarget=e.relatedTarget,this.recordMouseMovePath&&this.addMoveCursorAction(e,e.relatedTarget,"coordinate"==this.recordMouseMovePath||"down"==this.mouseState)}}}),Role("Siesta.Recorder.Role.CanRecordMouseDownUp",{has:{mouseState:"up",eventNameMap:{lazy:"this.buildEventNameMap"},needToCaptureInitialMouseState:!0},override:{initialize:function(){this.SUPERARG(arguments),this.onDocMouseDown=this.safeBind(this.onDocMouseDown),this.onDocMouseUp=this.safeBind(this.onDocMouseUp),this.onInitialMouseMove=this.safeBind(this.onInitialMouseMove)},onStart:function(){this.SUPERARG(arguments);var e=this.getEventNameMap(),t=this.window.document;t.addEventListener(e.mousedown,this.onDocMouseDown,!0),t.addEventListener(e.mouseup,this.onDocMouseUp,!0),t.body.addEventListener("mousemove",this.onInitialMouseMove,!0),this.needToCaptureInitialMouseState=!0},onStop:function(){this.SUPERARG(arguments);var e=this.getEventNameMap(),t=this.window.document;t.removeEventListener(e.mousedown,this.onDocMouseDown,!0),t.removeEventListener(e.mouseup,this.onDocMouseUp,!0),this.needToCaptureInitialMouseState&&this.onInitialStateCaptured()}},methods:{onInitialMouseMove:function(e){null!=e.buttons&&1&e.buttons&&(this.mouseState="down"),this.onInitialStateCaptured()},onInitialStateCaptured:function(){this.window.document.body.removeEventListener("mousemove",this.onInitialMouseMove,!0),this.needToCaptureInitialMouseState=!1},onDocMouseDown:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.needToCaptureInitialMouseState&&this.onInitialStateCaptured(),this.processDocMouseDown(e))},processDocMouseDown:function(e){this.mouseState="down"},onDocMouseUp:function(e){this.ignoreSynthetic&&e.synthetic||e.target.ownerDocument!==this.window.document||(this.needToCaptureInitialMouseState&&this.onInitialStateCaptured(),this.processDocMouseUp(e))},processDocMouseUp:function(e){this.mouseState="up"},isPointerDownEvent:function(e){return/(ms)?(pointer|mouse)down/i.test(e.type)},isPointerUpEvent:function(e){return/(ms)?(pointer|mouse)up/i.test(e.type)},buildEventNameMap:function(){var e={};return window.PointerEvent?(e.mousedown="pointerdown",e.mouseup="pointerup"):window.MSPointerEvent?(e.mousedown="MSPointerDown",e.mouseup="MSPointerUp"):(e.mousedown="mousedown",e.mouseup="mouseup"),e}}}),Role("Siesta.Recorder.Role.CanRecordScroll",{has:{recordScroll:!1},override:{initialize:function(){var e=this;e.SUPERARG(arguments),e.onScrollEvent=e.onScrollEvent.bind(e)},onStart:function(){this.SUPERARG(arguments);var e=this.window.document;this.recordScroll&&e.addEventListener("scroll",this.onScrollEvent,!0)},onStop:function(){this.SUPERARG(arguments);var e=this.window.document;this.recordScroll&&e.removeEventListener("scroll",this.onScrollEvent,!0)},onScrollEvent:function(e){var t=this,n=e.target,r=t.window,i=r.document,o=this.getLastAction();if(o&&"scrollTo"==o.action&&n==o.sourceEvent.target)n===i&&(n=this.getElForPageScroll(r)),o.value=[n.scrollLeft,n.scrollTop],this.fireEvent("actionupdate",o);else{var a;n===i&&(a=!0,n=this.getElForPageScroll(r));var s=this.cursorPosition;if(2===s.length&&!a){var l=this.pageXtoViewportX(s[0],r),u=this.pageYtoViewportY(s[1],r);if(!this.isPointWithinElement(l,u,n))return}this.addAction({action:"scrollTo",target:this.getPossibleTargets(e,!1,n),value:[n.scrollLeft,n.scrollTop],sourceEvent:Siesta.Recorder.Event.fromDomEvent(e)})}}}}),Class("Siesta.Recorder.Recorder",{does:[JooseX.Observable,Siesta.Util.Role.Dom,Siesta.Util.Role.CanParseOs,Siesta.Util.Role.CanGetType,Siesta.Recorder.Role.CanSwallowException,Siesta.Recorder.Role.CanRecordMouseDownUp,Siesta.Recorder.Role.CanRecordMouseMove,Siesta.Recorder.Role.CanRecordMouseMoveOnIdle,Siesta.Recorder.Role.CanRecordPointOfInterest,Siesta.Recorder.Role.CanRecordWindowResize,Siesta.Recorder.Role.CanRecordScroll,Siesta.Recorder.Role.CanRecordMouseMovePath],has:{active:null,extractor:null,extractorClass:Siesta.Recorder.TargetExtractor,extractorConfig:null,uniqueComponentProperty:null,uniqueDomNodeProperty:"id",shouldIgnoreDomElementId:null,ignoreCssClasses:Joose.I.Array,recordOffsets:!1,ignoreSynthetic:!0,window:null,clickMergeThreshold:200,debugMode:!1,eventsToRecord:{lazy:"this.buildEventsToRecord"},events:Joose.I.Array,processingEvent:null,actions:Joose.I.Array,actionsByEventId:Joose.I.Object,dragPixelThreshold:3,actionClass:Siesta.Recorder.Action,warnAboutIframeMissingId:!0},methods:{buildEventsToRecord:function(){var e=["keydown","keypress","keyup","click","dblclick","contextmenu"];return window.PointerEvent?e.push("pointerdown","pointerup"):window.MSPointerEvent?e.push("MSPointerDown","MSPointerUp"):e.push("mousedown","mouseup"),e},initialize:function(){this.onUnload=this.onUnload.bind(this),this.onFrameLoad=this.onFrameLoad.bind(this),this.onDomEvent=this.safeBind(this.onDomEvent);var e=this.extractorConfig||{};e.recorder=this,e.uniqueComponentProperty=e.uniqueComponentProperty||this.uniqueComponentProperty,e.uniqueDomNodeProperty=e.uniqueDomNodeProperty||this.uniqueDomNodeProperty,e.swallowExceptions=this.swallowExceptions,e.shouldIgnoreDomElementId=this.shouldIgnoreDomElementId,e.ignoreCssClasses=this.ignoreCssClasses,this.extractor=new this.extractorClass(e)},isSamePoint:function(e,t){return Math.abs(Math.round(e.x)-Math.round(t.x))<=this.dragPixelThreshold&&Math.abs(Math.round(e.y)-Math.round(t.y))<=this.dragPixelThreshold},isSameTarget:function(e,t){return e.target==t.target||this.contains(e.target,t.target)||this.contains(t.target,e.target)},clear:function(){var e=this;e.events=[],e.actions=[],e.actionsByEventId={},e.fireEvent("clear",e)},onUnload:function(){var e=this.actions,t=e.length&&e[e.length-1];t&&t.target&&(t.waitForPageLoad=!0),this.stop(!0)},onFrameLoad:function(e){try{var t=e.target.contentWindow;t.location.href}catch(e){t=null}t&&(this.attach(t),this.start())},attach:function(e){this.window!==e&&this.stop(),this.events=[],this.window=e},start:function(){this.active||(this.ignoreSynthetic||this.hasOwnProperty("clickMergeThreshold")||(this.clickMergeThreshold=1/0),this.stop(),this.active=Date.now(),this.onStart(),this.fireEvent("start",this))},stop:function(e){this.active&&(this.active=null,this.onStop(e),this.fireEvent("stop",this))},getRecordedEvents:function(){return this.events},getRecordedActions:function(){return this.actions},getRecordedActionsAsSteps:function(){return Joose.A.map(this.actions,function(e){return e.asStep()})},onDomEvent:function(e){var t=e.target;if(this.processingEvent=e,this.debugMode&&this.window.console&&"function"==typeof this.window.console.log&&console.log("[EVENT] : ",e.type,t,e.keyIdentifier||e.key),t&&(!this.ignoreSynthetic||!e.synthetic&&e.isTrusted)){var n=Siesta.Recorder.Event.fromDomEvent(e);this.convertToAction(n),this.events.push(n),this.events.length>10&&this.events.shift(),this.fireEvent("domevent",n)}},eventToAction:function(e,t){var n,r=e.type,i={action:n=r.match(/^key/)?"type":this.isPointerDownEvent(e)?"mousedown":this.isPointerUpEvent(e)?"mouseup":r,target:this.getPossibleTargets(e,!0,null,t),options:e.options,sourceEvent:e,sourceEventTargetReachableAtCenter:this.isElementReachableAtCenter(e.target,!1)},o=e.target.ownerDocument.defaultView;if(o!==this.window&&!t){if(!o.frameElement.id&&this.warnAboutIframeMissingId)throw new Error('To record events in a nested iframe, please set an "id" property on your frames');i.target=i.target.filter(function(e){return"string"==typeof e.target&&(e.target="#"+o.frameElement.id+" -> "+e.target,!0)})}return new this.actionClass(i)},recordAsAction:function(e,t){var n=this.eventToAction(e,t);if(n)return this.addAction(n),n},addAction:function(e){e instanceof this.actionClass||(e=new this.actionClass(e)),this.beforeAddAction(e),this.actions.push(e),e.sourceEvent&&(this.actionsByEventId[e.sourceEvent.id]=e),this.debugMode&&this.window.console&&"function"==typeof this.window.console.log&&console.log("[ACTION] : "+e.action,e.getTarget()&&e.asStep().target||"",e),this.fireEvent("actionadd",e)},removeAction:function(e){for(var t=this.actions,n=0;n<t.length;n++){var r=t[n];if(r==e){t.splice(n,1),r.sourceEvent&&delete this.actionsByEventId[r.sourceEvent.id],this.fireEvent("actionremove",e);break}}},removeActionByEventId:function(e){this.removeAction(this.getActionByEventId(e))},removeActionByEvent:function(e){this.removeAction(this.getActionByEventId(e.id))},getActionByEvent:function(e){return this.actionsByEventId[e.id]},getActionByEventId:function(e){return this.actionsByEventId[e]},getLastAction:function(){return this.actions[this.actions.length-1]},getLastEvent:function(){return this.events[this.events.length-1]},canCombineTypeActions:function(e,t){return e.ctrlKey==t.ctrlKey&&e.metaKey==t.metaKey&&e.shiftKey==t.shiftKey&&e.altKey==t.altKey},finalizeDragAction:function(e,t){var n=this.eventToAction(e,!0);n.target=new Siesta.Recorder.Target({targets:[{target:[e.x,e.y],type:"xy"}]}),this.addAction(n)},convertToAction:function(e){var t=e.type,n=this.getRecordedEvents(),r=n.length,i=this.getLastEvent(),o=r>=2?n[r-2]:null;if(!this.shouldIgnoreEvent(e,i,o))if("keypress"!=t&&"keyup"!=t&&"keydown"!=t)if(r){if("dblclick"==t)return this.getRecordedActions().length>1&&this.removeAction(this.getLastAction()),this.getLastAction().action="dblclick",void this.fireEvent("actionupdate",this.getLastAction());if(this.isPointerDownEvent(i)&&this.isPointerUpEvent(e)&&e.button==i.button&&!this.isSamePoint(e,i))this.finalizeDragAction(e,i);else if(i&&this.isPointerUpEvent(e)&&this.isPointerDownEvent(i)&&e.button==i.button&&this.isSamePoint(e,i)&&!bowser.gecko)this.recordAsAction(e,!0);else{var a=bowser.gecko&&bowser.windows;if(o&&"click"===t){if(this.isPointerUpEvent(i)&&e.button==i.button&&e.button==o.button&&this.isSamePoint(e,i)&&this.isPointerDownEvent(o)&&this.isSameTarget(e,i)&&this.isSameTarget(e,o)&&this.isSamePoint(e,o)){var s=this.getActionByEvent(o);return void(Date.now()-s.getTimestamp()>this.clickMergeThreshold||(this.removeActionByEvent(i),e.target==i.target&&i.target==o.target&&!this.recordOffsets&&s.sourceEventTargetReachableAtCenter&&s.clearTargetOffset(a),s.action="click",this.fireEvent("actionupdate",s)))}}else{if("contextmenu"===t){var l=this.getLastAction();if(a&&"click"==i.type&&"click"==l.action)return l.action="contextmenu",l.restoreTargetOffset(),void this.fireEvent("actionupdate",l);(this.isPointerUpEvent(i)||this.isPointerDownEvent(i))&&e.button==i.button&&this.isSamePoint(e,i)&&this.removeActionByEvent(i),this.isPointerUpEvent(i)&&this.isPointerDownEvent(o)&&this.isSameTarget(e,i)&&this.isSameTarget(e,o)&&this.isSamePoint(e,o)&&this.removeActionByEvent(o)}this.recordAsAction(e)}}}else this.recordAsAction(e);else this.convertKeyEventToAction(e)},shouldIgnoreEvent:function(e,t,n){var r=e.type.match(/^key/),i=e.keyCode,o=Siesta.Test.UserAgent.KeyCodes().keys;return!(!r||i!==o.SHIFT&&i!==o.CTRL&&i!==o.ALT&&i!==o.CMD)||(!(!this.isPointerUpEvent(e)||!t||"contextmenu"!==t.type)||(!!("keypress"==e.type&&t&&"keydown"==t.type&&n&&"keydown"==n.type&&e.rawEvent.key==t.rawEvent.key&&"Control"==n.rawEvent.key&&e.rawEvent.timeStamp-t.rawEvent.timeStamp<3)||(!("click"!=e.type||!t||"click"!=t.type||"label"!==t.target.nodeName.toLowerCase())||void 0)))},convertKeyEventToAction:function(e){var t=e.type,n=this.getLastEvent(),r=Siesta.Test.UserAgent.KeyCodes(),i="keydown"==t&&(r.isSpecial(e.keyCode)||r.isNav(e.keyCode)),o=r.isModifier(e.keyCode),a=e.options,s=n&&n.type,l="keypress"==t&&"keydown"==s&&(r.isSpecial(n.keyCode)||r.isNav(n.keyCode)),u=(this.parseOS(navigator.platform),"MacOS"===this.parseOS(navigator.platform));if("keypress"==t&&!i&&!l||"keydown"==t&&(i||o||!u&&a.ctrlKey||u&&a.metaKey)){var c=this.getLastAction(),d=e.rawEvent.key?e.rawEvent.key:i?r.fromCharCode(e.charCode,!0):String.fromCharCode(e.charCode);return d=i?"["+d.toUpperCase()+"]":d,void(c&&"type"===c.action&&this.canCombineTypeActions(c.options,e.options)?r.isModifier(e.keyCode)||(c.value+=d,this.fireEvent("actionupdate",c)):this.addAction({action:"type",target:this.getPossibleTargets(e),value:d,sourceEvent:e,options:e.options}))}},onStart:function(){var e=this,t=e.window,n=(t.document.body,this.getNestedFrames().map(function(e){return e.contentWindow}));[t].concat(n).forEach(function(t){e.registerWindowListeners(t)}),t.frameElement&&t.frameElement.addEventListener("load",this.onFrameLoad),t.addEventListener("unload",this.onUnload),t.focus()},onStop:function(e){var t=this,n=t.window,r=(n.document.body,this.getNestedFrames().map(function(e){return e.contentWindow}));[n].concat(r).forEach(function(e){t.deregisterWindowListeners(e)}),e||n.frameElement&&n.frameElement.removeEventListener("load",t.onFrameLoad),n.removeEventListener("unload",this.onUnload)},registerWindowListeners:function(e){if(!this.isCrossOriginWindow(e)){var t=this;t.getEventsToRecord().forEach(function(n){e.document.addEventListener(n,t.onDomEvent,!0)})}},deregisterWindowListeners:function(e){if(!this.isCrossOriginWindow(e)){var t=this;t.getEventsToRecord().forEach(function(n){e.document.removeEventListener(n,t.onDomEvent,!0)})}},getNestedFrames:function(){var e=this;return Array.prototype.slice.apply(this.window.document.getElementsByTagName("iframe")).filter(function(t){return!e.isCrossOriginWindow(t.contentWindow)})},beforeAddAction:function(e){},getPossibleTargets:function(e,t,n,r){return"HTMLDocument"==this.typeOf(e.target)&&(e.target=e.target.body),this.extractor.getTargets(e,t,n,r)}}}),Role("Siesta.Util.Role.CanInstallCQRootPseudo",{methods:{installRootPseudoCQ:function(e){if(e){var t=e.ComponentQuery;if(t){var n=t.pseudos;if(!n.root||!n.root.__IS_ROOT_PSEUDO_OVERRIDE__){var r=function(e,t){var n,r=0,i=e.length,o=[],a=void 0===t;for(a||(t=Number(t)-1);r<i;r++)(n=e[r].up())&&n.contains&&n.contains(e[r])||o.push(e[r]);return a||(o=o[t]?[o[t]]:[]),o};r.__IS_ROOT_PSEUDO_OVERRIDE__=!0,n.root=r}n["ariadne-nth-child"]||(n["ariadne-nth-child"]=function(e,t){for(var n=[],r=Number(t)-1,i=e.length,o=0;o<i;o++){var a=e[o],s=a.getRefOwner&&a.getRefOwner()||a.ownerCt,l=s&&s.items;l&&l.getCount&&(r<l.getCount()?l.getAt(r)===a&&n.push(a):s.getRefItems()[r]===a&&n.push(a))}return n});var i=e.getVersion&&e.getVersion("ext");if(i&&4==i.major&&!t.__CQ4_PATCHED__){e.dom.Query.operators["="]=function(e,t){return e==Siesta.Sizzle.unescape(t)};var o=t.query;t.query=function(e,t){return/\\,/.test(e)?o.call(this,{split:function(){return[e]}},t):o.call(this,e,t)},t.__CQ4_PATCHED__=!0}}}}}}),Role("Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper",{methods:{getComponentOfDomElement:function(e){var t=e.ownerDocument,n=t.body,r=(t.defaultView||t.parentWindow).Ext;if(!r||!r.getCmp)return null;for(;e&&e!=n;){var i=e.getAttribute("id");if(i&&r.getCmp(i))return r.getCmp(i);e=e.parentElement}return null},getExtByDomElement:function(e){var t=e.ownerDocument;return(t.defaultView||t.parentWindow).Ext},getExtCssClassPrefixRegexp:function(e){var t=this.getExtByDomElement(e);if(!t)return null;var n=t.baseCSSPrefix||"x";return new RegExp("^"+n)},valueIsAutoGeneratedByComponent:function(e,t){if(!e.up)return!1;t=String(t);var n=e.autoGenId?[e]:[],r=e.up("[autoGenId=true]");r&&n.push(r);var i=r&&r.query&&r.query("[autoGenId=true]");return i&&n.push.apply(n,i),n.some(function(e){return t.indexOf(e.id)>=0})},componentHasAutoGeneratedId:function(e,t){var n=e.id;return!!/^ext-gen\d+|^ext-comp\d+/.test(n)||(!(!t||!this.idIsGeneratedByExtDotIdCall(n,t))||(e.isWidget?n.replace(/\d+$/,"")==e.identifiablePrefix:e.autoGenId||this.valueIsAutoGeneratedByComponent(e,n)))},idIsGeneratedByExtDotIdCall:function(e,t,n){if(!(t=t||this.getExtByDomElement(n)))return!1;var r=/^(.+?)\d+$/.exec(e);return Boolean(r&&r[1]==t.idPrefix)},domElementHasAutoGeneratedId:function(e){var t=e.getAttribute("id")||"";if(/^ext-/.test(t)||this.idIsGeneratedByExtDotIdCall(t,null,e))return!0;var n=this.getComponentOfDomElement(e);return!(!n||!(t!==n.id&&t.indexOf(n.id)>-1||this.componentHasAutoGeneratedId(n)))}}}),Class("Ariadne.ExtJSDomQueryFinder.Identifier.CssClass",{isa:Ariadne.DomQueryFinder.Identifier.CssClass,does:Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,has:{ignoreCssClasses:function(){return["-focus$","-focused$","-over$","-hover$","-selected$","-active$","-default$","x-form-dirty","x-grid-dirty-cell","x-unselectable","-toolbar-item$","-item-disabled","x-form-empty-field","x-grid-item-alt"]},lessRelevantCssClasses:function(){return["x-form-field","x-form-required-field","-layout","-inner$","-default$","-box-","^x-tree-elbow"]}},methods:{initialize:function(){this.SUPERARG(arguments);var e=this.lessRelevantCssClasses;e.forEach(function(t,n){e[n]=new RegExp(t)})},getWeightForCssClass:function(e,t){var n=this.getExtCssClassPrefixRegexp(t);return this.lessRelevantCssClasses.some(function(t){return t.test(e)})?1e3:!n||n.test(e)?995:950},ignoreCssClass:function(e,t){var n=this.getComponentOfDomElement(t);return!(!n||!this.valueIsAutoGeneratedByComponent(n,e))||this.SUPER(e,t)},processCssClasses:function(e,t){var n=this.getExtCssClassPrefixRegexp(t);return n?(e.sort(function(e,t){var r=n.test(e),i=n.test(t);return r&&!i?1:!r&&i?-1:0}),e):e}}}),Class("Ariadne.ExtJSDomQueryFinder.Identifier.Id",{isa:Ariadne.DomQueryFinder.Identifier.Id,does:Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,methods:{ignoreDomId:function(e,t){return this.domElementHasAutoGeneratedId(t)}}}),Class("Ariadne.ExtJSDomQueryFinder.Identifier.AttributeValue",{isa:Ariadne.DomQueryFinder.Identifier.AttributeValue,does:Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,has:{attributes:function(){return["data-ref","aria-label"]}},methods:{ignoreAttribute:function(e,t){var n=e.getAttribute(t),r=this.getComponentOfDomElement(e);return!(!r||!this.valueIsAutoGeneratedByComponent(r,n))||this.SUPERARG(arguments)}}}),Class("Ariadne.ExtJSDomQueryFinder",{isa:Ariadne.DomQueryFinder,has:{},methods:{initIdentifiers:function(){this.addIdentifier(new Ariadne.ExtJSDomQueryFinder.Identifier.Id({shouldIgnoreDomElementId:this.shouldIgnoreDomElementId,uniqueDomNodeProperty:this.uniqueDomNodeProperty,finder:this,priority:1e6})),this.addIdentifier(new Ariadne.ExtJSDomQueryFinder.Identifier.CssClass({finder:this,priority:1e5})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.Contains({finder:this,priority:1e4})),this.addIdentifier(new Ariadne.ExtJSDomQueryFinder.Identifier.AttributeValue({finder:this,priority:1e3})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.TagName({finder:this,priority:100})),this.addIdentifier(new Ariadne.DomQueryFinder.Identifier.NthOfType({finder:this,priority:10})),this.directChildIdentifier=new Ariadne.DomQueryFinder.Identifier.DirectChild({finder:this})},findQueries:function(e,t,n){return e&&e.dom&&e.dom.tagName&&(e=e.dom),this.SUPER(e,t,n)}}}),Role("Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper",{does:Ariadne.DomQueryFinder.Role.DomHelper,has:{},methods:{getComponentXType:function(e){var t=this.getComponentOwnXType(e);return t||((t=e.getXTypes&&e.getXTypes())?(t=t.split("/"))[t.length-1]:null)},getComponentOwnXType:function(e){return e.getXType&&e.getXType()||e.xtype||e.xtypes[0]},escapeCQSelector:function(e){return this.escapeDomSelector(e)},getExt4ProofXtype:function(e,t){var n=this.getComponentXType(e),r=this.escapeCQSelector(n),i=t.getVersion("ext");return i&&4==i.major&&n!=r?{query:"[xtype="+r+"]",leading:!1}:{query:r,leading:!0}}}}),Role("Ariadne.ExtJSComponentQueryFinder.TreeWalker",{methods:{getParent:function(e){return e.getRefOwner&&e.getRefOwner()||e.ownerCt||this.Ext.ComponentQuery},contains:function(e,t){var n=this.Ext.ComponentQuery;if(e==n)return!0;if(t==n)return!1;for(;t&&t!=n;){if(t==e)return!0;t=this.getParent(t)}return!1}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.XType",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper],methods:{identify:function(e,t,n){var r=this.getComponentXType(e),i=this.escapeCQSelector(r);return[this.getExt4ProofXtype(e,this.finder.Ext),{query:i+"(true)",leading:!0,weight:1010}]}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.NthChild",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper],methods:{identify:function(e,t,n){var r=this.finder.getParent(e);if(!r||r==t)return null;if(!r.items)return null;var i=r.items.indexOf(e);if(-1==i){var o=r.getRefItems&&r.getRefItems();if(!o)return null;for(var a=o.length,s=0;s<a;s++)if(o[s]===e){i=s;break}if(s>=a)return null}return{query:":ariadne-nth-child("+(i+1)+")",weight:1e6}}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.DirectChild",{isa:Ariadne.ExtJSComponentQueryFinder.Identifier.NthChild,methods:{identify:function(e,t,n){var r=this.finder.getParent(e);if(r&&r!=t||!t.query){var i=this.SUPERARG(arguments);return i&&(i.child=!0),i}var o=this.getExt4ProofXtype(e,this.finder.Ext),a=o.query+(o.leading?"(true)":""),s=t.query(a+":root").indexOf(e);if(s>=0)return{query:a+":root("+(s+1)+")",leading:o.leading,weight:1e7}}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.PropertyValue",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper,Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],has:{properties:function(){return["name","text","dataIndex","iconCls","type","title","inputType","boxLabel","fieldLabel"]}},methods:{initialize:function(e){this.properties=this.mergeArrayAttributeFromClassHierarchy("properties",e)},ignoreProperty:function(e,t){return this.valueIsAutoGeneratedByComponent(e,e[t])},identify:function(e,t,n){for(var r=this.finder.Ext,i=this.properties,o=[],a=this.getExt4ProofXtype(e,r),s=0;s<i.length;s++){var l=i[s],u=e[l];u&&"string"==typeof u&&!(this.ignoreProperty(e,l)||"inputType"==l&&r.slider&&r.slider.Multi&&e instanceof r.slider.Multi||"inputType"==l&&r.form&&r.form.field&&r.form.field.ComboBox&&e instanceof r.form.field.ComboBox||"&#160;"==u)&&o.push({query:a.query+"["+l+"="+this.escapeCQSelector(u)+"]",leading:a.leading})}return o}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.Id",{isa:Ariadne.QueryFinder.Identifier,does:[Ariadne.ExtJSComponentQueryFinder.Role.ExtJSComponentHelper,Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],methods:{identify:function(e,t,n){var r=e.id;if(r&&!this.ignoreComponentId(r,e,n.finder.Ext)){var i=n.encounteredMandatoryId||!this.finder.enableMandatoryId?1e3:-1e5;return n.encounteredMandatoryId=!0,{query:"#"+this.escapeCQSelector(r),weight:i,isId:!0}}return null},ignoreComponentId:function(e,t,n){return this.componentHasAutoGeneratedId(t,n)}}}),Class("Ariadne.ExtJSComponentQueryFinder.Identifier.ItemId",{isa:Ariadne.QueryFinder.Identifier,methods:{identify:function(e,t,n){var r=e.itemId;if(r)return{query:"#"+r,weight:-1e3}}}}),Class("Ariadne.ExtJSComponentQueryFinder",{isa:Ariadne.QueryFinder,does:[Siesta.Util.Role.CanInstallCQRootPseudo,Ariadne.ExtJSComponentQueryFinder.TreeWalker,Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],has:{Ext:null,uniqueComponentProperty:null},methods:{setExtByDomElement:function(e){this.Ext=this.getExtByDomElement(e)},setExt:function(e){this.Ext=e},initRecognizers:function(){},initIdentifiers:function(){this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.Id({finder:this,priority:1e4})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.ItemId({finder:this,priority:1e4})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.PropertyValue({properties:this.uniqueComponentProperty,finder:this,priority:1e3})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.XType({finder:this,priority:100})),this.addIdentifier(new Ariadne.ExtJSComponentQueryFinder.Identifier.NthChild({finder:this,priority:10})),this.directChildIdentifier=new Ariadne.ExtJSComponentQueryFinder.Identifier.DirectChild({finder:this})},doQuery:function(e,t){var n=this.Ext.ComponentQuery;return t==n&&(t=null),n.query(e,t)},findQueries:function(e,t,n){if(!e)throw new Error("No target");var r=this.Ext;if(!r||!r.ComponentQuery)return[];var i=r.ComponentQuery;this.installRootPseudoCQ(r),t||(t=i);var o=this.getParent(e);if(o!=t&&!o.items){var a=this.SUPER(o,t,n),s=this.SUPER(e,o,n);if(a.length&&s.length){var l=[];return a.forEach(function(e){s.forEach(function(t){l.push(e+" "+t)})}),l}}return this.SUPER(e,t,n)}}}),Class("Siesta.Recorder.TargetExtractor.ExtJS",{isa:Siesta.Recorder.TargetExtractor,does:[Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper],has:{Ext:null,skipDomQuery:!1,uniqueComponentProperty:null},methods:{initialize:function(){this.SUPER(),this.ariadneDomFinder=new Ariadne.ExtJSDomQueryFinder({uniqueDomNodeProperty:this.uniqueDomNodeProperty,shouldIgnoreDomElementId:this.shouldIgnoreDomElementId});var e=this.uniqueComponentProperty;e&&(e=e instanceof Array?e:[e]),this.ariadneCQFinder=new Ariadne.ExtJSComponentQueryFinder({uniqueComponentProperty:e}),this.swallowExceptions&&(this.findComponentQueryFor=this.safeBind(this.findComponentQueryFor),this.findCompositeQueryFor=this.safeBind(this.findCompositeQueryFor))},setExt:function(e){var t=e.ownerDocument;this.Ext=(t.defaultView||t.parentWindow).Ext,this.ariadneCQFinder.setExt(this.Ext)},getTargets:function(e,t,n,r){if(r)return this.SUPER(e,t,n,r);var i,o=n||e.target;this.setExt(o);var a=this.Ext&&this.Ext.ComponentQuery&&this.Ext.versions&&!this.Ext.versions.touch;a&&(i=this.getComponentOfDomElement(o));var s=i&&(i.el||i.element);if(s=s&&s.dom,!a||s&&!s.contains(o))return this.SUPER(e,t,n);var l=[],u=null!=e.x&&null!=e.y;if(i){var c=this.findComponentQueryFor(i);if(c&&(l.unshift({type:"cq",target:c,offset:!u||!t&&this.isElementReachableAtCenter(s,!1)?null:this.findOffset(e.x,e.y,s)}),s!=o)){var d=this.findCompositeQueryFor(o,c,i);d&&l.unshift({type:"csq",target:d,offset:!u||!t&&this.isElementReachableAtCenter(o,!1)?null:this.findOffset(e.x,e.y,o)})}}return l.concat(this.SUPER(e,t,n,this.skipDomQuery&&l.length))},findCompositeQueryFor:function(e,t,n){if(!t){if(!(n=this.getComponentOfDomElement(e)))return null;if(!(t=this.findComponentQueryFor(n)))return null}var r=(n.el||n.element).dom;if(e==r||!r.contains(e))return null;var i=this.findDomQueryFor(e,r);return i?t+" => "+i:null},findComponentQueryFor:function(e,t){return this.ariadneCQFinder.findQuery(e,t)}}}),Class("Siesta.Recorder.ExtJS",{isa:Siesta.Recorder.Recorder,has:{extractorClass:Siesta.Recorder.TargetExtractor.ExtJS,moveCursorToSelectors:function(){return[".x-menu-item:not(.x-menu-item-separator)",".x-column-header"]}},methods:{addMoveCursorAction:function(e){e.target&&this.closest(e.target,"[class*=-dd-drag-proxy]",10)?this.addAction({action:"moveCursorTo",target:[{type:"xy",target:[e.x,e.y]}],sourceEvent:e,options:e.options}):this.SUPERARG(arguments)}}}),Class("RC.recorder.Action",{isa:Siesta.Recorder.Action,has:{type:null,message:null,start:null,end:null},methods:{asStep:function(){var e,t=this.getTarget();return t&&(t="cq"==t.type?t.target.indexOf("->")>0?t.target.split("->").splice(1,0,">>").join():">>"+t.target:t.target),e="diag"===this.action?{diag:this.message,type:this.type}:this.selectText||"selectText"==this.action?{selectText:[t,this.start,this.end]}:this.setHash?{setHash:[this.value]}:this.SUPER(),this.sourceEvent&&(this.sourceEvent.target&&(e.nodeName=this.sourceEvent.target.nodeName),e.xy=[this.sourceEvent.x,this.sourceEvent.y]),e.timestamp=this.getTimestamp(),e}}}),Role("RC.recorder.CanRecordHashChange",{has:{recordHashChange:!0},override:{initialize:function(){var e=this;e.SUPERARG(arguments),e.onHashChange=e.onHashChange.bind(e)},onStart:function(){this.SUPERARG(arguments),this.recordHashChange&&this.window.addEventListener("hashchange",this.onHashChange)},onStop:function(){this.SUPERARG(arguments),this.recordHashChange&&this.window.removeEventListener("hashchange",this.onHashChange)}},methods:{onHashChange:function(e){var t=this.window.location,n=this.getLastAction();n&&"setHash"===n.action&&n.value[0]===t.hash||this.addAction({action:"setHash",value:[t.hash],sourceEvent:Siesta.Recorder.Event.fromDomEvent(e)})}}}),Role("RC.recorder.CanRecordTextSelection",{has:{recordTextSelection:!0},after:{finalizeDragAction:function(e,t){if(this.recordTextSelection){var n=t.target;if(n&&this.elementSupportsSelection(n)){var r;try{r=n.selectionStart}catch(e){r=-1}r>=0&&this.addTextSelectionAction(this.getActionByEvent(t).target,r,n.selectionEnd)}}}},methods:{elementSupportsSelection:function(e){var t=e.tagName.toLowerCase(),n=/^text|password|tel|url|search$/i;return"textarea"===t||"input"===t&&n.test(e.getAttribute("type"))},addTextSelectionAction:function(e,t,n){this.addAction({action:"selectText",target:e,start:t,end:n})}}}),Role("RC.recorder.BaseRecorderRole",{does:[RC.recorder.CanRecordHashChange,RC.recorder.CanRecordTextSelection],has:{actionClass:RC.recorder.Action,initialCursorPosition:Joose.I.Array},methods:{initialize:function(){var e=this;e.SUPERARG(arguments),e.onFirstMouseMove=e.onFirstMouseMove.bind(e)},start:function(){"function"==typeof this.window.document.body.contains&&this.SUPERARG(arguments)},onStart:function(){this.SUPERARG(arguments),this.window.document.body.addEventListener("mousemove",this.onFirstMouseMove,!0)},onStop:function(){this.SUPERARG(arguments),this.window.document.body.removeEventListener("mousemove",this.onFirstMouseMove,!0)},onFirstMouseMove:function(e){var t=this;this.window.document.body.removeEventListener("mousemove",this.onFirstMouseMove,!0),0===t.getRecordedActions().length&&(t.initialCursorPosition[0]=e.pageX,t.initialCursorPosition[1]=e.pageY)},getLastRecordedCursorPosition:function(){var e;return Joose.A.eachR(this.actions,function(t){var n=t.target&&t.target.getTargetByType("xy");if(n)return e=n.target,!1}),e},flushRemainingActions:function(){var e=this.cursorPosition,t=this.getLastEvent();if(t&&"keydown"===t.type)this.convertToAction(RC.applyIf({type:"keypress"},t));else if(2===e.length){var n=this.getLastRecordedCursorPosition();(!n||Math.abs(n[0]-e[0])>=1||Math.abs(n[1]-e[1])>=1)&&this.addMoveCursorAction(this.lastMouseMoveEvent)}},getInitialCursorPosition:function(){if(this.initialCursorPosition.length>0)return this.initialCursorPosition;if(this.getRecordedEvents().length>0)for(var e=this.getRecordedEvents(),t=0;t<e.length;t++)if("number"==typeof e[t].x)return[e[t].x,e[t].y];return null}}}),Class("RC.recorder.ExtJSRecorder",{isa:Siesta.Recorder.ExtJS,has:{},does:[RC.recorder.BaseRecorderRole]}),function(exprt){function init(libScriptUrl,onXhrRequest){var request;if(!fakeXhr){try{(request=new XMLHttpRequest).open("GET",libScriptUrl,!1),request.send(null),200===request.status&&eval(request.responseText)}catch(e){}window.sinon?fakeXhr=window.sinon.useFakeXMLHttpRequest():window.nise&&(fakeXhr=window.nise.fakeXhr.useFakeXMLHttpRequest())}return fakeXhr&&(fakeXhr.onCreate=onXhrRequest),!!fakeXhr}function onXhrRequest(e,t){t.onSend=function(t){onXhrSend(e,t)}}function onXhrSend(e,t){!1!==t.async?respondOrQueueAsyncRequest(e,t):respondSync(e,t)}function respondSync(e,t){var n=getFakeRequestMatchingRecordedResponse(t,e.recordedSyncResponses);n?(unqueueReqResp(n,e.recordedSyncResponses),t.respond(n.status,n.responseHeaders,n.response)):t.respond(404,{},"")}function respondOrQueueAsyncRequest(e,t,n){var r=getFakeRequestMatchingRecordedResponse(t,e.replayedAsyncResponses);r?(unqueueReqResp(r,e.replayedAsyncResponses),respond(e,t,r,n)):(t.timestamp=Date.now(),e.replayedRequests.push(t),n&&setTimeout(n,10))}function respondOrQueueAsyncResponse(e,t,n){var r=getRecordedResponseMatchingFakeRequest(t,e.replayedRequests);r?(unqueueReqResp(r,e.replayedRequests),respond(e,r,t,n)):(e.replayedAsyncResponses.push(t),n&&setTimeout(n,10))}function respond(e,t,n,r){var i,o=Date.now();i=function(){t.respond(n.status,n.responseHeaders||n.headers.split("\r\n").reduce(function(e,t){if(t=t.trim()){var n=t.split(":");e[n[0].trim()]=n[1].trim()}return e},{}),n.response||n.responseText),r&&setTimeout(r,10)},o-t.timestamp>=n.duration?i():setTimeout(i,n.duration-(o-t.timestamp))}function getFakeRequestMatchingRecordedResponse(e,t){return(t=t.slice()).sort(function(t,n){var r=calcFakedRequestToRecordedResponseFitness(e,t),i=calcFakedRequestToRecordedResponseFitness(e,n);return r==i&&(r=t.timestamp,i=n.timestamp),r<i?-1:1}),t.pop()}function getRecordedResponseMatchingFakeRequest(e,t){return(t=t.slice()).sort(function(t,n){var r=calcFakedRequestToRecordedResponseFitness(t,e),i=calcFakedRequestToRecordedResponseFitness(t,e);return r==i&&(r=t.timestamp,i=n.timestamp),r<i?-1:1}),t.pop()}function calcFakedRequestToRecordedResponseFitness(e,t){var n,r,i=RC.util.Url,o=RC.util.Value;return n={url:i.parse(e.url),method:e.method,async:!1!==e.async,headers:e.requestHeaders,body:e.requestBody,username:e.username,password:e.password},r={url:i.parse(t.url),method:t.method,async:!1!==t.async,headers:t.requestHeaders,body:t.request,username:t.username,password:t.password},n.url.host=n.url.host.split(".").reverse(),r.url.host=r.url.host.split(".").reverse(),delete n.url.source,delete n.url.relative,delete n.url.authority,delete r.url.source,delete r.url.relative,delete r.url.authority,o.fuzzyMatchValues(n,r)}function unqueueReqResp(e,t){return t.splice(t.indexOf(e),1),t}var fakeXhr=null;exprt.XhrSimulator=function(e){var t=this,n=this;return RC.apply(t,e),t.replayedRequests=[],t.replayedAsyncResponses=[],t.recordedSyncResponses=[],t.recordedSyncResponsesBackup=[],init(t.sinonScriptUrl,function(e){onXhrRequest(t,e)})||(n=null,console.error("Failed to initialize Ajax mocking library")),n},exprt.XhrSimulator.prototype={sinonScriptUrl:null,replayedRequests:null,replayedAsyncResponses:null,recordedSyncResponses:null,recordedSyncResponsesBackup:null,setRecordedResponses:function(e){var t=this;t.recordedSyncResponses=(e||[]).filter(function(e){return!1===e.async}),t.recordedSyncResponsesBackup=t.recordedSyncResponses.slice()},prepareFor:function(e){var t,n,r=this;r.replayedAsyncResponses=[],e&&e.length?(t=e[0].timestamp,n=e[e.length-1].timestamp,r.recordedSyncResponses=r.recordedSyncResponsesBackup.reduce(function(e,r){return r.timestamp<=t&&r.timestamp<=n&&e.push(r),e},[])):r.recordedSyncResponses=[]},simulateXhrResponse:function(e,t){var n=this;!1!==e.async?respondOrQueueAsyncResponse(n,e,t):t&&setTimeout(t,10)}}}(RC.player=RC.player||{}),RC.player=RC.player||{},RC.player.Player=function(e){var t=this;RC.apply(t,e),window.top=window,window.addEventListener("hashchange",t.onUrlChange.bind(t)),window.addEventListener("popstate",t.onUrlChange.bind(t)),this.loadPlaybackEngine()},RC.player.Player.prototype={applicationVersion:null,frameworkVersion:null,playbackScriptUrl:null,scope:null,ready:!1,harness:null,test:null,highlighter:null,initialCursorPosition:null,currentActionId:0,maxOriginalTimingActionWait:1e4,maxActionWait:500,playing:!1,speed:null,useOriginalTiming:null,sinonScriptUrl:null,replayAjaxInteraction:!1,xhrSimulator:null,extPatched:!1,isReady:function(){return this.ready},patchExtJSWindowTopAccess:function(){if(!this.extPatched&&window.Ext&&Ext.dom&&Ext.dom.Element){this.extPatched=!0;var e=Ext.dom.Element.getViewportScale;e&&e.toString().match(/\.top/)&&(Ext.dom.Element.getViewportScale=function(){var e=window;return(Ext.isiOS||Ext.isAndroid?1:e.devicePixelRatio||e.screen.deviceXDPI/e.screen.logicalXDPI)*this.getViewportTouchScale()});var t=Ext.dom.Element.getViewportTouchScale;t&&t.toString().match(/\.top/)&&(Ext.dom.Element.getViewportTouchScale=function(e){var t,n=1,r=window,i=document.documentElement,o=window;return!e&&(t=this._viewportTouchScale)?t:(Ext.isIE10p||Ext.isEdge||Ext.isiOS?n=i.offsetWidth/o.innerWidth:Ext.isChromeMobile&&(n=r.outerWidth/r.innerWidth),n)})}},loadPlaybackEngine:function(){function e(){(r=document.createElement("iframe")).name="rootcause_playback_engine",r.style.cssText="position: absolute; left: -10000px; top: -10000px;width: 100px;height:100px;",r.onload=t,r.src="about:blank",document.body.appendChild(r)}function t(){n.scope=r.contentWindow;var e=n.scope.document,t=e.createElement("script");t.src=n.playbackScriptUrl,t.onload=n.onSiestaLoadComplete.bind(n),t.onerror=n.onSiestaLoadError.bind(n),t.setAttribute("crossorigin","anonymous"),(e.head||e.body).appendChild(t)}var n=this;window.addEventListener("message",n.onMessage.bind(n)),n.postMessage("playbackengineloadstart",{href:location.href}),document.body?e():document.addEventListener("DOMContentLoaded",e);var r;this.replayAjaxInteraction&&(this.xhrSimulator=new RC.player.XhrSimulator({sinonScriptUrl:this.sinonScriptUrl}))},onSiestaLoadComplete:function(){var e=this;e.patchExtJSWindowTopAccess(),e.postMessage("playbackengineloaded"),e.createHarness(),e.resetScroll(),e.ready=!0,e.postMessage("ready",{applicationVersion:e.applicationVersion,frameworkVersion:e.frameworkVersion,scrollbarWidth:RC.util.Dom.measureScrollBarWidth()})},onUrlChange:function(){this.postMessage("urlchange",{href:location.href})},onTestUpdate:function(e,t,n){var r=n.description||n.annotation;"string"==typeof r&&r.match(/waited too long/i)&&!n.isPassed()&&this.postMessage("playbackFailed",{message:n.description||n.annotation,actionId:this.currentActionId})},postMessage:function(e,t){(t=t||{}).type=e,window.parent.postMessage(t,"*")},highlightTarget:function(e,t){var n=e instanceof Array;this.highlighter||(this.highlighter=new this.scope.Siesta.Project.Browser.UI.ElementHighlighter({window:window})),n?(t=e,e=document.body):(e=this.test.normalizeElement(e,!0,!0,!1))&&(e.offsetWidth||e.offsetHeight?t&&(t=this.test.normalizeOffset(t,this.scope.$(e))):e=t=null),this.highlighter.highlightTarget(e,t)},onSiestaLoadError:function(){this.postMessage("playbackengineloadfail")},onMessage:function(e){var t=e.data;switch(t.type){case"playbackContext":if(!this.test)return void console.error("Playback engine not initialized.");var n=t.settings;RC.apply(this.test.simulator,{mouseMovePrecision:n.mouseMovePrecision,pathBatchSize:n.pathBatchSize,dragDelay:n.dragDelay,actionDelay:n.actionDelay}),this.speed=n.speed,this.useOriginalTiming=n.useOriginalTiming,t.steps&&this.xhrSimulator&&this.xhrSimulator.prepareFor(t.steps),t.steps&&this.play(t.steps);break;case"browserContext":t.cookies&&RC.util.Cookie.inject(t.cookies),"number"==typeof t.scrollbarWidth&&this.attemptSetScrollbarWidth(t.scrollbarWidth),t.initialCursorPosition&&(this.initialCursorPosition=t.initialCursorPosition),this.xhrSimulator&&t.xhrResponses&&this.xhrSimulator.setRecordedResponses(t.xhrResponses);break;case"highlightTarget":if(!this.test)return void console.error("Playback engine not initialized.");this.highlightTarget(t.target,t.offset);break;case"stop":this.stop()}},play:function(e){if(0!==e.length){this.patchExtJSWindowTopAccess();var t=this,n=e[e.length-1];t.highlighter&&t.highlighter.stop(),e=t.processSteps(e).concat(function(e){t.postMessage("stop",{actionId:n.id})}),t.playing=!0,t.postMessage("play"),t.test.chain(e)}},stop:function(){var e=this;e.playing=!1,e.postMessage("stop",{actionId:e.currentActionId})},processSteps:function(e){var t=this,n=t.test,r=t.useOriginalTiming;return e.map(function(i,o){var a=0,s=e[o-1];n.mouseMovePrecision;if(o>0&&i.timestamp&&!s.moveCursorAlongPath){e[o-1].timestamp;var l=i.timestamp-s.timestamp;if(isNaN(l))throw new Error("Incorrect timestamps: "+String(i.timestamp)+" "+String(s.timestamp));a=r?Math.min(l,t.maxOriginalTimingActionWait):Math.min(l,"fast"===t.speed&&"click"!==s.action||"click"!==i.action?0:t.maxActionWait),a=Math.max(0,a)}return[function(e){t.playing&&(t.currentActionId=i.id,t.postMessage("beforeStepPlay",{actionId:i.id}),a?this.waitFor(a,e):e())},i.before,i,i.after,function(e){t.postMessage("stepPlayed",{actionId:i.id}),e()}]})},resetScroll:function(){var e=this.test&&this.test.global;if(e){var t=e.document;t&&t.body&&(t.body.scrollTop=t.documentElement.scrollTop=0)}},createHarness:function(){var e=this.scope,t=this.harness=new e.Siesta.Project.Browser,n=e.RC.player.ReplayTestClass;return t.configure({testClass:n,showCursor:!1,viewDOM:!0,autoRun:!1,needUI:!1,transparentEx:!0,runCore:"sequential",maxThreads:1,keepNLastResults:1,disableGlobalsCheck:!0,forceDOMVisible:!1,defaultTimeout:18e7}),t.start(),this.scopeProvider=new e.Scope.Provider.IFrame({scope:window,cls:"tr-iframe",launchId:Date.now(),name:"",performWrap:!1,seedingCode:"",sourceURL:"",useStrictMode:!0}),this.test=new n({player:this,bowser:bowser,xhrSimulator:this.xhrSimulator,moveCursorBetweenPoints:!bowser.mobile&&!bowser.tablet,scopeProvider:this.scopeProvider,transparentEx:!0,project:this.harness,testCode:"StartTest(function() {});",url:"/",initialCursorPosition:this.initialCursorPosition}),this.test.on("testupdate",this.onTestUpdate,this),this.harness.launchTest({scopeProvider:this.scopeProvider,desc:{url:"/"},testHolder:{test:this.test},startTestAnchor:{exceptionCatcher:function(e){e()},testErrorClass:function(){},args:[function(){}]}}),t},attemptSetScrollbarWidth:function(e){}};